(self.webpackChunkpfeProject=self.webpackChunkpfeProject||[]).push([[179],{390:(Ka,We,Mi)=>{"use strict";function w(n){return"function"==typeof n}let uo=!1;const mn={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else uo&&console.log("RxJS: Back to a better error behavior. Thank you. <3");uo=n},get useDeprecatedSynchronousErrorHandling(){return uo}};function er(n){setTimeout(()=>{throw n},0)}const tr={closed:!0,next(n){},error(n){if(mn.useDeprecatedSynchronousErrorHandling)throw n;er(n)},complete(){}},di=Array.isArray||(n=>n&&"number"==typeof n.length);function y(n){return null!==n&&"object"==typeof n}const m=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,i)=>`${i+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class p{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:i,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof p)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(w(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(o){e=o instanceof m?l(o.errors):[o]}}if(di(s)){let o=-1,h=s.length;for(;++o<h;){const _=s[o];if(y(_))try{_.unsubscribe()}catch(b){e=e||[],b instanceof m?e=e.concat(l(b.errors)):e.push(b)}}}if(e)throw new m(e)}add(e){let t=e;if(!e)return p.EMPTY;switch(typeof e){case"function":t=new p(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof p)){const s=t;t=new p,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=t;if(null===i)t._parentOrParents=this;else if(i instanceof p){if(i===this)return t;t._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return t;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const i=t.indexOf(e);-1!==i&&t.splice(i,1)}}}var n;function l(n){return n.reduce((e,t)=>e.concat(t instanceof m?t.errors:t),[])}p.EMPTY=((n=new p).closed=!0,n);const u="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class d extends p{constructor(e,t,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=tr;break;case 1:if(!e){this.destination=tr;break}if("object"==typeof e){e instanceof d?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,e,t,i)}}[u](){return this}static create(e,t,i){const r=new d(e,t,i);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class g extends d{constructor(e,t,i,r){super(),this._parentSubscriber=e;let s,o=this;w(t)?s=t:t&&(s=t.next,i=t.error,r=t.complete,t!==tr&&(o=Object.create(t),w(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=i,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;mn.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:i}=mn;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):er(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;er(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);mn.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),mn.useDeprecatedSynchronousErrorHandling)throw i;er(i)}}__tryOrSetError(e,t,i){if(!mn.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(r){return mn.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(er(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const C="function"==typeof Symbol&&Symbol.observable||"@@observable";function D(n){return n}function M(n){return 0===n.length?D:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let x=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const{operator:s}=this,o=function v(n,e,t){if(n){if(n instanceof d)return n;if(n[u])return n[u]()}return n||e||t?new d(n,e,t):new d(tr)}(t,i,r);if(o.add(s?s.call(o,this.source):this.source||mn.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),mn.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){mn.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),function c(n){for(;n;){const{closed:e,destination:t,isStopped:i}=n;if(e||i)return!1;n=t&&t instanceof d?t:null}return!0}(t)?t.error(i):console.warn(i)}}forEach(t,i){return new(i=R(i))((r,s)=>{let o;o=this.subscribe(h=>{try{t(h)}catch(_){s(_),o&&o.unsubscribe()}},s,r)})}_subscribe(t){const{source:i}=this;return i&&i.subscribe(t)}[C](){return this}pipe(...t){return 0===t.length?this:M(t)(this)}toPromise(t){return new(t=R(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function R(n){if(n||(n=mn.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const q=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class he extends p{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}class me extends d{constructor(e){super(e),this.destination=e}}let le=(()=>{class n extends x{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u](){return new me(this)}lift(t){const i=new De(this,this);return i.operator=t,i}next(t){if(this.closed)throw new q;if(!this.isStopped){const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].next(t)}}error(t){if(this.closed)throw new q;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new q;this.isStopped=!0;const{observers:t}=this,i=t.length,r=t.slice();for(let s=0;s<i;s++)r[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new q;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new q;return this.hasError?(t.error(this.thrownError),p.EMPTY):this.isStopped?(t.complete(),p.EMPTY):(this.observers.push(t),new he(this,t))}asObservable(){const t=new x;return t.source=this,t}}return n.create=(e,t)=>new De(e,t),n})();class De extends le{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):p.EMPTY}}function _e(n){return n&&"function"==typeof n.schedule}function ie(n,e){return function(i){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new xe(n,e))}}class xe{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new Re(e,this.project,this.thisArg))}}class Re extends d{constructor(e,t,i){super(e),this.project=t,this.count=0,this.thisArg=i||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const Ae=n=>e=>{for(let t=0,i=n.length;t<i&&!e.closed;t++)e.next(n[t]);e.complete()},L=function V(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),O=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function U(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const $=n=>{if(n&&"function"==typeof n[C])return(n=>e=>{const t=n[C]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(O(n))return Ae(n);if(U(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,er),e))(n);if(n&&"function"==typeof n[L])return(n=>e=>{const t=n[L]();for(;;){let i;try{i=t.next()}catch(r){return e.error(r),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${y(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function ue(n,e){return new x(t=>{const i=new p;let r=0;return i.add(e.schedule(function(){r!==n.length?(t.next(n[r++]),t.closed||i.add(this.schedule())):t.complete()})),i})}function K(n,e){return e?function z(n,e){if(null!=n){if(function Ce(n){return n&&"function"==typeof n[C]}(n))return function re(n,e){return new x(t=>{const i=new p;return i.add(e.schedule(()=>{const r=n[C]();i.add(r.subscribe({next(s){i.add(e.schedule(()=>t.next(s)))},error(s){i.add(e.schedule(()=>t.error(s)))},complete(){i.add(e.schedule(()=>t.complete()))}}))})),i})}(n,e);if(U(n))return function X(n,e){return new x(t=>{const i=new p;return i.add(e.schedule(()=>n.then(r=>{i.add(e.schedule(()=>{t.next(r),i.add(e.schedule(()=>t.complete()))}))},r=>{i.add(e.schedule(()=>t.error(r)))}))),i})}(n,e);if(O(n))return ue(n,e);if(function J(n){return n&&"function"==typeof n[L]}(n)||"string"==typeof n)return function ge(n,e){if(!n)throw new Error("Iterable cannot be null");return new x(t=>{const i=new p;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=n[L](),i.add(e.schedule(function(){if(t.closed)return;let s,o;try{const h=r.next();s=h.value,o=h.done}catch(h){return void t.error(h)}o?t.complete():(t.next(s),this.schedule())}))})),i})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof x?n:new x($(n))}class oe extends d{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ce extends d{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function Be(n,e){if(e.closed)return;if(n instanceof x)return n.subscribe(e);let t;try{t=$(n)(e)}catch(i){e.error(i)}return t}function Se(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(Se((r,s)=>K(n(r,s)).pipe(ie((o,h)=>e(r,o,s,h))),t)):("number"==typeof e&&(t=e),i=>i.lift(new ae(n,t)))}class ae{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new ke(e,this.project,this.concurrent))}}class ke extends ce{constructor(e,t,i=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new oe(this),i=this.destination;i.add(t);const r=Be(e,t);r!==t&&i.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Ze(n=Number.POSITIVE_INFINITY){return Se(D,n)}function vt(n,e){return e?ue(n,e):new x(Ae(n))}function rt(...n){let e=Number.POSITIVE_INFINITY,t=null,i=n[n.length-1];return _e(i)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof i&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof x?n[0]:Ze(e)(vt(n,t))}function Nt(){return function(e){return e.lift(new Ot(e))}}class Ot{constructor(e){this.connectable=e}call(e,t){const{connectable:i}=this;i._refCount++;const r=new xi(e,i),s=t.subscribe(r);return r.closed||(r.connection=i.connect()),s}}class xi extends d{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:i}=this,r=e._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class Ai extends x{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new p,e.add(this.source.subscribe(new Lu(this.getSubject(),this))),e.closed&&(this._connection=null,e=p.EMPTY)),e}refCount(){return Nt()(this)}}const Fn=(()=>{const n=Ai.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class Lu extends me{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}class hE{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:i}=this,r=this.subjectFactory(),s=i(r).subscribe(e);return s.add(t.subscribe(r)),s}}function fE(){return new le}function yt(n){for(let e in n)if(n[e]===yt)return e;throw Error("Could not find renamed property on target object.")}function ju(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ct(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ct).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Uu(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const gE=yt({__forward_ref__:yt});function bt(n){return n.__forward_ref__=bt,n.toString=function(){return Ct(this())},n}function je(n){return Hu(n)?n():n}function Hu(n){return"function"==typeof n&&n.hasOwnProperty(gE)&&n.__forward_ref__===bt}function zu(n){return n&&!!n.\u0275providers}const Ig="https://g.co/ng/security#xss";class se extends Error{constructor(e,t){super(Za(e,t)),this.code=e}}function Za(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}function Ge(n){return"string"==typeof n?n:null==n?"":String(n)}function Qa(n,e){throw new se(-201,!1)}function Ln(n,e){null==n&&function pt(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Oe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $t(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ja(n){return Og(n,el)||Og(n,Rg)}function Og(n,e){return n.hasOwnProperty(e)?n[e]:null}function Pg(n){return n&&(n.hasOwnProperty($u)||n.hasOwnProperty(SE))?n[$u]:null}const el=yt({\u0275prov:yt}),$u=yt({\u0275inj:yt}),Rg=yt({ngInjectableDef:yt}),SE=yt({ngInjectorDef:yt});var Ue=(()=>((Ue=Ue||{})[Ue.Default=0]="Default",Ue[Ue.Host=1]="Host",Ue[Ue.Self=2]="Self",Ue[Ue.SkipSelf=4]="SkipSelf",Ue[Ue.Optional=8]="Optional",Ue))();let Wu;function Nn(n){const e=Wu;return Wu=n,e}function kg(n,e,t){const i=Ja(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Ue.Optional?null:void 0!==e?e:void Qa(Ct(n))}const Dt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ho={},Gu="__NG_DI_FLAG__",tl="ngTempTokenPath",TE="ngTokenPath",ME=/\n/gm,xE="\u0275",Fg="__source";let fo;function is(n){const e=fo;return fo=n,e}function AE(n,e=Ue.Default){if(void 0===fo)throw new se(-203,!1);return null===fo?kg(n,void 0,e):fo.get(n,e&Ue.Optional?null:void 0,e)}function ye(n,e=Ue.Default){return(function EE(){return Wu}()||AE)(je(n),e)}function tt(n,e=Ue.Default){return ye(n,nl(e))}function nl(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Yu(n){const e=[];for(let t=0;t<n.length;t++){const i=je(n[t]);if(Array.isArray(i)){if(0===i.length)throw new se(900,!1);let r,s=Ue.Default;for(let o=0;o<i.length;o++){const h=i[o],_=IE(h);"number"==typeof _?-1===_?r=h.token:s|=_:r=h}e.push(ye(r,s))}else e.push(ye(i))}return e}function po(n,e){return n[Gu]=e,n.prototype[Gu]=e,n}function IE(n){return n[Gu]}function Ii(n){return{toString:n}.toString()}var hi=(()=>((hi=hi||{})[hi.OnPush=0]="OnPush",hi[hi.Default=1]="Default",hi))(),Zn=(()=>(function(n){n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom"}(Zn||(Zn={})),Zn))();const Oi={},dt=[],il=yt({\u0275cmp:yt}),Xu=yt({\u0275dir:yt}),qu=yt({\u0275pipe:yt}),Ng=yt({\u0275mod:yt}),Pi=yt({\u0275fac:yt}),go=yt({__NG_ELEMENT_ID__:yt});let RE=0;function Yt(n){return Ii(()=>{const e=Bg(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===hi.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||Zn.Emulated,id:"c"+RE++,styles:n.styles||dt,_:null,schemas:n.schemas||null,tView:null};jg(t);const i=n.dependencies;return t.directiveDefs=rl(i,!1),t.pipeDefs=rl(i,!0),t})}function FE(n){return gt(n)||en(n)}function LE(n){return null!==n}function Xt(n){return Ii(()=>({type:n.type,bootstrap:n.bootstrap||dt,declarations:n.declarations||dt,imports:n.imports||dt,exports:n.exports||dt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Vg(n,e){if(null==n)return Oi;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function Ie(n){return Ii(()=>{const e=Bg(n);return jg(e),e})}function gt(n){return n[il]||null}function en(n){return n[Xu]||null}function vn(n){return n[qu]||null}function Tn(n,e){const t=n[Ng]||null;if(!t&&!0===e)throw new Error(`Type ${Ct(n)} does not have '\u0275mod' property.`);return t}function Bg(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||dt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Vg(n.inputs,e),outputs:Vg(n.outputs)}}function jg(n){n.features?.forEach(e=>e(n))}function rl(n,e){if(!n)return null;const t=e?vn:FE;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(LE)}const Ri=0,Me=1,Qe=2,Pt=3,Qn=4,Tr=5,tn=6,ss=7,kt=8,sl=9,ol=10,et=11,Ku=12,mo=13,Ug=14,os=15,nn=16,_o=17,as=18,fi=19,vo=20,Hg=21,St=22,Zu=1,zg=2,al=7,ll=8,ls=9,un=10;function Mn(n){return Array.isArray(n)&&"object"==typeof n[Zu]}function Jn(n){return Array.isArray(n)&&!0===n[Zu]}function Qu(n){return 0!=(4&n.flags)}function yo(n){return n.componentOffset>-1}function cl(n){return 1==(1&n.flags)}function ei(n){return!!n.template}function VE(n){return 0!=(256&n[Qe])}function Mr(n,e){return n.hasOwnProperty(Pi)?n[Pi]:null}class UE{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function yn(){return Gg}function Gg(n){return n.type.prototype.ngOnChanges&&(n.setInput=zE),HE}function HE(){const n=Xg(this),e=n?.current;if(e){const t=n.previous;if(t===Oi)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function zE(n,e,t,i){const r=this.declaredInputs[t],s=Xg(n)||function $E(n,e){return n[Yg]=e}(n,{previous:Oi,current:null}),o=s.current||(s.current={}),h=s.previous,_=h[r];o[r]=new UE(_&&_.currentValue,e,h===Oi),n[i]=e}yn.ngInherit=!0;const Yg="__ngSimpleChanges__";function Xg(n){return n[Yg]||null}const Vn=function(n,e,t){};function qt(n){for(;Array.isArray(n);)n=n[Ri];return n}function ul(n,e){return qt(e[n])}function xn(n,e){return qt(e[n.index])}function Zg(n,e){return n.data[e]}function Cn(n,e){const t=e[n];return Mn(t)?t:t[Ri]}function dl(n){return 64==(64&n[Qe])}function ir(n,e){return null==e?null:n[e]}function Qg(n){n[as]=0}function ed(n,e){n[Tr]+=e;let t=n,i=n[Pt];for(;null!==i&&(1===e&&1===t[Tr]||-1===e&&0===t[Tr]);)i[Tr]+=e,t=i,i=i[Pt]}const Ye={lFrame:lm(null),bindingsEnabled:!0};function em(){return Ye.bindingsEnabled}function fe(){return Ye.lFrame.lView}function st(){return Ye.lFrame.tView}function Co(n){return Ye.lFrame.contextLView=n,n[kt]}function bo(n){return Ye.lFrame.contextLView=null,n}function Kt(){let n=tm();for(;null!==n&&64===n.type;)n=n.parent;return n}function tm(){return Ye.lFrame.currentTNode}function pi(n,e){const t=Ye.lFrame;t.currentTNode=n,t.isParent=e}function td(){return Ye.lFrame.isParent}function nd(){Ye.lFrame.isParent=!1}function us(){return Ye.lFrame.bindingIndex++}function iT(n,e){const t=Ye.lFrame;t.bindingIndex=t.bindingRootIndex=n,id(e)}function id(n){Ye.lFrame.currentDirectiveIndex=n}function sm(){return Ye.lFrame.currentQueryIndex}function sd(n){Ye.lFrame.currentQueryIndex=n}function sT(n){const e=n[Me];return 2===e.type?e.declTNode:1===e.type?n[tn]:null}function om(n,e,t){if(t&Ue.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Ue.Host||(r=sT(s),null===r||(s=s[os],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Ye.lFrame=am();return i.currentTNode=e,i.lView=n,!0}function od(n){const e=am(),t=n[Me];Ye.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function am(){const n=Ye.lFrame,e=null===n?null:n.child;return null===e?lm(n):e}function lm(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function cm(){const n=Ye.lFrame;return Ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const um=cm;function ad(){const n=cm();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function hn(){return Ye.lFrame.selectedIndex}function xr(n){Ye.lFrame.selectedIndex=n}function Mt(){const n=Ye.lFrame;return Zg(n.tView,n.selectedIndex)}function hl(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:h,ngAfterViewInit:_,ngAfterViewChecked:b,ngOnDestroy:S}=s;o&&(n.contentHooks??(n.contentHooks=[])).push(-t,o),h&&((n.contentHooks??(n.contentHooks=[])).push(t,h),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(t,h)),_&&(n.viewHooks??(n.viewHooks=[])).push(-t,_),b&&((n.viewHooks??(n.viewHooks=[])).push(t,b),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(t,b)),null!=S&&(n.destroyHooks??(n.destroyHooks=[])).push(t,S)}}function fl(n,e,t){dm(n,e,3,t)}function pl(n,e,t,i){(3&n[Qe])===t&&dm(n,e,t,i)}function ld(n,e){let t=n[Qe];(3&t)===e&&(t&=2047,t+=1,n[Qe]=t)}function dm(n,e,t,i){const s=i??-1,o=e.length-1;let h=0;for(let _=void 0!==i?65535&n[as]:0;_<o;_++)if("number"==typeof e[_+1]){if(h=e[_],null!=i&&h>=i)break}else e[_]<0&&(n[as]+=65536),(h<s||-1==s)&&(pT(n,t,e,_),n[as]=(4294901760&n[as])+_+2),_++}function pT(n,e,t,i){const r=t[i]<0,s=t[i+1],h=n[r?-t[i]:t[i]];if(r){if(n[Qe]>>11<n[as]>>16&&(3&n[Qe])===e){n[Qe]+=2048,Vn(4,h,s);try{s.call(h)}finally{Vn(5,h,s)}}}else{Vn(4,h,s);try{s.call(h)}finally{Vn(5,h,s)}}}const ds=-1;class Do{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function ud(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],h=t[i++];n.setAttribute(e,o,h,s)}else{const s=r,o=t[++i];fm(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function hm(n){return 3===n||4===n||6===n}function fm(n){return 64===n.charCodeAt(0)}function So(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||pm(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function pm(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const h=n[s++];if("number"==typeof h){if(h===e){o=-1;break}if(h>e){o=s-1;break}}}for(;s<n.length;){const h=n[s];if("number"==typeof h)break;if(h===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function gm(n){return n!==ds}function gl(n){return 32767&n}function ml(n,e){let t=function vT(n){return n>>16}(n),i=e;for(;t>0;)i=i[os],t--;return i}let dd=!0;function _l(n){const e=dd;return dd=n,e}const mm=255,_m=5;let yT=0;const gi={};function vl(n,e){const t=vm(n,e);if(-1!==t)return t;const i=e[Me];i.firstCreatePass&&(n.injectorIndex=e.length,hd(i.data,n),hd(e,null),hd(i.blueprint,null));const r=fd(n,e),s=n.injectorIndex;if(gm(r)){const o=gl(r),h=ml(r,e),_=h[Me].data;for(let b=0;b<8;b++)e[s+b]=h[o+b]|_[o+b]}return e[s+8]=r,s}function hd(n,e){n.push(0,0,0,0,0,0,0,0,e)}function vm(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function fd(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=Em(r),null===i)return ds;if(t++,r=r[os],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return ds}function pd(n,e,t){!function CT(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(go)&&(i=t[go]),null==i&&(i=t[go]=yT++);const r=i&mm;e.data[n+(r>>_m)]|=1<<r}(n,e,t)}function ym(n,e,t){if(t&Ue.Optional||void 0!==n)return n;Qa()}function Cm(n,e,t,i){if(t&Ue.Optional&&void 0===i&&(i=null),!(t&(Ue.Self|Ue.Host))){const r=n[sl],s=Nn(void 0);try{return r?r.get(e,i,t&Ue.Optional):kg(e,i,t&Ue.Optional)}finally{Nn(s)}}return ym(i,0,t)}function bm(n,e,t,i=Ue.Default,r){if(null!==n){if(1024&e[Qe]){const o=function ET(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[Qe]&&!(256&o[Qe]);){const h=wm(s,o,t,i|Ue.Self,gi);if(h!==gi)return h;let _=s.parent;if(!_){const b=o[Hg];if(b){const S=b.get(t,gi,i);if(S!==gi)return S}_=Em(o),o=o[os]}s=_}return r}(n,e,t,i,gi);if(o!==gi)return o}const s=wm(n,e,t,i,gi);if(s!==gi)return s}return Cm(e,t,i,r)}function wm(n,e,t,i,r){const s=function DT(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(go)?n[go]:void 0;return"number"==typeof e?e>=0?e&mm:ST:e}(t);if("function"==typeof s){if(!om(e,n,i))return i&Ue.Host?ym(r,0,i):Cm(e,t,i,r);try{const o=s(i);if(null!=o||i&Ue.Optional)return o;Qa()}finally{um()}}else if("number"==typeof s){let o=null,h=vm(n,e),_=ds,b=i&Ue.Host?e[nn][tn]:null;for((-1===h||i&Ue.SkipSelf)&&(_=-1===h?fd(n,e):e[h+8],_!==ds&&Sm(i,!1)?(o=e[Me],h=gl(_),e=ml(_,e)):h=-1);-1!==h;){const S=e[Me];if(Dm(s,h,S.data)){const T=wT(h,e,t,o,i,b);if(T!==gi)return T}_=e[h+8],_!==ds&&Sm(i,e[Me].data[h+8]===b)&&Dm(s,h,e)?(o=S,h=gl(_),e=ml(_,e)):h=-1}}return r}function wT(n,e,t,i,r,s){const o=e[Me],h=o.data[n+8],S=yl(h,o,t,null==i?yo(h)&&dd:i!=o&&0!=(3&h.type),r&Ue.Host&&s===h);return null!==S?Ar(e,o,S,h):gi}function yl(n,e,t,i,r){const s=n.providerIndexes,o=e.data,h=1048575&s,_=n.directiveStart,S=s>>20,P=r?h+S:n.directiveEnd;for(let k=i?h:h+S;k<P;k++){const B=o[k];if(k<_&&t===B||k>=_&&B.type===t)return k}if(r){const k=o[_];if(k&&ei(k)&&k.type===t)return _}return null}function Ar(n,e,t,i){let r=n[t];const s=e.data;if(function gT(n){return n instanceof Do}(r)){const o=r;o.resolving&&function mE(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new se(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ft(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ge(n)}(s[t]));const h=_l(o.canSeeViewProviders);o.resolving=!0;const _=o.injectImpl?Nn(o.injectImpl):null;om(n,i,Ue.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function fT(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=Gg(e);(t.preOrderHooks??(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks??(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks??(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==_&&Nn(_),_l(h),o.resolving=!1,um()}}return r}function Dm(n,e,t){return!!(t[e+(n>>_m)]&1<<n)}function Sm(n,e){return!(n&Ue.Self||n&Ue.Host&&e)}class hs{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return bm(this._tNode,this._lView,e,nl(i),t)}}function ST(){return new hs(Kt(),fe())}function Zt(n){return Ii(()=>{const e=n.prototype.constructor,t=e[Pi]||gd(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Pi]||gd(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function gd(n){return Hu(n)?()=>{const e=gd(je(n));return e&&e()}:Mr(n)}function Em(n){const e=n[Me],t=e.type;return 2===t?e.declTNode:1===t?n[tn]:null}const ps="__parameters__";function ms(n,e,t){return Ii(()=>{const i=function md(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return h.annotation=o,h;function h(_,b,S){const T=_.hasOwnProperty(ps)?_[ps]:Object.defineProperty(_,ps,{value:[]})[ps];for(;T.length<=S;)T.push(null);return(T[S]=T[S]||[]).push(o),_}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class we{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Oe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ir(n,e){n.forEach(t=>Array.isArray(t)?Ir(t,e):e(t))}function Mm(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function bl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Mo(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function An(n,e,t){let i=_s(n,e);return i>=0?n[1|i]=t:(i=~i,function AT(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function vd(n,e){const t=_s(n,e);if(t>=0)return n[1|t]}function _s(n,e){return function xm(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const xo=po(ms("Optional"),8),Ao=po(ms("SkipSelf"),4);var bn=(()=>((bn=bn||{})[bn.Important=1]="Important",bn[bn.DashCase=2]="DashCase",bn))();const Sd=new Map;let ZT=0;const Td="__ngContext__";function rn(n,e){Mn(e)?(n[Td]=e[vo],function JT(n){Sd.set(n[vo],n)}(e)):n[Td]=e}let Md;function xd(n,e){return Md(n,e)}function Ro(n){const e=n[Pt];return Jn(e)?e[Pt]:e}function Ad(n){return Xm(n[mo])}function Id(n){return Xm(n[Qn])}function Xm(n){for(;null!==n&&!Jn(n);)n=n[Qn];return n}function ys(n,e,t,i,r){if(null!=i){let s,o=!1;Jn(i)?s=i:Mn(i)&&(o=!0,i=i[Ri]);const h=qt(i);0===n&&null!==t?null==r?e_(e,t,h):Or(e,t,h,r||null,!0):1===n&&null!==t?Or(e,t,h,r||null,!0):2===n?function Nd(n,e,t){const i=El(n,e);i&&function yM(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,h,o):3===n&&e.destroyNode(h),null!=s&&function wM(n,e,t,i,r){const s=t[al];s!==qt(t)&&ys(e,n,i,s,r);for(let h=un;h<t.length;h++){const _=t[h];ko(_[Me],_,n,e,i,s)}}(e,n,s,t,r)}}function Pd(n,e,t){return n.createElement(e,t)}function Km(n,e){const t=n[ls],i=t.indexOf(e),r=e[Pt];512&e[Qe]&&(e[Qe]&=-513,ed(r,-1)),t.splice(i,1)}function Rd(n,e){if(n.length<=un)return;const t=un+e,i=n[t];if(i){const r=i[_o];null!==r&&r!==n&&Km(r,i),e>0&&(n[t-1][Qn]=i[Qn]);const s=bl(n,un+e);!function dM(n,e){ko(n,e,e[et],2,null,null),e[Ri]=null,e[tn]=null}(i[Me],i);const o=s[fi];null!==o&&o.detachView(s[Me]),i[Pt]=null,i[Qn]=null,i[Qe]&=-65}return i}function Zm(n,e){if(!(128&e[Qe])){const t=e[et];t.destroyNode&&ko(n,e,t,3,null,null),function pM(n){let e=n[mo];if(!e)return kd(n[Me],n);for(;e;){let t=null;if(Mn(e))t=e[mo];else{const i=e[un];i&&(t=i)}if(!t){for(;e&&!e[Qn]&&e!==n;)Mn(e)&&kd(e[Me],e),e=e[Pt];null===e&&(e=n),Mn(e)&&kd(e[Me],e),t=e&&e[Qn]}e=t}}(e)}}function kd(n,e){if(!(128&e[Qe])){e[Qe]&=-65,e[Qe]|=128,function vM(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Do)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const h=r[s[o]],_=s[o+1];Vn(4,h,_);try{_.call(h)}finally{Vn(5,h,_)}}else{Vn(4,r,s);try{s.call(r)}finally{Vn(5,r,s)}}}}}(n,e),function _M(n,e){const t=n.cleanup,i=e[ss];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[r=o]():i[r=-o].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();e[ss]=null}}(n,e),1===e[Me].type&&e[et].destroy();const t=e[_o];if(null!==t&&Jn(e[Pt])){t!==e[Pt]&&Km(t,e);const i=e[fi];null!==i&&i.detachView(n)}!function eM(n){Sd.delete(n[vo])}(e)}}function Qm(n,e,t){return function Jm(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[Ri];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===Zn.None||s===Zn.Emulated)return null}return xn(i,t)}}(n,e.parent,t)}function Or(n,e,t,i,r){n.insertBefore(e,t,i,r)}function e_(n,e,t){n.appendChild(e,t)}function t_(n,e,t,i,r){null!==i?Or(n,e,t,i,r):e_(n,e,t)}function El(n,e){return n.parentNode(e)}function n_(n,e,t){return r_(n,e,t)}let Fd,jd,r_=function i_(n,e,t){return 40&n.type?xn(n,t):null};function Tl(n,e,t,i){const r=Qm(n,i,e),s=e[et],h=n_(i.parent||e[tn],i,e);if(null!=r)if(Array.isArray(t))for(let _=0;_<t.length;_++)t_(s,r,t[_],h,!1);else t_(s,r,t,h,!1);void 0!==Fd&&Fd(s,i,e,t,r)}function Ml(n,e){if(null!==e){const t=e.type;if(3&t)return xn(e,n);if(4&t)return Ld(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Ml(n,i);{const r=n[e.index];return Jn(r)?Ld(-1,r):qt(r)}}if(32&t)return xd(e,n)()||qt(n[e.index]);{const i=o_(n,e);return null!==i?Array.isArray(i)?i[0]:Ml(Ro(n[nn]),i):Ml(n,e.next)}}return null}function o_(n,e){return null!==e?n[nn][tn].projection[e.projection]:null}function Ld(n,e){const t=un+n+1;if(t<e.length){const i=e[t],r=i[Me].firstChild;if(null!==r)return Ml(i,r)}return e[al]}function Vd(n,e,t,i,r,s,o){for(;null!=t;){const h=i[t.index],_=t.type;if(o&&0===e&&(h&&rn(qt(h),i),t.flags|=2),32!=(32&t.flags))if(8&_)Vd(n,e,t.child,i,r,s,!1),ys(e,n,r,h,s);else if(32&_){const b=xd(t,i);let S;for(;S=b();)ys(e,n,r,S,s);ys(e,n,r,h,s)}else 16&_?a_(n,e,i,t,r,s):ys(e,n,r,h,s);t=o?t.projectionNext:t.next}}function ko(n,e,t,i,r,s){Vd(t,i,n.firstChild,e,r,s,!1)}function a_(n,e,t,i,r,s){const o=t[nn],_=o[tn].projection[i.projection];if(Array.isArray(_))for(let b=0;b<_.length;b++)ys(e,n,r,_[b],s);else Vd(n,e,_,o[Pt],r,s,!0)}function l_(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function c_(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&ud(n,e,i),null!==r&&l_(n,e,r),null!==s&&function SM(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}class p_{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ig})`}}function rr(n){return n instanceof p_?n.changingThisBreaksApplicationSecurity:n}const VM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Vt=(()=>((Vt=Vt||{})[Vt.NONE=0]="NONE",Vt[Vt.HTML=1]="HTML",Vt[Vt.STYLE=2]="STYLE",Vt[Vt.SCRIPT=3]="SCRIPT",Vt[Vt.URL=4]="URL",Vt[Vt.RESOURCE_URL=5]="RESOURCE_URL",Vt))();function bs(n){const e=function No(){const n=fe();return n&&n[Ku]}();return e?e.sanitize(Vt.URL,n)||"":function Fo(n,e){const t=function kM(n){return n instanceof p_&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Ig})`)}return t===e}(n,"URL")?rr(n):function Hd(n){return(n=String(n)).match(VM)?n:"unsafe:"+n}(Ge(n))}const Ol=new we("ENVIRONMENT_INITIALIZER"),D_=new we("INJECTOR",-1),S_=new we("INJECTOR_DEF_TYPES");class E_{get(e,t=ho){if(t===ho){const i=new Error(`NullInjectorError: No provider for ${Ct(e)}!`);throw i.name="NullInjectorError",i}return t}}function ZM(...n){return{\u0275providers:T_(0,n),\u0275fromNgModule:!0}}function T_(n,...e){const t=[],i=new Set;let r;return Ir(e,s=>{const o=s;Gd(o,t,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&M_(r,t),t}function M_(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];Yd(r,s=>{e.push(s)})}}function Gd(n,e,t,i){if(!(n=je(n)))return!1;let r=null,s=Pg(n);const o=!s&&gt(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const _=n.ngModule;if(s=Pg(_),!s)return!1;r=_}const h=i.has(r);if(o){if(h)return!1;if(i.add(r),o.dependencies){const _="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const b of _)Gd(b,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!h){let b;i.add(r);try{Ir(s.imports,S=>{Gd(S,e,t,i)&&(b||(b=[]),b.push(S))})}finally{}void 0!==b&&M_(b,e)}if(!h){const b=Mr(r)||(()=>new r);e.push({provide:r,useFactory:b,deps:dt},{provide:S_,useValue:r,multi:!0},{provide:Ol,useValue:()=>ye(r),multi:!0})}const _=s.providers;null==_||h||Yd(_,S=>{e.push(S)})}}return r!==n&&void 0!==n.providers}function Yd(n,e){for(let t of n)zu(t)&&(t=t.\u0275providers),Array.isArray(t)?Yd(t,e):e(t)}const QM=yt({provide:String,useValue:yt});function Xd(n){return null!==n&&"object"==typeof n&&QM in n}function Pr(n){return"function"==typeof n}const qd=new we("Set Injector scope."),Pl={},ex={};let Kd;function Rl(){return void 0===Kd&&(Kd=new E_),Kd}class Ni{}class I_ extends Ni{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qd(e,o=>this.processProvider(o)),this.records.set(D_,ws(void 0,this)),r.has("environment")&&this.records.set(Ni,ws(void 0,this));const s=this.records.get(qd);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(S_.multi,dt,Ue.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=is(this),i=Nn(void 0);try{return e()}finally{is(t),Nn(i)}}get(e,t=ho,i=Ue.Default){this.assertNotDestroyed(),i=nl(i);const r=is(this),s=Nn(void 0);try{if(!(i&Ue.SkipSelf)){let h=this.records.get(e);if(void 0===h){const _=function sx(n){return"function"==typeof n||"object"==typeof n&&n instanceof we}(e)&&Ja(e);h=_&&this.injectableDefInScope(_)?ws(Zd(e),Pl):null,this.records.set(e,h)}if(null!=h)return this.hydrate(e,h)}return(i&Ue.Self?Rl():this.parent).get(e,t=i&Ue.Optional&&t===ho?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[tl]=o[tl]||[]).unshift(Ct(e)),r)throw o;return function OE(n,e,t,i){const r=n[tl];throw e[Fg]&&r.unshift(e[Fg]),n.message=function PE(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==xE?n.slice(2):n;let r=Ct(e);if(Array.isArray(e))r=e.map(Ct).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let h=e[o];s.push(o+":"+("string"==typeof h?JSON.stringify(h):Ct(h)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(ME,"\n  ")}`}("\n"+n.message,r,t,i),n[TE]=r,n[tl]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Nn(s),is(r)}}resolveInjectorInitializers(){const e=is(this),t=Nn(void 0);try{const i=this.get(Ol.multi,dt,Ue.Self);for(const r of i)r()}finally{is(e),Nn(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Ct(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new se(205,!1)}processProvider(e){let t=Pr(e=je(e))?e:je(e&&e.provide);const i=function nx(n){return Xd(n)?ws(void 0,n.useValue):ws(O_(n),Pl)}(e);if(Pr(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=ws(void 0,Pl,!0),r.factory=()=>Yu(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===Pl&&(t.value=ex,t.value=t.factory()),"object"==typeof t.value&&t.value&&function rx(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=je(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Zd(n){const e=Ja(n),t=null!==e?e.factory:Mr(n);if(null!==t)return t;if(n instanceof we)throw new se(204,!1);if(n instanceof Function)return function tx(n){const e=n.length;if(e>0)throw Mo(e,"?"),new se(204,!1);const t=function wE(n){const e=n&&(n[el]||n[Rg]);return e?(function DE(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),e):null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new se(204,!1)}function O_(n,e,t){let i;if(Pr(n)){const r=je(n);return Mr(r)||Zd(r)}if(Xd(n))i=()=>je(n.useValue);else if(function A_(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Yu(n.deps||[]));else if(function x_(n){return!(!n||!n.useExisting)}(n))i=()=>ye(je(n.useExisting));else{const r=je(n&&(n.useClass||n.provide));if(!function ix(n){return!!n.deps}(n))return Mr(r)||Zd(r);i=()=>new r(...Yu(n.deps))}return i}function ws(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Qd(n,e){for(const t of n)Array.isArray(t)?Qd(t,e):t&&zu(t)?Qd(t.\u0275providers,e):e(t)}class ox{}class P_{}class lx{resolveComponentFactory(e){throw function ax(n){const e=Error(`No component factory found for ${Ct(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Vo=(()=>{class n{}return n.NULL=new lx,n})();function cx(){return Ds(Kt(),fe())}function Ds(n,e){return new Qt(xn(n,e))}let Qt=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=cx,n})();function ux(n){return n instanceof Qt?n.nativeElement:n}class Bo{}let Vi=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function dx(){const n=fe(),t=Cn(Kt().index,n);return(Mn(t)?t:n)[et]}(),n})(),hx=(()=>{class n{}return n.\u0275prov=Oe({token:n,providedIn:"root",factory:()=>null}),n})();class Rr{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const fx=new Rr("15.2.7"),Jd={},eh="ngOriginalError";function th(n){return n[eh]}class Ss{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&th(e);for(;t&&th(t);)t=th(t);return t||null}}function Bi(n){return n instanceof Function?n():n}function F_(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const L_="ng-template";function Sx(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const o=n[i++];if(t&&"class"===s&&-1!==F_(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function N_(n){return 4===n.type&&n.value!==L_}function Ex(n,e,t){return e===(4!==n.type||t?n.value:L_)}function Tx(n,e,t){let i=4;const r=n.attrs||[],s=function Ax(n){for(let e=0;e<n.length;e++)if(hm(n[e]))return e;return n.length}(r);let o=!1;for(let h=0;h<e.length;h++){const _=e[h];if("number"!=typeof _){if(!o)if(4&i){if(i=2|1&i,""!==_&&!Ex(n,_,t)||""===_&&1===e.length){if(ti(i))return!1;o=!0}}else{const b=8&i?_:e[++h];if(8&i&&null!==n.attrs){if(!Sx(n.attrs,b,t)){if(ti(i))return!1;o=!0}continue}const T=Mx(8&i?"class":_,r,N_(n),t);if(-1===T){if(ti(i))return!1;o=!0;continue}if(""!==b){let P;P=T>s?"":r[T+1].toLowerCase();const k=8&i?P:null;if(k&&-1!==F_(k,b,0)||2&i&&b!==P){if(ti(i))return!1;o=!0}}}}else{if(!o&&!ti(i)&&!ti(_))return!1;if(o&&ti(_))continue;o=!1,i=_|1&i}}return ti(i)||o}function ti(n){return 0==(1&n)}function Mx(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let h=e[++r];for(;"string"==typeof h;)h=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Ix(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function V_(n,e,t=!1){for(let i=0;i<e.length;i++)if(Tx(n,e[i],t))return!0;return!1}function Ox(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function B_(n,e){return n?":not("+e.trim()+")":e}function Px(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const h=n[++t];r+="["+o+(h.length>0?'="'+h+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!ti(o)&&(e+=B_(s,r),r=""),i=o,s=s||!ti(i);t++}return""!==r&&(e+=B_(s,r)),e}const Xe={};function ht(n){j_(st(),fe(),hn()+n,!1)}function j_(n,e,t,i){if(!i)if(3==(3&e[Qe])){const s=n.preOrderCheckHooks;null!==s&&fl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&pl(e,s,0,t)}xr(t)}function $_(n,e=null,t=null,i){const r=W_(n,e,t,i);return r.resolveInjectorInitializers(),r}function W_(n,e=null,t=null,i,r=new Set){const s=[t||dt,ZM(n)];return i=i||("object"==typeof n?void 0:Ct(n)),new I_(s,e||Rl(),i||null,r)}let mi=(()=>{class n{static create(t,i){if(Array.isArray(t))return $_({name:""},i,t,"");{const r=t.name??"";return $_({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=ho,n.NULL=new E_,n.\u0275prov=Oe({token:n,providedIn:"any",factory:()=>ye(D_)}),n.__NG_ELEMENT_ID__=-1,n})();function Q(n,e=Ue.Default){const t=fe();return null===t?ye(n,e):bm(Kt(),t,je(n),e)}function J_(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const o=n.data[s];sd(t[i]),o.contentQueries(2,e[s],s)}}}function Fl(n,e,t,i,r,s,o,h,_,b,S){const T=e.blueprint.slice();return T[Ri]=r,T[Qe]=76|i,(null!==S||n&&1024&n[Qe])&&(T[Qe]|=1024),Qg(T),T[Pt]=T[os]=n,T[kt]=t,T[ol]=o||n&&n[ol],T[et]=h||n&&n[et],T[Ku]=_||n&&n[Ku]||null,T[sl]=b||n&&n[sl]||null,T[tn]=s,T[vo]=function QT(){return ZT++}(),T[Hg]=S,T[nn]=2==e.type?n[nn]:T,T}function Ms(n,e,t,i,r){let s=n.data[e];if(null===s)s=function oh(n,e,t,i,r){const s=tm(),o=td(),_=n.data[e]=function rA(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=_),null!==s&&(o?null==s.child&&null!==_.parent&&(s.child=_):null===s.next&&(s.next=_,_.prev=s)),_}(n,e,t,i,r),function nT(){return Ye.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function wo(){const n=Ye.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return pi(s,!0),s}function jo(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function ah(n,e,t){od(e);try{const i=n.viewQuery;null!==i&&mh(1,i,t);const r=n.template;null!==r&&ev(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&J_(n,e),n.staticViewQueries&&mh(2,n.viewQuery,t);const s=n.components;null!==s&&function tA(n,e){for(let t=0;t<e.length;t++)SA(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Qe]&=-5,ad()}}function Ll(n,e,t,i){const r=e[Qe];if(128!=(128&r)){od(e);try{Qg(e),function im(n){return Ye.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&ev(n,e,t,2,i);const o=3==(3&r);if(o){const b=n.preOrderCheckHooks;null!==b&&fl(e,b,null)}else{const b=n.preOrderHooks;null!==b&&pl(e,b,0,null),ld(e,0)}if(function wA(n){for(let e=Ad(n);null!==e;e=Id(e)){if(!e[zg])continue;const t=e[ls];for(let i=0;i<t.length;i++){const r=t[i];512&r[Qe]||ed(r[Pt],1),r[Qe]|=512}}}(e),function bA(n){for(let e=Ad(n);null!==e;e=Id(e))for(let t=un;t<e.length;t++){const i=e[t],r=i[Me];dl(i)&&Ll(r,i,r.template,i[kt])}}(e),null!==n.contentQueries&&J_(n,e),o){const b=n.contentCheckHooks;null!==b&&fl(e,b)}else{const b=n.contentHooks;null!==b&&pl(e,b,1),ld(e,1)}!function Jx(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)xr(~r);else{const s=r,o=t[++i],h=t[++i];iT(o,s),h(2,e[s])}}}finally{xr(-1)}}(n,e);const h=n.components;null!==h&&function eA(n,e){for(let t=0;t<e.length;t++)DA(n,e[t])}(e,h);const _=n.viewQuery;if(null!==_&&mh(2,_,i),o){const b=n.viewCheckHooks;null!==b&&fl(e,b)}else{const b=n.viewHooks;null!==b&&pl(e,b,2),ld(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Qe]&=-41,512&e[Qe]&&(e[Qe]&=-513,ed(e[Pt],-1))}finally{ad()}}}function ev(n,e,t,i,r){const s=hn(),o=2&i;try{xr(-1),o&&e.length>St&&j_(n,e,St,!1),Vn(o?2:0,r),t(i,r)}finally{xr(s),Vn(o?3:1,r)}}function lh(n,e,t){if(Qu(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function ch(n,e,t){em()&&(function dA(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;yo(t)&&function vA(n,e,t){const i=xn(e,n),r=tv(t),s=n[ol],o=Nl(n,Fl(n,r,null,t.onPush?32:16,i,e,s,s.createRenderer(i,t),null,null,null));n[e.index]=o}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||vl(t,e),rn(i,e);const o=t.initialInputs;for(let h=r;h<s;h++){const _=n.data[h],b=Ar(e,n,h,t);rn(b,e),null!==o&&yA(0,h-r,b,_,0,o),ei(_)&&(Cn(t.index,e)[kt]=Ar(e,n,h,t))}}(n,e,t,xn(t,e)),64==(64&t.flags)&&ov(n,e,t))}function uh(n,e,t=xn){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],h=-1===o?t(e,n):n[o];n[r++]=h}}}function tv(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=dh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function dh(n,e,t,i,r,s,o,h,_,b){const S=St+i,T=S+r,P=function nA(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Xe);return t}(S,T),k="function"==typeof b?b():b;return P[Me]={type:n,blueprint:P,template:t,queries:null,viewQuery:h,declTNode:e,data:P.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:T,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:_,consts:k,incompleteFirstPass:!1}}function nv(n,e,t,i){const r=lv(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&cv(n).push(i,r.length-1))}function iv(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?rv(t,e,r,s):i.hasOwnProperty(r)&&rv(t,e,i[r],s)}return t}function rv(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function hh(n,e,t,i){if(em()){const r=null===i?null:{"":-1},s=function fA(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(V_(e,o.selectors,!1))if(i||(i=[]),ei(o))if(null!==o.findHostDirectiveDefs){const h=[];r=r||new Map,o.findHostDirectiveDefs(o,h,r),i.unshift(...h,o),fh(n,e,h.length)}else i.unshift(o),fh(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let o,h;null===s?o=h=null:[o,h]=s,null!==o&&sv(n,e,t,o,r,h),r&&function pA(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new se(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=So(t.mergedAttrs,t.attrs)}function sv(n,e,t,i,r,s){for(let b=0;b<i.length;b++)pd(vl(t,e),n,i[b].type);!function mA(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let b=0;b<i.length;b++){const S=i[b];S.providersResolver&&S.providersResolver(S)}let o=!1,h=!1,_=jo(n,e,i.length,null);for(let b=0;b<i.length;b++){const S=i[b];t.mergedAttrs=So(t.mergedAttrs,S.hostAttrs),_A(n,t,e,_,S),gA(_,S,r),null!==S.contentQueries&&(t.flags|=4),(null!==S.hostBindings||null!==S.hostAttrs||0!==S.hostVars)&&(t.flags|=64);const T=S.type.prototype;!o&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(t.index),o=!0),!h&&(T.ngOnChanges||T.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(t.index),h=!0),_++}!function sA(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,h=[];let _=null,b=null;for(let S=e.directiveStart;S<r;S++){const T=s[S],P=t?t.get(T):null,B=P?P.outputs:null;_=iv(T.inputs,S,_,P?P.inputs:null),b=iv(T.outputs,S,b,B);const H=null===_||null===o||N_(e)?null:CA(_,S,o);h.push(H)}null!==_&&(_.hasOwnProperty("class")&&(e.flags|=8),_.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=h,e.inputs=_,e.outputs=b}(n,t,s)}function ov(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function rT(){return Ye.lFrame.currentDirectiveIndex}();try{xr(s);for(let h=i;h<r;h++){const _=n.data[h],b=e[h];id(h),(null!==_.hostBindings||0!==_.hostVars||null!==_.hostAttrs)&&hA(_,b)}}finally{xr(-1),id(o)}}function hA(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function fh(n,e,t){e.componentOffset=t,(n.components??(n.components=[])).push(e.index)}function gA(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;ei(e)&&(t[""]=n)}}function _A(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=Mr(r.type)),o=new Do(s,ei(r),Q);n.blueprint[i]=o,t[i]=o,function cA(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const h=~e.index;(function uA(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=h&&o.push(h),o.push(t,i,s)}}(n,e,i,jo(n,t,r.hostVars,Xe),r)}function _i(n,e,t,i,r,s){const o=xn(n,e);!function ph(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const h=null==o?Ge(s):o(s,i||"",r);n.setAttribute(e,r,h,t)}}(e[et],o,s,n.value,t,i,r)}function yA(n,e,t,i,r,s){const o=s[e];if(null!==o){const h=i.setInput;for(let _=0;_<o.length;){const b=o[_++],S=o[_++],T=o[_++];null!==h?i.setInput(t,T,b,S):t[S]=T}}}function CA(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let h=0;h<o.length;h+=2)if(o[h]===e){i.push(s,o[h+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function av(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null]}function DA(n,e){const t=Cn(e,n);if(dl(t)){const i=t[Me];48&t[Qe]?Ll(i,t,i.template,t[kt]):t[Tr]>0&&gh(t)}}function gh(n){for(let i=Ad(n);null!==i;i=Id(i))for(let r=un;r<i.length;r++){const s=i[r];if(dl(s))if(512&s[Qe]){const o=s[Me];Ll(o,s,o.template,s[kt])}else s[Tr]>0&&gh(s)}const t=n[Me].components;if(null!==t)for(let i=0;i<t.length;i++){const r=Cn(t[i],n);dl(r)&&r[Tr]>0&&gh(r)}}function SA(n,e){const t=Cn(e,n),i=t[Me];(function EA(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),ah(i,t,t[kt])}function Nl(n,e){return n[mo]?n[Ug][Qn]=e:n[mo]=e,n[Ug]=e,e}function Vl(n){for(;n;){n[Qe]|=32;const e=Ro(n);if(VE(n)&&!e)return n;n=e}return null}function Bl(n,e,t,i=!0){const r=e[ol];r.begin&&r.begin();try{Ll(n,e,n.template,t)}catch(o){throw i&&dv(e,o),o}finally{r.end&&r.end()}}function mh(n,e,t){sd(0),e(n,t)}function lv(n){return n[ss]||(n[ss]=[])}function cv(n){return n.cleanup||(n.cleanup=[])}function dv(n,e){const t=n[sl],i=t?t.get(Ss,null):null;i&&i.handleError(e)}function _h(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],h=t[s++],_=e[o],b=n.data[o];null!==b.setInput?b.setInput(_,r,i,h):_[h]=r}}function jl(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const h=e[o];"number"==typeof h?s=h:1==s?r=Uu(r,h):2==s&&(i=Uu(i,h+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Ul(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(qt(s)),Jn(s))for(let h=un;h<s.length;h++){const _=s[h],b=_[Me].firstChild;null!==b&&Ul(_[Me],_,b,i)}const o=t.type;if(8&o)Ul(n,e,t.child,i);else if(32&o){const h=xd(t,e);let _;for(;_=h();)i.push(_)}else if(16&o){const h=o_(e,t);if(Array.isArray(h))i.push(...h);else{const _=Ro(e[nn]);Ul(_[Me],_,h,i,!0)}}t=r?t.projectionNext:t.next}return i}class Uo{get rootNodes(){const e=this._lView,t=e[Me];return Ul(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[kt]}set context(e){this._lView[kt]=e}get destroyed(){return 128==(128&this._lView[Qe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Pt];if(Jn(e)){const t=e[ll],i=t?t.indexOf(this):-1;i>-1&&(Rd(e,i),bl(t,i))}this._attachedToViewContainer=!1}Zm(this._lView[Me],this._lView)}onDestroy(e){nv(this._lView[Me],this._lView,null,e)}markForCheck(){Vl(this._cdRefInjectingView||this._lView)}detach(){this._lView[Qe]&=-65}reattach(){this._lView[Qe]|=64}detectChanges(){Bl(this._lView[Me],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function fM(n,e){ko(n,e,e[et],2,null,null)}(this._lView[Me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=e}}class TA extends Uo{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Bl(e[Me],e,e[kt],!1)}checkNoChanges(){}get context(){return null}}class hv extends Vo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=gt(e);return new Ho(t,this.ngModule)}}function fv(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class xA{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=nl(i);const r=this.injector.get(e,Jd,i);return r!==Jd||t===Jd?r:this.parentInjector.get(e,t,i)}}class Ho extends P_{get inputs(){return fv(this.componentDef.inputs)}get outputs(){return fv(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Rx(n){return n.map(Px).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof Ni?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new xA(e,s):e,h=o.get(Bo,null);if(null===h)throw new se(407,!1);const _=o.get(hx,null),b=h.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",T=i?function iA(n,e,t){return n.selectRootElement(e,t===Zn.ShadowDom)}(b,i,this.componentDef.encapsulation):Pd(b,S,function MA(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(S)),P=this.componentDef.onPush?288:272,k=dh(0,null,null,1,0,null,null,null,null,null),B=Fl(null,k,null,P,null,null,h,b,_,o,null);let H,W;od(B);try{const pe=this.componentDef;let ve,ne=null;pe.findHostDirectiveDefs?(ve=[],ne=new Map,pe.findHostDirectiveDefs(pe,ve,ne),ve.push(pe)):ve=[pe];const Te=function IA(n,e){const t=n[Me],i=St;return n[i]=e,Ms(t,i,2,"#host",null)}(B,T),ot=function OA(n,e,t,i,r,s,o,h){const _=r[Me];!function PA(n,e,t,i){for(const r of n)e.mergedAttrs=So(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(jl(e,e.mergedAttrs,!0),null!==t&&c_(i,t,e))}(i,n,e,o);const b=s.createRenderer(e,t),S=Fl(r,tv(t),null,t.onPush?32:16,r[n.index],n,s,b,h||null,null,null);return _.firstCreatePass&&fh(_,n,i.length-1),Nl(r,S),r[n.index]=S}(Te,T,pe,ve,B,h,b);W=Zg(k,St),T&&function kA(n,e,t,i){if(i)ud(n,t,["ng-version",fx.full]);else{const{attrs:r,classes:s}=function kx(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!ti(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&ud(n,t,r),s&&s.length>0&&l_(n,t,s.join(" "))}}(b,pe,T,i),void 0!==t&&function FA(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(W,this.ngContentSelectors,t),H=function RA(n,e,t,i,r,s){const o=Kt(),h=r[Me],_=xn(o,r);sv(h,r,o,t,null,i);for(let S=0;S<t.length;S++)rn(Ar(r,h,o.directiveStart+S,o),r);ov(h,r,o),_&&rn(_,r);const b=Ar(r,h,o.directiveStart+o.componentOffset,o);if(n[kt]=r[kt]=b,null!==s)for(const S of s)S(b,e);return lh(h,o,n),b}(ot,pe,ve,ne,B,[LA]),ah(k,B,null)}finally{ad()}return new AA(this.componentType,H,Ds(W,B),B,W)}}class AA extends ox{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new TA(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const s=this._rootLView;_h(s[Me],s,r,e,t),Vl(Cn(this._tNode.index,s))}}get injector(){return new hs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function LA(){const n=Kt();hl(fe()[Me],n)}function mt(n){let e=function pv(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(ei(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new se(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=vh(n.inputs),o.declaredInputs=vh(n.declaredInputs),o.outputs=vh(n.outputs);const h=r.hostBindings;h&&jA(n,h);const _=r.viewQuery,b=r.contentQueries;if(_&&VA(n,_),b&&BA(n,b),ju(n.inputs,r.inputs),ju(n.declaredInputs,r.declaredInputs),ju(n.outputs,r.outputs),ei(r)&&r.data.animation){const S=n.data;S.animation=(S.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const h=s[o];h&&h.ngInherit&&h(n),h===mt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function NA(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=So(r.hostAttrs,t=So(t,r.hostAttrs))}}(i)}function vh(n){return n===Oi?{}:n===dt?[]:n}function VA(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function BA(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function jA(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function Hl(n){return!!yh(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function yh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function sn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function ni(n,e,t,i){const r=fe();return sn(r,us(),e)&&(st(),_i(Mt(),r,n,e,t,i)),ni}function $o(n,e,t,i,r,s,o,h){const _=fe(),b=st(),S=n+St,T=b.firstCreatePass?function KA(n,e,t,i,r,s,o,h,_){const b=e.consts,S=Ms(e,n,4,o||null,ir(b,h));hh(e,t,S,ir(b,_)),hl(e,S);const T=S.tView=dh(2,S,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,b);return null!==e.queries&&(e.queries.template(e,S),T.queries=e.queries.embeddedTView(S)),S}(S,b,_,e,t,i,r,s,o):b.data[S];pi(T,!1);const P=_[et].createComment("");Tl(b,_,P,T),rn(P,_),Nl(_,_[S]=av(P,_,P,T)),cl(T)&&ch(b,_,T),null!=o&&uh(_,T,h)}function Fr(n){return function cs(n,e){return n[e]}(function tT(){return Ye.lFrame.contextLView}(),St+n)}function Et(n,e,t){const i=fe();return sn(i,us(),e)&&function In(n,e,t,i,r,s,o,h){const _=xn(e,t);let S,b=e.inputs;!h&&null!=b&&(S=b[i])?(_h(n,t,S,i,r),yo(e)&&function aA(n,e){const t=Cn(e,n);16&t[Qe]||(t[Qe]|=32)}(t,e.index)):3&e.type&&(i=function oA(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(_,i,r))}(st(),Mt(),i,n,e,i[et],t,!1),Et}function Ch(n,e,t,i,r){const o=r?"class":"style";_h(n,t,e.inputs[o],o,i)}function ee(n,e,t,i){const r=fe(),s=st(),o=St+n,h=r[et],_=s.firstCreatePass?function QA(n,e,t,i,r,s){const o=e.consts,_=Ms(e,n,2,i,ir(o,r));return hh(e,t,_,ir(o,s)),null!==_.attrs&&jl(_,_.attrs,!1),null!==_.mergedAttrs&&jl(_,_.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,_),_}(o,s,r,e,t,i):s.data[o],b=r[o]=Pd(h,e,function hT(){return Ye.lFrame.currentNamespace}()),S=cl(_);return pi(_,!0),c_(h,b,_),32!=(32&_.flags)&&Tl(s,r,b,_),0===function KE(){return Ye.lFrame.elementDepthCount}()&&rn(b,r),function ZE(){Ye.lFrame.elementDepthCount++}(),S&&(ch(s,r,_),lh(s,_,r)),null!==i&&uh(r,_),ee}function G(){let n=Kt();td()?nd():(n=n.parent,pi(n,!1));const e=n;!function QE(){Ye.lFrame.elementDepthCount--}();const t=st();return t.firstCreatePass&&(hl(t,n),Qu(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function mT(n){return 0!=(8&n.flags)}(e)&&Ch(t,e,fe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function _T(n){return 0!=(16&n.flags)}(e)&&Ch(t,e,fe(),e.stylesWithoutHost,!1),G}function Ne(n,e,t,i){return ee(n,e,t,i),G(),Ne}function Wo(){return fe()}function Go(n){return!!n&&"function"==typeof n.then}const Dh=function xv(n){return!!n&&"function"==typeof n.subscribe};function $e(n,e,t,i){const r=fe(),s=st(),o=Kt();return function Iv(n,e,t,i,r,s,o){const h=cl(i),b=n.firstCreatePass&&cv(n),S=e[kt],T=lv(e);let P=!0;if(3&i.type||o){const H=xn(i,e),W=o?o(H):H,pe=T.length,ve=o?Te=>o(qt(Te[i.index])):i.index;let ne=null;if(!o&&h&&(ne=function e1(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const h=e[ss],_=r[s+2];return h.length>_?h[_]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==ne)(ne.__ngLastListenerFn__||ne).__ngNextListenerFn__=s,ne.__ngLastListenerFn__=s,P=!1;else{s=Pv(i,e,S,s,!1);const Te=t.listen(W,r,s);T.push(s,Te),b&&b.push(r,ve,pe,pe+1)}}else s=Pv(i,e,S,s,!1);const k=i.outputs;let B;if(P&&null!==k&&(B=k[r])){const H=B.length;if(H)for(let W=0;W<H;W+=2){const ot=e[B[W]][B[W+1]].subscribe(s),ut=T.length;T.push(s,ot),b&&b.push(r,i.index,ut,-(ut+1))}}}(s,r,r[et],o,n,e,i),$e}function Ov(n,e,t,i){try{return Vn(6,e,t),!1!==t(i)}catch(r){return dv(n,r),!1}finally{Vn(7,e,t)}}function Pv(n,e,t,i,r){return function s(o){if(o===Function)return i;Vl(n.componentOffset>-1?Cn(n.index,e):e);let _=Ov(e,t,i,o),b=s.__ngNextListenerFn__;for(;b;)_=Ov(e,t,b,o)&&_,b=b.__ngNextListenerFn__;return r&&!1===_&&(o.preventDefault(),o.returnValue=!1),_}}function Rv(n=1){return function oT(n){return(Ye.lFrame.contextLView=function aT(n,e){for(;n>0;)e=e[os],n--;return e}(n,Ye.lFrame.contextLView))[kt]}(n)}function t1(n,e){let t=null;const i=function xx(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?V_(n,s,!0):Ox(i,s))return r}else t=r}return t}function Wl(n,e){return n<<17|e<<2}function or(n){return n>>17&32767}function Eh(n){return 2|n}function Lr(n){return(131068&n)>>2}function Th(n,e){return-131069&n|e<<2}function Mh(n){return 1|n}function zv(n,e,t,i,r){const s=n[t+1],o=null===e;let h=i?or(s):Lr(s),_=!1;for(;0!==h&&(!1===_||o);){const S=n[h+1];l1(n[h],e)&&(_=!0,n[h+1]=i?Mh(S):Eh(S)),h=i?or(S):Lr(S)}_&&(n[t+1]=i?Eh(s):Mh(s))}function l1(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&_s(n,e)>=0}function xh(n,e,t){return ii(n,e,t,!1),xh}function ar(n,e){return ii(n,e,null,!0),ar}function ii(n,e,t,i){const r=fe(),s=st(),o=function Fi(n){const e=Ye.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function Zv(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[hn()],o=function Kv(n,e){return e>=n.expandoStartIndex}(n,t);(function ty(n,e){return 0!=(n.flags&(e?8:16))})(s,i)&&null===e&&!o&&(e=!1),e=function _1(n,e,t,i){const r=function rd(n){const e=Ye.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Yo(t=Ah(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=Ah(r,n,e,t,i),null===s){let _=function v1(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Lr(i))return n[or(i)]}(n,e,i);void 0!==_&&Array.isArray(_)&&(_=Ah(null,n,e,_[1],i),_=Yo(_,e.attrs,i),function y1(n,e,t,i){n[or(t?e.classBindings:e.styleBindings)]=i}(n,e,i,_))}else s=function C1(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Yo(i,n[s].hostAttrs,t);return Yo(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function o1(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,h=or(o),_=Lr(o);n[i]=t;let S,b=!1;if(Array.isArray(t)?(S=t[1],(null===S||_s(t,S)>0)&&(b=!0)):S=t,r)if(0!==_){const P=or(n[h+1]);n[i+1]=Wl(P,h),0!==P&&(n[P+1]=Th(n[P+1],i)),n[h+1]=function r1(n,e){return 131071&n|e<<17}(n[h+1],i)}else n[i+1]=Wl(h,0),0!==h&&(n[h+1]=Th(n[h+1],i)),h=i;else n[i+1]=Wl(_,0),0===h?h=i:n[_+1]=Th(n[_+1],i),_=i;b&&(n[i+1]=Eh(n[i+1])),zv(n,S,i,!0),zv(n,S,i,!1),function a1(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&_s(s,e)>=0&&(t[i+1]=Mh(t[i+1]))}(e,S,n,i,s),o=Wl(h,_),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}(s,n,o,i),e!==Xe&&sn(r,o,e)&&function Jv(n,e,t,i,r,s,o,h){if(!(3&e.type))return;const _=n.data,b=_[h+1],S=function s1(n){return 1==(1&n)}(b)?ey(_,e,t,r,Lr(b),o):void 0;Gl(S)||(Gl(s)||function n1(n){return 2==(2&n)}(b)&&(s=ey(_,null,t,r,h,o)),function DM(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:bn.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=bn.Important),n.setStyle(t,i,r,s))}}(i,o,ul(hn(),t),r,s))}(s,s.data[hn()],r,r[et],n,r[o+1]=function D1(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ct(rr(n)))),n}(e,t),i,o)}function Ah(n,e,t,i,r){let s=null;const o=t.directiveEnd;let h=t.directiveStylingLast;for(-1===h?h=t.directiveStart:h++;h<o&&(s=e[h],i=Yo(i,s.hostAttrs,r),s!==n);)h++;return null!==n&&(t.directiveStylingLast=h),i}function Yo(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),An(n,o,!!t||e[++s]))}return void 0===n?null:n}function ey(n,e,t,i,r,s){const o=null===e;let h;for(;r>0;){const _=n[r],b=Array.isArray(_),S=b?_[1]:_,T=null===S;let P=t[r+1];P===Xe&&(P=T?dt:void 0);let k=T?vd(P,i):S===i?P:void 0;if(b&&!Gl(k)&&(k=vd(_,i)),Gl(k)&&(h=k,o))return h;const B=n[r+1];r=o?or(B):Lr(B)}if(null!==e){let _=s?e.residualClasses:e.residualStyles;null!=_&&(h=vd(_,i))}return h}function Gl(n){return void 0!==n}function de(n,e=""){const t=fe(),i=st(),r=n+St,s=i.firstCreatePass?Ms(i,r,1,e,null):i.data[r],o=t[r]=function Od(n,e){return n.createText(e)}(t[et],e);Tl(i,t,o,s),pi(s,!1)}function Ih(n){return Un("",n,""),Ih}function Un(n,e,t){const i=fe(),r=function As(n,e,t,i){return sn(n,us(),t)?e+Ge(t)+i:Xe}(i,n,e,t);return r!==Xe&&function ji(n,e,t){const i=ul(e,n);!function qm(n,e,t){n.setValue(e,t)}(n[et],i,t)}(i,hn(),r),Un}const Bs="en-US";let Dy=Bs;function Rh(n,e,t,i,r){if(n=je(n),Array.isArray(n))for(let s=0;s<n.length;s++)Rh(n[s],e,t,i,r);else{const s=st(),o=fe();let h=Pr(n)?n:je(n.provide),_=O_(n);const b=Kt(),S=1048575&b.providerIndexes,T=b.directiveStart,P=b.providerIndexes>>20;if(Pr(n)||!n.multi){const k=new Do(_,r,Q),B=Fh(h,e,r?S:S+P,T);-1===B?(pd(vl(b,o),s,h),kh(s,n,e.length),e.push(h),b.directiveStart++,b.directiveEnd++,r&&(b.providerIndexes+=1048576),t.push(k),o.push(k)):(t[B]=k,o[B]=k)}else{const k=Fh(h,e,S+P,T),B=Fh(h,e,S,S+P),W=B>=0&&t[B];if(r&&!W||!r&&!(k>=0&&t[k])){pd(vl(b,o),s,h);const pe=function UI(n,e,t,i,r){const s=new Do(n,t,Q);return s.multi=[],s.index=e,s.componentProviders=0,Xy(s,r,i&&!t),s}(r?jI:BI,t.length,r,i,_);!r&&W&&(t[B].providerFactory=pe),kh(s,n,e.length,0),e.push(h),b.directiveStart++,b.directiveEnd++,r&&(b.providerIndexes+=1048576),t.push(pe),o.push(pe)}else kh(s,n,k>-1?k:B,Xy(t[r?B:k],_,!r&&i));!r&&i&&W&&t[B].componentProviders++}}}function kh(n,e,t,i){const r=Pr(e),s=function JM(n){return!!n.useClass}(e);if(r||s){const _=(s?je(e.useClass):e).prototype.ngOnDestroy;if(_){const b=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const S=b.indexOf(t);-1===S?b.push(t,[i,_]):b[S+1].push(i,_)}else b.push(t,_)}}}function Xy(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Fh(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function BI(n,e,t,i){return Lh(this.multi,[])}function jI(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,h=Ar(t,t[Me],this.providerFactory.index,i);s=h.slice(0,o),Lh(r,s);for(let _=o;_<h.length;_++)s.push(h[_])}else s=[],Lh(r,s);return s}function Lh(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function _t(n,e=[]){return t=>{t.providersResolver=(i,r)=>function VI(n,e,t){const i=st();if(i.firstCreatePass){const r=ei(n);Rh(t,i.data,i.blueprint,r,!0),Rh(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class js{}class qy{}class Ky extends js{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hv(this);const i=Tn(e);this._bootstrapComponents=Bi(i.bootstrap),this._r3Injector=W_(e,t,[{provide:js,useValue:this},{provide:Vo,useValue:this.componentFactoryResolver}],Ct(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Nh extends qy{constructor(e){super(),this.moduleType=e}create(e){return new Ky(this.moduleType,e)}}class zI extends js{constructor(e,t,i){super(),this.componentFactoryResolver=new hv(this),this.instance=null;const r=new I_([...e,{provide:js,useValue:this},{provide:Vo,useValue:this.componentFactoryResolver}],t||Rl(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Zl(n,e,t=null){return new zI(n,e,t).injector}let $I=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=T_(0,t.type),r=i.length>0?Zl([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Oe({token:n,providedIn:"environment",factory:()=>new n(ye(Ni))}),n})();function Vh(n){n.getStandaloneInjector=e=>e.get($I).getOrCreateStandaloneInjector(n)}function jh(n,e,t,i){return function r0(n,e,t,i,r,s){const o=e+t;return sn(n,o,r)?function vi(n,e,t){return n[e]=t}(n,o+1,s?i.call(s,r):i(r)):function Jo(n,e){const t=n[e];return t===Xe?void 0:t}(n,o+1)}(fe(),function dn(){const n=Ye.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),n,e,t,i)}function Uh(n){return e=>{setTimeout(n,void 0,e)}}const at=class gO extends le{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const _=e;r=_.next?.bind(_),s=_.error?.bind(_),o=_.complete?.bind(_)}this.__isAsync&&(s=Uh(s),r&&(r=Uh(r)),o&&(o=Uh(o)));const h=super.subscribe({next:r,error:s,complete:o});return e instanceof p&&e.add(h),h}};function mO(){return this._results[Symbol.iterator]()}class Hh{get changes(){return this._changes||(this._changes=new at)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Hh.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=mO)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function Bn(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function MT(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let si=(()=>{class n{}return n.__NG_ELEMENT_ID__=yO,n})();const _O=si,vO=class extends _O{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tView,r=Fl(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);r[_o]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[fi];return null!==o&&(r[fi]=o.createEmbeddedView(i)),ah(i,r,e),new Uo(r)}};function yO(){return Ql(Kt(),fe())}function Ql(n,e){return 4&n.type?new vO(e,n,Ds(n,e)):null}let Hn=(()=>{class n{}return n.__NG_ELEMENT_ID__=CO,n})();function CO(){return d0(Kt(),fe())}const bO=Hn,c0=class extends bO{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Ds(this._hostTNode,this._hostLView)}get injector(){return new hs(this._hostTNode,this._hostLView)}get parentInjector(){const e=fd(this._hostTNode,this._hostLView);if(gm(e)){const t=ml(e,this._hostLView),i=gl(e);return new hs(t[Me].data[i+8],t)}return new hs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=u0(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-un}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,i,r,s){const o=e&&!function To(n){return"function"==typeof n}(e);let h;if(o)h=t;else{const T=t||{};h=T.index,i=T.injector,r=T.projectableNodes,s=T.environmentInjector||T.ngModuleRef}const _=o?e:new Ho(gt(e)),b=i||this.parentInjector;if(!s&&null==_.ngModule){const P=(o?b:this.parentInjector).get(Ni,null);P&&(s=P)}const S=_.create(b,r,void 0,s);return this.insert(S.hostView,h),S}insert(e,t){const i=e._lView,r=i[Me];if(function qE(n){return Jn(n[Pt])}(i)){const S=this.indexOf(e);if(-1!==S)this.detach(S);else{const T=i[Pt],P=new c0(T,T[tn],T[Pt]);P.detach(P.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function gM(n,e,t,i){const r=un+i,s=t.length;i>0&&(t[r-1][Qn]=e),i<s-un?(e[Qn]=t[r],Mm(t,un+i,e)):(t.push(e),e[Qn]=null),e[Pt]=t;const o=e[_o];null!==o&&t!==o&&function mM(n,e){const t=n[ls];e[nn]!==e[Pt][Pt][nn]&&(n[zg]=!0),null===t?n[ls]=[e]:t.push(e)}(o,e);const h=e[fi];null!==h&&h.insertView(n),e[Qe]|=64}(r,i,o,s);const h=Ld(s,o),_=i[et],b=El(_,o[al]);return null!==b&&function hM(n,e,t,i,r,s){i[Ri]=r,i[tn]=e,ko(n,i,t,1,r,s)}(r,o[tn],_,i,b,h),e.attachToViewContainerRef(),Mm(zh(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=u0(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Rd(this._lContainer,t);i&&(bl(zh(this._lContainer),t),Zm(i[Me],i))}detach(e){const t=this._adjustIndex(e,-1),i=Rd(this._lContainer,t);return i&&null!=bl(zh(this._lContainer),t)?new Uo(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function u0(n){return n[ll]}function zh(n){return n[ll]||(n[ll]=[])}function d0(n,e){let t;const i=e[n.index];if(Jn(i))t=i;else{let r;if(8&n.type)r=qt(i);else{const s=e[et];r=s.createComment("");const o=xn(n,e);Or(s,El(s,o),r,function CM(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=av(i,e,r,n),Nl(e,t)}return new c0(t,n,e)}class $h{constructor(e){this.queryList=e,this.matches=null}clone(){return new $h(this.queryList)}setDirty(){this.queryList.setDirty()}}class Wh{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new Wh(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==m0(e,t).matches&&this.queries[t].setDirty()}}class h0{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class Gh{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new Gh(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Yh{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Yh(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,wO(t,s)),this.matchTNodeWithReadOption(e,t,yl(t,e,s,!1,!1))}else i===si?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,yl(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Qt||r===Hn||r===si&&4&t.type)this.addMatch(t.index,-2);else{const s=yl(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function wO(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function SO(n,e,t,i){return-1===t?function DO(n,e){return 11&n.type?Ds(n,e):4&n.type?Ql(n,e):null}(e,n):-2===t?function EO(n,e,t){return t===Qt?Ds(e,n):t===si?Ql(e,n):t===Hn?d0(e,n):void 0}(n,e,i):Ar(n,n[Me],t,e)}function f0(n,e,t,i){const r=e[fi].queries[i];if(null===r.matches){const s=n.data,o=t.matches,h=[];for(let _=0;_<o.length;_+=2){const b=o[_];h.push(b<0?null:SO(e,s[b],o[_+1],t.metadata.read))}r.matches=h}return r.matches}function Xh(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=f0(n,e,r,t);for(let h=0;h<s.length;h+=2){const _=s[h];if(_>0)i.push(o[h/2]);else{const b=s[h+1],S=e[-_];for(let T=un;T<S.length;T++){const P=S[T];P[_o]===P[Pt]&&Xh(P[Me],P,b,i)}if(null!==S[ls]){const T=S[ls];for(let P=0;P<T.length;P++){const k=T[P];Xh(k[Me],k,b,i)}}}}}return i}function Ui(n){const e=fe(),t=st(),i=sm();sd(i+1);const r=m0(t,i);if(n.dirty&&function XE(n){return 4==(4&n[Qe])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?Xh(t,e,i,[]):f0(t,e,r,i);n.reset(s,ux),n.notifyOnChanges()}return!0}return!1}function ta(n,e,t){const i=st();i.firstCreatePass&&(g0(i,new h0(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),p0(i,fe(),e)}function na(n,e,t,i){const r=st();if(r.firstCreatePass){const s=Kt();g0(r,new h0(e,t,i),s.index),function MO(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}p0(r,fe(),t)}function Hi(){return function TO(n,e){return n[fi].queries[e].queryList}(fe(),sm())}function p0(n,e,t){const i=new Hh(4==(4&t));nv(n,e,i,i.destroy),null===e[fi]&&(e[fi]=new Wh),e[fi].queries.push(new $h(i))}function g0(n,e,t){null===n.queries&&(n.queries=new Gh),n.queries.track(new Yh(e,t))}function m0(n,e){return n.queries.getByIndex(e)}function ec(...n){}const tc=new we("Application Initializer");let nc=(()=>{class n{constructor(t){this.appInits=t,this.resolve=ec,this.reject=ec,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Go(s))t.push(s);else if(Dh(s)){const o=new Promise((h,_)=>{s.subscribe({complete:h,error:_})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(ye(tc,8))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ra=new we("AppId",{providedIn:"root",factory:function k0(){return`${ef()}${ef()}${ef()}`}});function ef(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const F0=new we("Platform Initializer"),sa=new we("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),L0=new we("AnimationModuleType");let XO=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const bi=new we("LocaleId",{providedIn:"root",factory:()=>tt(bi,Ue.Optional|Ue.SkipSelf)||function qO(){return typeof $localize<"u"&&$localize.locale||Bs}()});class ZO{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let N0=(()=>{class n{compileModuleSync(t){return new Nh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=Bi(Tn(t).declarations).reduce((o,h)=>{const _=gt(h);return _&&o.push(new Ho(_)),o},[]);return new ZO(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eP=(()=>Promise.resolve(0))();function tf(n){typeof Zone>"u"?eP.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ct{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new at(!1),this.onMicrotaskEmpty=new at(!1),this.onStable=new at(!1),this.onError=new at(!1),typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function tP(){let n=Dt.requestAnimationFrame,e=Dt.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function rP(n){const e=()=>{!function iP(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Dt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,rf(n),n.isCheckStableRunning=!0,nf(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),rf(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,h)=>{try{return j0(n),t.invokeTask(r,s,o,h)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),U0(n)}},onInvoke:(t,i,r,s,o,h,_)=>{try{return j0(n),t.invoke(r,s,o,h,_)}finally{n.shouldCoalesceRunChangeDetection&&e(),U0(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,rf(n),nf(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ct.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(ct.isInAngularZone())throw new se(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,nP,ec,ec);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const nP={};function nf(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function rf(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function j0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function U0(n){n._nesting--,nf(n)}class sP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new at,this.onMicrotaskEmpty=new at,this.onStable=new at,this.onError=new at}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const H0=new we(""),ic=new we("");let lf,sf=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,lf||(function oP(n){lf=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ct.assertNotInAngularZone(),tf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())tf(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(ye(ct),ye(af),ye(ic))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})(),af=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return lf?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const zi=!1;let lr=null;const z0=new we("AllowMultipleToken"),cf=new we("PlatformDestroyListeners"),$0=new we("appBootstrapListener");class W0{constructor(e,t){this.name=e,this.token=t}}function Y0(n,e,t=[]){const i=`Platform: ${e}`,r=new we(i);return(s=[])=>{let o=uf();if(!o||o.injector.get(z0,!1)){const h=[...t,...s,{provide:r,useValue:!0}];n?n(h):function cP(n){if(lr&&!lr.get(z0,!1))throw new se(400,!1);lr=n;const e=n.get(q0);(function G0(n){const e=n.get(F0,null);e&&e.forEach(t=>t())})(n)}(function X0(n=[],e){return mi.create({name:e,providers:[{provide:qd,useValue:"platform"},{provide:cf,useValue:new Set([()=>lr=null])},...n]})}(h,i))}return function dP(n){const e=uf();if(!e)throw new se(401,!1);return e}()}}function uf(){return lr?.get(q0)??null}let q0=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function Z0(n,e){let t;return t="noop"===n?new sP:("zone.js"===n?void 0:n)||new ct(e),t}(i?.ngZone,function K0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:ct,useValue:r}];return r.run(()=>{const o=mi.create({providers:s,parent:this.injector,name:t.moduleType.name}),h=t.create(o),_=h.injector.get(Ss,null);if(!_)throw new se(402,!1);return r.runOutsideAngular(()=>{const b=r.onError.subscribe({next:S=>{_.handleError(S)}});h.onDestroy(()=>{rc(this._modules,h),b.unsubscribe()})}),function Q0(n,e,t){try{const i=t();return Go(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(_,r,()=>{const b=h.injector.get(nc);return b.runInitializers(),b.donePromise.then(()=>(function Sy(n){Ln(n,"Expected localeId to be defined"),"string"==typeof n&&(Dy=n.toLowerCase().replace(/_/g,"-"))}(h.injector.get(bi,Bs)||Bs),this._moduleDoBootstrap(h),h))})})}bootstrapModule(t,i=[]){const r=J0({},i);return function aP(n,e,t){const i=new Nh(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(oa);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new se(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new se(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(cf,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(ye(mi))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function J0(n,e){return Array.isArray(e)?e.reduce(J0,n):{...n,...e}}let oa=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,i,r){this._zone=t,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new x(h=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{h.next(this._stable),h.complete()})}),o=new x(h=>{let _;this._zone.runOutsideAngular(()=>{_=this._zone.onStable.subscribe(()=>{ct.assertNotInAngularZone(),tf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,h.next(!0))})})});const b=this._zone.onUnstable.subscribe(()=>{ct.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{h.next(!1)}))});return()=>{_.unsubscribe(),b.unsubscribe()}});this.isStable=rt(s,o.pipe(function pE(){return n=>Nt()(function Bu(n,e){return function(i){let r;if(r="function"==typeof n?n:function(){return n},"function"==typeof e)return i.lift(new hE(r,e));const s=Object.create(i,Fn);return s.source=i,s.subjectFactory=r,s}}(fE)(n))}()))}bootstrap(t,i){const r=t instanceof P_;if(!this._injector.get(nc).done){!r&&function rs(n){const e=gt(n)||en(n)||vn(n);return null!==e&&e.standalone}(t);throw new se(405,zi)}let o;o=r?t:this._injector.get(Vo).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const h=function lP(n){return n.isBoundToModule}(o)?void 0:this._injector.get(js),b=o.create(mi.NULL,[],i||o.selector,h),S=b.location.nativeElement,T=b.injector.get(H0,null);return T?.registerApplication(S),b.onDestroy(()=>{this.detachView(b.hostView),rc(this.components,b),T?.unregisterApplication(S)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new se(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;rc(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get($0,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>rc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new se(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(ye(ct),ye(Ni),ye(Ss))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rc(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let zs=(()=>{class n{}return n.__NG_ELEMENT_ID__=fP,n})();function fP(n){return function pP(n,e,t){if(yo(n)&&!t){const i=Cn(n.index,e);return new Uo(i,i)}return 47&n.type?new Uo(e[nn],e):null}(Kt(),fe(),16==(16&n))}class rC{constructor(){}supports(e){return Hl(e)}create(e){return new CP(e)}}const yP=(n,e)=>e;class CP{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||yP}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<oC(i,r,s)?t:i,h=oC(o,r,s),_=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const b=h-r,S=_-r;if(b!=S){for(let P=0;P<b;P++){const k=P<s.length?s[P]:s[P]=0,B=k+P;S<=B&&B<b&&(s[P]=k+1)}s[o.previousIndex]=S-b}}h!==_&&e(o,h,_)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Hl(e))throw new se(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let h=0;h<this.length;h++)s=e[h],o=this._trackByFn(h,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,h)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,h),i=!0),t=t._next}else r=0,function YA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,h=>{o=this._trackByFn(r,h),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,h,o,r)),Object.is(t.item,h)||this._addIdentityChange(t,h)):(t=this._mismatch(t,h,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new bP(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new sC),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sC),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class bP{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wP{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class sC{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new wP,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function oC(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class aC{constructor(){}supports(e){return e instanceof Map||yh(e)}create(){return new DP}}class DP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||yh(e)))throw new se(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new SP(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class SP{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function lC(){return new ac([new rC])}let ac=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||lC()),deps:[[n,new Ao,new xo]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new se(901,!1)}}return n.\u0275prov=Oe({token:n,providedIn:"root",factory:lC}),n})();function cC(){return new aa([new aC])}let aa=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||cC()),deps:[[n,new Ao,new xo]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new se(901,!1)}}return n.\u0275prov=Oe({token:n,providedIn:"root",factory:cC}),n})();const MP=Y0(null,"core",[]);let xP=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(ye(oa))},n.\u0275mod=Xt({type:n}),n.\u0275inj=$t({}),n})();let gf=null;function $i(){return gf}class OP{}const Tt=new we("DocumentToken");let mf=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:function(){return function PP(){return ye(uC)}()},providedIn:"platform"}),n})();const RP=new we("Location Initialized");let uC=(()=>{class n extends mf{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $i().getBaseHref(this._doc)}onPopState(t){const i=$i().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=$i().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){dC()?this._history.pushState(t,i,r):this._location.hash=r}replaceState(t,i,r){dC()?this._history.replaceState(t,i,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(ye(Tt))},n.\u0275prov=Oe({token:n,factory:function(){return function kP(){return new uC(ye(Tt))}()},providedIn:"platform"}),n})();function dC(){return!!window.history.pushState}function _f(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function hC(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Wi(n){return n&&"?"!==n[0]?"?"+n:n}let Br=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:function(){return tt(pC)},providedIn:"root"}),n})();const fC=new we("appBaseHref");let pC=(()=>{class n extends Br{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??tt(Tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return _f(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Wi(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Wi(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Wi(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(ye(mf),ye(fC,8))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FP=(()=>{class n extends Br{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=_f(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Wi(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Wi(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(ye(mf),ye(fC,8))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})(),vf=(()=>{class n{constructor(t){this._subject=new at,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function VP(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(hC(gC(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Wi(i))}normalize(t){return n.stripTrailingSlash(function NP(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,gC(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wi(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wi(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Wi,n.joinWithSlash=_f,n.stripTrailingSlash=hC,n.\u0275fac=function(t){return new(t||n)(ye(Br))},n.\u0275prov=Oe({token:n,factory:function(){return function LP(){return new vf(ye(Br))}()},providedIn:"root"}),n})();function gC(n){return n.replace(/\/index.html$/,"")}const xf=/\s+/,SC=[];let EC=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=SC,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(xf):SC}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(xf):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,Boolean(t[i]));this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(xf).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(Q(ac),Q(aa),Q(Qt),Q(Vi))},n.\u0275dir=Ie({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class DR{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _c=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new DR(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const h=i.get(s);i.move(h,o),xC(h,r)}});for(let r=0,s=i.length;r<s;r++){const h=i.get(r).context;h.index=r,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{xC(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(Q(Hn),Q(si),Q(ac))},n.\u0275dir=Ie({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function xC(n,e){n.context.$implicit=e.item}let OC=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:bn.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(Q(Qt),Q(aa),Q(Vi))},n.\u0275dir=Ie({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),Rf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xt({type:n}),n.\u0275inj=$t({}),n})();const RC="browser";function kC(n){return n===RC}let tk=(()=>{class n{}return n.\u0275prov=Oe({token:n,providedIn:"root",factory:()=>new nk(ye(Tt),window)}),n})();class nk{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ik(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=FC(this.window.history)||FC(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function FC(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ok extends OP{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Lf extends Ok{static makeCurrent(){!function IP(n){gf||(gf=n)}(new Lf)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Pk(){return da=da||document.querySelector("base"),da?da.getAttribute("href"):null}();return null==t?null:function Rk(n){Cc=Cc||document.createElement("a"),Cc.setAttribute("href",n);const e=Cc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){da=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function bR(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Cc,da=null;const jC=new we("TRANSITION_ID"),Fk=[{provide:tc,useFactory:function kk(n,e,t){return()=>{t.get(nc).donePromise.then(()=>{const i=$i(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[jC,Tt,mi],multi:!0}];let Nk=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();const bc=new we("EventManagerPlugins");let wc=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(ye(bc),ye(ct))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();class UC{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=$i().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let HC=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,i){const r=this.usageCount;let s=r.get(t)??0;return s+=i,s>0?r.set(t,s):r.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})(),ha=(()=>{class n extends HC{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.forEach(s=>s.remove()),i.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,i){const r=this.doc.createElement("style");r.textContent=i,t.appendChild(r);const s=this.styleRef.get(i);s?s.push(r):this.styleRef.set(i,[r])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(ye(Tt))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();const Nf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Vf=/%COMP%/g,WC=new we("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function GC(n,e){return e.flat(100).map(t=>t.replace(Vf,n))}function YC(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Dc=(()=>{class n{constructor(t,i,r,s){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new Bf(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;const r=this.getOrCreateRenderer(t,i);return r instanceof KC?r.applyToHost(t):r instanceof jf&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.eventManager,h=this.sharedStylesHost,_=this.removeStylesOnCompDestory;switch(i.encapsulation){case Zn.Emulated:s=new KC(o,h,i,this.appId,_);break;case Zn.ShadowDom:return new $k(o,h,t,i);default:s=new jf(o,h,i,_)}s.onDestroy=()=>r.delete(i.id),r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(ye(wc),ye(ha),ye(ra),ye(WC))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();class Bf{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Nf[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(qC(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(qC(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=Nf[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Nf[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(bn.DashCase|bn.Important)?e.style.setProperty(t,i,r&bn.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&bn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,YC(i)):this.eventManager.addEventListener(e,t,YC(i))}}function qC(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class $k extends Bf{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=GC(r.id,r.styles);for(const o of s){const h=document.createElement("style");h.textContent=o,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class jf extends Bf{constructor(e,t,i,r,s=i.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=GC(s,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class KC extends jf{constructor(e,t,i,r,s){const o=r+"-"+i.id;super(e,t,i,s,o),this.contentAttr=function Uk(n){return"_ngcontent-%COMP%".replace(Vf,n)}(o),this.hostAttr=function Hk(n){return"_nghost-%COMP%".replace(Vf,n)}(o)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let Wk=(()=>{class n extends UC{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(ye(Tt))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();const ZC=["alt","control","meta","shift"],Gk={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Xk=(()=>{class n extends UC{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$i().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",h=i.indexOf("code");if(h>-1&&(i.splice(h,1),o="code."),ZC.forEach(b=>{const S=i.indexOf(b);S>-1&&(i.splice(S,1),o+=b+".")}),o+=s,0!=i.length||0===s.length)return null;const _={};return _.domEventName=r,_.fullKey=o,_}static matchEventFullKeyCode(t,i){let r=Gk[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),ZC.forEach(o=>{o!==r&&(0,Yk[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(ye(Tt))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();const JC=[{provide:sa,useValue:RC},{provide:F0,useValue:function qk(){Lf.makeCurrent()},multi:!0},{provide:Tt,useFactory:function Zk(){return function xM(n){jd=n}(document),document},deps:[]}],Qk=Y0(MP,"browser",JC),eb=new we(""),tb=[{provide:ic,useClass:class Lk{addToWindow(e){Dt.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},Dt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Dt.getAllAngularRootElements=()=>e.getAllRootElements(),Dt.frameworkStabilizers||(Dt.frameworkStabilizers=[]),Dt.frameworkStabilizers.push(i=>{const r=Dt.getAllAngularTestabilities();let s=r.length,o=!1;const h=function(_){o=o||_,s--,0==s&&i(o)};r.forEach(function(_){_.whenStable(h)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?$i().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:H0,useClass:sf,deps:[ct,af,ic]},{provide:sf,useClass:sf,deps:[ct,af,ic]}],nb=[{provide:qd,useValue:"root"},{provide:Ss,useFactory:function Kk(){return new Ss},deps:[]},{provide:bc,useClass:Wk,multi:!0,deps:[Tt,ct,sa]},{provide:bc,useClass:Xk,multi:!0,deps:[Tt]},{provide:Dc,useClass:Dc,deps:[wc,ha,ra,WC]},{provide:Bo,useExisting:Dc},{provide:HC,useExisting:ha},{provide:ha,useClass:ha,deps:[Tt]},{provide:wc,useClass:wc,deps:[bc,ct]},{provide:class rk{},useClass:Nk,deps:[]},[]];let ib=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:ra,useValue:t.appId},{provide:jC,useExisting:ra},Fk]}}}return n.\u0275fac=function(t){return new(t||n)(ye(eb,12))},n.\u0275mod=Xt({type:n}),n.\u0275inj=$t({providers:[...nb,...tb],imports:[Rf,xP]}),n})(),rb=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(ye(Tt))},n.\u0275prov=Oe({token:n,factory:function(t){let i=null;return i=t?new t:function eF(){return new rb(ye(Tt))}(),i},providedIn:"root"}),n})();function Fe(...n){let e=n[n.length-1];return _e(e)?(n.pop(),ue(n,e)):vt(n)}typeof window<"u"&&window;class Wn extends le{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new q;return this._value}next(e){super.next(this._value=e)}}const Sc=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();class oF extends d{notifyNext(e,t,i,r,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class aF extends d{constructor(e,t,i){super(),this.parent=e,this.outerValue=t,this.outerIndex=i,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function lF(n,e,t,i,r=new aF(n,t,i)){if(!r.closed)return e instanceof x?e.subscribe(r):$(e)(r)}const ab={};function zf(...n){let e,t;return _e(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&di(n[0])&&(n=n[0]),vt(n,t).lift(new cF(e))}class cF{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new uF(e,this.resultSelector))}}class uF extends oF{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(ab),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let i=0;i<t;i++)this.add(lF(this,e[i],void 0,i))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,i){const r=this.values,o=this.toRespond?r[i]===ab?--this.toRespond:this.toRespond:0;r[i]=t,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}function Ec(...n){return function dF(){return Ze(1)}()(Fe(...n))}const jr=new x(n=>n.complete());function Tc(n){return n?function hF(n){return new x(e=>n.schedule(()=>e.complete()))}(n):jr}function $f(n){return new x(e=>{let t;try{t=n()}catch(r){return void e.error(r)}return(t?K(t):Tc()).subscribe(e)})}function Ws(n,e){return new x(e?t=>e.schedule(fF,0,{error:n,subscriber:t}):t=>t.error(n))}function fF({error:n,subscriber:e}){e.error(n)}function Sn(n,e){return"function"==typeof e?t=>t.pipe(Sn((i,r)=>K(n(i,r)).pipe(ie((s,o)=>e(i,s,r,o))))):t=>t.lift(new pF(n))}class pF{constructor(e){this.project=e}call(e,t){return t.subscribe(new gF(e,this.project))}}class gF extends ce{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const i=new oe(this),r=this.destination;r.add(i),this.innerSubscription=Be(e,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const lb=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Yi(n){return e=>0===n?Tc():e.lift(new mF(n))}class mF{constructor(e){if(this.total=e,this.total<0)throw new lb}call(e,t){return t.subscribe(new _F(e,this.total))}}class _F extends d{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))}}function fa(...n){const e=n[n.length-1];return _e(e)?(n.pop(),t=>Ec(n,t,e)):t=>Ec(n,t)}function ci(n,e){return function(i){return i.lift(new vF(n,e))}}class vF{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new yF(e,this.predicate,this.thisArg))}}class yF extends d{constructor(e,t,i){super(e),this.predicate=t,this.thisArg=i,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(e)}}function Mc(n=null){return e=>e.lift(new CF(n))}class CF{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new bF(e,this.defaultValue))}}class bF extends d{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function cb(n=SF){return e=>e.lift(new wF(n))}class wF{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new DF(e,this.errorFactory))}}class DF extends d{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function SF(){return new Sc}function ur(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ci((r,s)=>n(r,s,i)):D,Yi(1),t?Mc(e):cb(()=>new Sc))}function Ur(n,e){return Se(n,e,1)}function dr(){}function Wt(n,e,t){return function(r){return r.lift(new EF(n,e,t))}}class EF{constructor(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}call(e,t){return t.subscribe(new TF(e,this.nextOrObserver,this.error,this.complete))}}class TF extends d{constructor(e,t,i,r){super(e),this._tapNext=dr,this._tapError=dr,this._tapComplete=dr,this._tapError=i||dr,this._tapComplete=r||dr,w(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||dr,this._tapError=t.error||dr,this._tapComplete=t.complete||dr)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}function Hr(n){return function(t){const i=new MF(n),r=t.lift(i);return i.caught=r}}class MF{constructor(e){this.selector=e}call(e,t){return t.subscribe(new xF(e,this.selector,this.caught))}}class xF extends ce{constructor(e,t,i){super(e),this.selector=t,this.caught=i}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const i=new oe(this);this.add(i);const r=Be(t,i);r!==i&&this.add(r)}}}function ub(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(r){return r.lift(new AF(n,e,t))}}class AF{constructor(e,t,i=!1){this.accumulator=e,this.seed=t,this.hasSeed=i}call(e,t){return t.subscribe(new IF(e,this.accumulator,this.seed,this.hasSeed))}}class IF extends d{constructor(e,t,i,r){super(e),this.accumulator=t,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let i;try{i=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}function Wf(n){return function(t){return 0===n?Tc():t.lift(new OF(n))}}class OF{constructor(e){if(this.total=e,this.total<0)throw new lb}call(e,t){return t.subscribe(new PF(e,this.total))}}class PF extends d{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,i=this.total,r=this.count++;t.length<i?t.push(e):t[r%i]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const i=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<i;s++){const o=t++%i;e.next(r[o])}}e.complete()}}function db(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ci((r,s)=>n(r,s,i)):D,Wf(1),t?Mc(e):cb(()=>new Sc))}class kF{constructor(e,t){this.predicate=e,this.inclusive=t}call(e,t){return t.subscribe(new FF(e,this.predicate,this.inclusive))}}class FF extends d{constructor(e,t,i){super(e),this.predicate=t,this.inclusive=i,this.index=0}_next(e){const t=this.destination;let i;try{i=this.predicate(e,this.index++)}catch(r){return void t.error(r)}this.nextOrComplete(e,i)}nextOrComplete(e,t){const i=this.destination;Boolean(t)?i.next(e):(this.inclusive&&i.next(e),i.complete())}}class NF{constructor(e){this.value=e}call(e,t){return t.subscribe(new VF(e,this.value))}}class VF extends d{constructor(e,t){super(e),this.value=t}_next(e){this.destination.next(this.value)}}function Gf(n){return e=>e.lift(new BF(n))}class BF{constructor(e){this.callback=e}call(e,t){return t.subscribe(new jF(e,this.callback))}}class jF extends d{constructor(e,t){super(e),this.add(new p(t))}}const Ke="primary",pa=Symbol("RouteTitle");class UF{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Gs(n){return new UF(n)}function HF(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],h=n[s];if(o.startsWith(":"))r[o.substring(1)]=h;else if(o!==h.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function wi(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!hb(n[r],e[r]))return!1;return!0}function hb(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function fb(n){return Array.prototype.concat.apply([],n)}function pb(n){return n.length>0?n[n.length-1]:null}function Jt(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function hr(n){return Dh(n)?n:Go(n)?K(Promise.resolve(n)):Fe(n)}const xc=!1,$F={exact:function _b(n,e,t){if(!zr(n.segments,e.segments)||!Ac(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!_b(n.children[i],e.children[i],t))return!1;return!0},subset:vb},gb={exact:function WF(n,e){return wi(n,e)},subset:function GF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>hb(n[t],e[t]))},ignored:()=>!0};function mb(n,e,t){return $F[t.paths](n.root,e.root,t.matrixParams)&&gb[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function vb(n,e,t){return yb(n,e,e.segments,t)}function yb(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!zr(r,t)||e.hasChildren()||!Ac(r,t,i))}if(n.segments.length===t.length){if(!zr(n.segments,t)||!Ac(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!vb(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(zr(n.segments,r)&&Ac(n.segments,r,i)&&n.children[Ke])&&yb(n.children[Ke],e,s,i)}}function Ac(n,e,t){return e.every((i,r)=>gb[t](n[r].parameters,i.parameters))}class fr{constructor(e=new nt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gs(this.queryParams)),this._queryParamMap}toString(){return qF.serialize(this)}}class nt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Jt(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ic(this)}}class ga{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Gs(this.parameters)),this._parameterMap}toString(){return wb(this)}}function zr(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let ma=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:function(){return new Yf},providedIn:"root"}),n})();class Yf{parse(e){const t=new s2(e);return new fr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${_a(e.root,!0)}`,i=function QF(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Oc(t)}=${Oc(r)}`).join("&"):`${Oc(t)}=${Oc(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function KF(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const qF=new Yf;function Ic(n){return n.segments.map(e=>wb(e)).join("/")}function _a(n,e){if(!n.hasChildren())return Ic(n);if(e){const t=n.children[Ke]?_a(n.children[Ke],!1):"",i=[];return Jt(n.children,(r,s)=>{s!==Ke&&i.push(`${s}:${_a(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function XF(n,e){let t=[];return Jt(n.children,(i,r)=>{r===Ke&&(t=t.concat(e(i,r)))}),Jt(n.children,(i,r)=>{r!==Ke&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Ke?[_a(n.children[Ke],!1)]:[`${r}:${_a(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ke]?`${Ic(n)}/${t[0]}`:`${Ic(n)}/(${t.join("//")})`}}function Cb(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Oc(n){return Cb(n).replace(/%3B/gi,";")}function Xf(n){return Cb(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pc(n){return decodeURIComponent(n)}function bb(n){return Pc(n.replace(/\+/g,"%20"))}function wb(n){return`${Xf(n.path)}${function ZF(n){return Object.keys(n).map(e=>`;${Xf(e)}=${Xf(n[e])}`).join("")}(n.parameters)}`}const JF=/^[^\/()?;=#]+/;function Rc(n){const e=n.match(JF);return e?e[0]:""}const e2=/^[^=?&#]+/,n2=/^[^&#]+/;class s2{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nt([],{}):new nt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Ke]=new nt(e,t)),i}parseSegment(){const e=Rc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new se(4009,xc);return this.capture(e),new ga(Pc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Rc(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Rc(this.remaining);r&&(i=r,this.capture(i))}e[Pc(t)]=Pc(i)}parseQueryParam(e){const t=function t2(n){const e=n.match(e2);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function r2(n){const e=n.match(n2);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=bb(t),s=bb(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Rc(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new se(4010,xc);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ke);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Ke]:new nt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new se(4011,xc)}}function qf(n){return n.segments.length>0?new nt([],{[Ke]:n}):n}function kc(n){const e={};for(const i of Object.keys(n.children)){const s=kc(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function o2(n){if(1===n.numberOfChildren&&n.children[Ke]){const e=n.children[Ke];return new nt(n.segments.concat(e.segments),e.children)}return n}(new nt(n.segments,e))}function $r(n){return n instanceof fr}const Kf=!1;function a2(n,e,t,i,r){if(0===t.length)return Ys(e.root,e.root,e.root,i,r);const s=function Mb(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Tb(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return Jt(s.outlets,(_,b)=>{h[b]="string"==typeof _?_.split("/"):_}),[...r,{outlets:h}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&r.push(h))}),r):[...r,s]},[]);return new Tb(t,e,i)}(t);return s.toRoot()?Ys(e.root,e.root,new nt([],{}),i,r):function o(_){const b=function c2(n,e,t,i){if(n.isAbsolute)return new Xs(e.root,!0,0);if(-1===i)return new Xs(t,t===e.root,0);return function xb(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new se(4005,Kf&&"Invalid number of '../'");r=i.segments.length}return new Xs(i,!1,r-s)}(t,i+(va(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,_),S=b.processChildren?qs(b.segmentGroup,b.index,s.commands):Zf(b.segmentGroup,b.index,s.commands);return Ys(e.root,b.segmentGroup,S,i,r)}(n.snapshot?._lastPathIndex)}function va(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ya(n){return"object"==typeof n&&null!=n&&n.outlets}function Ys(n,e,t,i,r){let o,s={};i&&Jt(i,(_,b)=>{s[b]=Array.isArray(_)?_.map(S=>`${S}`):`${_}`}),o=n===e?t:Eb(n,e,t);const h=qf(kc(o));return new fr(h,s,r)}function Eb(n,e,t){const i={};return Jt(n.children,(r,s)=>{i[s]=r===e?t:Eb(r,e,t)}),new nt(n.segments,i)}class Tb{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&va(i[0]))throw new se(4003,Kf&&"Root segment cannot have matrix parameters");const r=i.find(ya);if(r&&r!==pb(i))throw new se(4004,Kf&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xs{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function Zf(n,e,t){if(n||(n=new nt([],{})),0===n.segments.length&&n.hasChildren())return qs(n,e,t);const i=function d2(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],h=t[i];if(ya(h))break;const _=`${h}`,b=i<t.length-1?t[i+1]:null;if(r>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!Ib(_,b,o))return s;i+=2}else{if(!Ib(_,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new nt(n.segments.slice(0,i.pathIndex),{});return s.children[Ke]=new nt(n.segments.slice(i.pathIndex),n.children),qs(s,0,r)}return i.match&&0===r.length?new nt(n.segments,{}):i.match&&!n.hasChildren()?Qf(n,e,t):i.match?qs(n,0,r):Qf(n,e,t)}function qs(n,e,t){if(0===t.length)return new nt(n.segments,{});{const i=function u2(n){return ya(n[0])?n[0].outlets:{[Ke]:n}}(t),r={};if(!i[Ke]&&n.children[Ke]&&1===n.numberOfChildren&&0===n.children[Ke].segments.length){const s=qs(n.children[Ke],e,t);return new nt(n.segments,s.children)}return Jt(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=Zf(n.children[o],e,s))}),Jt(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new nt(n.segments,r)}}function Qf(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(ya(s)){const _=h2(s.outlets);return new nt(i,_)}if(0===r&&va(t[0])){i.push(new ga(n.segments[e].path,Ab(t[0]))),r++;continue}const o=ya(s)?s.outlets[Ke]:`${s}`,h=r<t.length-1?t[r+1]:null;o&&h&&va(h)?(i.push(new ga(o,Ab(h))),r+=2):(i.push(new ga(o,{})),r++)}return new nt(i,{})}function h2(n){const e={};return Jt(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=Qf(new nt([],{}),0,t))}),e}function Ab(n){const e={};return Jt(n,(t,i)=>e[i]=`${t}`),e}function Ib(n,e,t){return n==t.path&&wi(e,t.parameters)}const Ca="imperative";class Di{constructor(e,t){this.id=e,this.url=t}}class Jf extends Di{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Wr extends Di{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fc extends Di{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Lc extends Di{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class ep extends Di{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class f2 extends Di{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class p2 extends Di{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class g2 extends Di{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class m2 extends Di{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _2 extends Di{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class v2{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class y2{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class C2{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class b2{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class w2{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class D2{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ob{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let T2=(()=>{class n{createUrlTree(t,i,r,s,o,h){return a2(t||i.root,r,s,o,h)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})(),x2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:function(e){return T2.\u0275fac(e)},providedIn:"root"}),n})();class Pb{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=tp(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=tp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=np(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return np(e,this._root).map(t=>t.value)}}function tp(n,e){if(n===e.value)return e;for(const t of e.children){const i=tp(n,t);if(i)return i}return null}function np(n,e){if(n===e.value)return[e];for(const t of e.children){const i=np(n,t);if(i.length)return i.unshift(e),i}return[]}class Xi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ks(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Rb extends Pb{constructor(e,t){super(e),this.snapshot=t,ip(this,e)}toString(){return this.snapshot.toString()}}function kb(n,e){const t=function A2(n,e){const o=new Nc([],{},{},"",{},Ke,e,null,n.root,-1,{});return new Lb("",new Xi(o,[]))}(n,e),i=new Wn([new ga("",{})]),r=new Wn({}),s=new Wn({}),o=new Wn({}),h=new Wn(""),_=new Zs(i,r,o,h,s,Ke,e,t.root);return _.snapshot=t.root,new Rb(new Xi(_,[]),t)}class Zs{constructor(e,t,i,r,s,o,h,_){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=h,this.title=this.data?.pipe(ie(b=>b[pa]))??Fe(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ie(e=>Gs(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ie(e=>Gs(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Fb(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function I2(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Nc{get title(){return this.data?.[pa]}constructor(e,t,i,r,s,o,h,_,b,S,T){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=h,this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=S,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Lb extends Pb{constructor(e,t){super(t),this.url=e,ip(this,t)}toString(){return Nb(this._root)}}function ip(n,e){e.value._routerState=n,e.children.forEach(t=>ip(n,t))}function Nb(n){const e=n.children.length>0?` { ${n.children.map(Nb).join(", ")} } `:"";return`${n.value}${e}`}function rp(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),wi(e.params,t.params)||n.params.next(t.params),function zF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),wi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function sp(n,e){const t=wi(n.params,e.params)&&function YF(n,e){return zr(n,e)&&n.every((t,i)=>wi(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||sp(n.parent,e.parent))}function ba(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function P2(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ba(n,i,r);return ba(n,i)})}(n,e,t);return new Xi(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(h=>ba(n,h)),o}}const i=function R2(n){return new Zs(new Wn(n.url),new Wn(n.params),new Wn(n.queryParams),new Wn(n.fragment),new Wn(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>ba(n,s));return new Xi(i,r)}}const op="ngNavigationCancelingError";function Vb(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=$r(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Bb(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function Bb(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[op]=!0,i.cancellationCode=e,t&&(i.url=t),i}function jb(n){return Ub(n)&&$r(n.url)}function Ub(n){return n&&n[op]}class k2{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new wa,this.attachRef=null}}let wa=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new k2,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vc=!1;let ap=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ke,this.activateEvents=new at,this.deactivateEvents=new at,this.attachEvents=new at,this.detachEvents=new at,this.parentContexts=tt(wa),this.location=tt(Hn),this.changeDetector=tt(zs),this.environmentInjector=tt(Ni)}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new se(4012,Vc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new se(4012,Vc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new se(4012,Vc);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new se(4013,Vc);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,_=new F2(t,h,r.injector);if(i&&function L2(n){return!!n.resolveComponentFactory}(i)){const b=i.resolveComponentFactory(o);this.activated=r.createComponent(b,r.length,_)}else this.activated=r.createComponent(o,{index:r.length,injector:_,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ie({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[yn]}),n})();class F2{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Zs?this.route:e===wa?this.childContexts:this.parent.get(e,t)}}let lp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Yt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Vh],decls:1,vars:0,template:function(t,i){1&t&&Ne(0,"router-outlet")},dependencies:[ap],encapsulation:2}),n})();function Hb(n,e){return n.providers&&!n._injector&&(n._injector=Zl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function up(n){const e=n.children&&n.children.map(up),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ke&&(t.component=lp),t}function Gn(n){return n.outlet||Ke}function zb(n,e){const t=n.filter(i=>Gn(i)===e);return t.push(...n.filter(i=>Gn(i)!==e)),t}function Da(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class U2{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),rp(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Ks(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Jt(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ks(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),h=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ks(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Ks(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new D2(s.value.snapshot))}),e.children.length&&this.forwardEvent(new b2(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(rp(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const h=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(h.contexts),o.attachRef=h.componentRef,o.route=h.route.value,o.outlet&&o.outlet.attach(h.componentRef,h.route.value),rp(h.route.value),this.activateChildRoutes(e,null,o.children)}else{const h=Da(r.snapshot),_=h?.get(Vo)??null;o.attachRef=null,o.route=r,o.resolver=_,o.injector=h,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class $b{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Bc{constructor(e,t){this.component=e,this.route=t}}function H2(n,e,t){const i=n._root;return Sa(i,e?e._root:null,t,[i.value])}function Qs(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function bE(n){return null!==Ja(n)}(n)?e.get(n):n:i}function Sa(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ks(e);return n.children.forEach(o=>{(function $2(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const _=function W2(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!zr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!zr(n.url,e.url)||!wi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sp(n,e)||!wi(n.queryParams,e.queryParams);default:return!sp(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);_?r.canActivateChecks.push(new $b(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Sa(n,e,s.component?h?h.children:null:t,i,r),_&&h&&h.outlet&&h.outlet.isActivated&&r.canDeactivateChecks.push(new Bc(h.outlet.component,o))}else o&&Ea(e,h,r),r.canActivateChecks.push(new $b(i)),Sa(n,null,s.component?h?h.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Jt(s,(o,h)=>Ea(o,t.getContext(h),r)),r}function Ea(n,e,t){const i=Ks(n),r=n.value;Jt(i,(s,o)=>{Ea(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Bc(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function Ta(n){return"function"==typeof n}function dp(n){return n instanceof Sc||"EmptyError"===n?.name}const jc=Symbol("INITIAL_VALUE");function Js(){return Sn(n=>zf(n.map(e=>e.pipe(Yi(1),fa(jc)))).pipe(ie(e=>{for(const t of e)if(!0!==t){if(t===jc)return jc;if(!1===t||t instanceof fr)return t}return!0}),ci(e=>e!==jc),Yi(1)))}function Wb(n){return function E(...n){return M(n)}(Wt(e=>{if($r(e))throw Vb(0,e)}),ie(e=>!0===e))}const hp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Gb(n,e,t,i,r){const s=fp(n,e,t);return s.matched?function lL(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?Fe(r.map(o=>{const h=Qs(o,n);return hr(function Z2(n){return n&&Ta(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Js(),Wb()):Fe(!0)}(i=Hb(e,i),e,t).pipe(ie(o=>!0===o?s:{...hp})):Fe(s)}function fp(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...hp}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||HF)(t,n,e);if(!r)return{...hp};const s={};Jt(r.posParams,(h,_)=>{s[_]=h.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function Uc(n,e,t,i){if(t.length>0&&function dL(n,e,t){return t.some(i=>Hc(n,e,i)&&Gn(i)!==Ke)}(n,t,i)){const s=new nt(e,function uL(n,e,t,i){const r={};r[Ke]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Gn(s)!==Ke){const o=new nt([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[Gn(s)]=o}return r}(n,e,i,new nt(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function hL(n,e,t){return t.some(i=>Hc(n,e,i))}(n,t,i)){const s=new nt(n.segments,function cL(n,e,t,i,r){const s={};for(const o of i)if(Hc(n,t,o)&&!r[Gn(o)]){const h=new nt([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,s[Gn(o)]=h}return{...r,...s}}(n,e,t,i,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const r=new nt(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function Hc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Yb(n,e,t,i){return!!(Gn(n)===i||i!==Ke&&Hc(e,t,n))&&("**"===n.path||fp(e,n,t).matched)}function Xb(n,e,t){return 0===e.length&&!n.children[t]}const zc=!1;class $c{constructor(e){this.segmentGroup=e||null}}class qb{constructor(e){this.urlTree=e}}function Ma(n){return Ws(new $c(n))}function Kb(n){return Ws(new qb(n))}function fL(n){return Ws(new se(4e3,zc&&`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class mL{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=Uc(this.urlTree.root,[],[],this.config).segmentGroup,t=new nt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ke).pipe(ie(s=>this.createUrlTree(kc(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Hr(s=>{if(s instanceof qb)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof $c?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ke).pipe(ie(r=>this.createUrlTree(kc(r),e.queryParams,e.fragment))).pipe(Hr(r=>{throw r instanceof $c?this.noMatchError(r):r}))}noMatchError(e){return new se(4002,zc&&`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=qf(e);return new fr(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(ie(s=>new nt([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return K(r).pipe(Ur(s=>{const o=i.children[s],h=zb(t,s);return this.expandSegmentGroup(e,h,o,s).pipe(ie(_=>({segment:_,outlet:s})))}),ub((s,o)=>(s[o.outlet]=o.segment,s),{}),db())}expandSegment(e,t,i,r,s,o){return K(i).pipe(Ur(h=>this.expandSegmentAgainstRoute(e,t,i,h,r,s,o).pipe(Hr(b=>{if(b instanceof $c)return Fe(null);throw b}))),ur(h=>!!h),Hr((h,_)=>{if(dp(h))return Xb(t,r,s)?Fe(new nt([],{})):Ma(t);throw h}))}expandSegmentAgainstRoute(e,t,i,r,s,o,h){return Yb(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):Ma(t):Ma(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Kb(s):this.lineralizeSegments(i,s).pipe(Se(o=>{const h=new nt(o,{});return this.expandSegment(e,h,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:h,consumedSegments:_,remainingSegments:b,positionalParamSegments:S}=fp(t,r,s);if(!h)return Ma(t);const T=this.applyRedirectCommands(_,r.redirectTo,S);return r.redirectTo.startsWith("/")?Kb(T):this.lineralizeSegments(r,T).pipe(Se(P=>this.expandSegment(e,t,i,P.concat(b),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=Hb(i,e),i.loadChildren?(i._loadedRoutes?Fe({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe(ie(h=>(i._loadedRoutes=h.routes,i._loadedInjector=h.injector,new nt(r,{})))):Fe(new nt(r,{}))):Gb(t,i,r,e).pipe(Sn(({matched:o,consumedSegments:h,remainingSegments:_})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe(Se(S=>{const T=S.injector??e,P=S.routes,{segmentGroup:k,slicedSegments:B}=Uc(t,h,_,P),H=new nt(k.segments,k.children);if(0===B.length&&H.hasChildren())return this.expandChildren(T,P,H).pipe(ie(ne=>new nt(h,ne)));if(0===P.length&&0===B.length)return Fe(new nt(h,{}));const W=Gn(i)===s;return this.expandSegment(T,H,P,B,W?Ke:s,!0).pipe(ie(ve=>new nt(h.concat(ve.segments),ve.children)))})):Ma(t)))}getChildConfig(e,t,i){return t.children?Fe({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Fe({routes:t._loadedRoutes,injector:t._loadedInjector}):function aL(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?Fe(!0):Fe(r.map(o=>{const h=Qs(o,n);return hr(function Y2(n){return n&&Ta(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Js(),Wb())}(e,t,i).pipe(Se(r=>r?this.configLoader.loadChildren(e,t).pipe(Wt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function pL(n){return Ws(Bb(zc&&`Cannot load children because the guard of the route "path: '${n.path}'" returned false`,3))}(t))):Fe({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Fe(i);if(r.numberOfChildren>1||!r.children[Ke])return fL(e.redirectTo);r=r.children[Ke]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new fr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Jt(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const h=r.substring(1);i[s]=t[h]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Jt(t.children,(h,_)=>{o[_]=this.createSegmentGroup(e,h,i,r)}),new nt(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new se(4001,zc&&`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class vL{}class bL{constructor(e,t,i,r,s,o,h){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=h}recognize(){const e=Uc(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ke).pipe(ie(t=>{if(null===t)return null;const i=new Nc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ke,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Xi(i,t),s=new Lb(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=Fb(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return K(Object.keys(i.children)).pipe(Ur(r=>{const s=i.children[r],o=zb(t,r);return this.processSegmentGroup(e,o,s,r)}),ub((r,s)=>r&&s?(r.push(...s),r):null),function RF(n,e=!1){return t=>t.lift(new kF(n,e))}(r=>null!==r),Mc(null),db(),ie(r=>{if(null===r)return null;const s=Qb(r);return function wL(n){n.sort((e,t)=>e.value.outlet===Ke?-1:t.value.outlet===Ke?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return K(t).pipe(Ur(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),ur(o=>!!o),Hr(o=>{if(dp(o))return Xb(i,r,s)?Fe([]):Fe(null);throw o}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!Yb(t,i,r,s))return Fe(null);let o;if("**"===t.path){const h=r.length>0?pb(r).parameters:{},_=ew(i)+r.length;o=Fe({snapshot:new Nc(r,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tw(t),Gn(t),t.component??t._loadedComponent??null,t,Jb(i),_,nw(t)),consumedSegments:[],remainingSegments:[]})}else o=Gb(i,t,r,e).pipe(ie(({matched:h,consumedSegments:_,remainingSegments:b,parameters:S})=>{if(!h)return null;const T=ew(i)+_.length;return{snapshot:new Nc(_,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tw(t),Gn(t),t.component??t._loadedComponent??null,t,Jb(i),T,nw(t)),consumedSegments:_,remainingSegments:b}}));return o.pipe(Sn(h=>{if(null===h)return Fe(null);const{snapshot:_,consumedSegments:b,remainingSegments:S}=h;e=t._injector??e;const T=t._loadedInjector??e,P=function DL(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:k,slicedSegments:B}=Uc(i,b,S,P.filter(W=>void 0===W.redirectTo));if(0===B.length&&k.hasChildren())return this.processChildren(T,P,k).pipe(ie(W=>null===W?null:[new Xi(_,W)]));if(0===P.length&&0===B.length)return Fe([new Xi(_,[])]);const H=Gn(t)===s;return this.processSegment(T,P,k,B,H?Ke:s).pipe(ie(W=>null===W?null:[new Xi(_,W)]))}))}}function SL(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Qb(n){const e=[],t=new Set;for(const i of n){if(!SL(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=Qb(i.children);e.push(new Xi(i.value,r))}return e.filter(i=>!t.has(i))}function Jb(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ew(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function tw(n){return n.data||{}}function nw(n){return n.resolve||{}}function iw(n){return"string"==typeof n.title||null===n.title}function pp(n){return Sn(e=>{const t=n(e);return t?K(t).pipe(ie(()=>e)):Fe(e)})}const eo=new we("ROUTES");let gp=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=tt(N0)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Fe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=hr(t.loadComponent()).pipe(ie(sw),Wt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Gf(()=>{this.componentLoaders.delete(t)})),r=new Ai(i,()=>new le).pipe(Nt());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Fe({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(ie(h=>{this.onLoadEndListener&&this.onLoadEndListener(i);let _,b,S=!1;Array.isArray(h)?b=h:(_=h.create(t).injector,b=fb(_.get(eo,[],Ue.Self|Ue.Optional)));return{routes:b.map(up),injector:_}}),Gf(()=>{this.childrenLoaders.delete(i)})),o=new Ai(s,()=>new le).pipe(Nt());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(t){return hr(t()).pipe(ie(sw),Se(i=>i instanceof qy||Array.isArray(i)?Fe(i):K(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sw(n){return function PL(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Gc=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new le,this.configLoader=tt(gp),this.environmentInjector=tt(Ni),this.urlSerializer=tt(ma),this.rootContexts=tt(wa),this.navigationId=0,this.afterPreactivation=()=>Fe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new y2(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new v2(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t){return this.transitions=new Wn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ca,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ci(i=>0!==i.id),ie(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),Sn(i=>{let r=!1,s=!1;return Fe(i).pipe(Wt(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Sn(o=>{const h=t.browserUrlTree.toString(),_=!t.navigated||o.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!_&&"reload"!==(o.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const S="";return this.events.next(new Lc(o.id,t.serializeUrl(i.rawUrl),S,0)),t.rawUrlTree=o.rawUrl,o.resolve(null),jr}if(t.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ow(o.source)&&(t.browserUrlTree=o.extractedUrl),Fe(o).pipe(Sn(S=>{const T=this.transitions?.getValue();return this.events.next(new Jf(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),T!==this.transitions?.getValue()?jr:Promise.resolve(S)}),function _L(n,e,t,i){return Sn(r=>function gL(n,e,t,i,r){return new mL(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(ie(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Wt(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},i.urlAfterRedirects=S.urlAfterRedirects}),function TL(n,e,t,i,r){return Se(s=>function CL(n,e,t,i,r,s,o="emptyOnly"){return new bL(n,e,t,i,r,o,s).recognize().pipe(Sn(h=>null===h?function yL(n){return new x(e=>e.error(n))}(new vL):Fe(h)))}(n,e,t,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe(ie(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Wt(S=>{if(i.targetSnapshot=S.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!S.extras.skipLocationChange){const P=t.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);t.setBrowserUrl(P,S)}t.browserUrlTree=S.urlAfterRedirects}const T=new f2(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(T)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:S,extractedUrl:T,source:P,restoredState:k,extras:B}=o,H=new Jf(S,this.urlSerializer.serialize(T),P,k);this.events.next(H);const W=kb(T,this.rootComponentType).snapshot;return Fe(i={...o,targetSnapshot:W,urlAfterRedirects:T,extras:{...B,skipLocationChange:!1,replaceUrl:!1}})}{const S="";return this.events.next(new Lc(o.id,t.serializeUrl(i.extractedUrl),S,1)),t.rawUrlTree=o.rawUrl,o.resolve(null),jr}}),Wt(o=>{const h=new p2(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(h)}),ie(o=>i={...o,guards:H2(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function J2(n,e){return Se(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Fe({...t,guardsResult:!0}):function eL(n,e,t,i){return K(n).pipe(Se(r=>function oL(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Fe(s.map(h=>{const _=Da(e)??r,b=Qs(h,_);return hr(function K2(n){return n&&Ta(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,i):_.runInContext(()=>b(n,e,t,i))).pipe(ur())})).pipe(Js()):Fe(!0)}(r.component,r.route,t,e,i)),ur(r=>!0!==r,!0))}(o,i,r,n).pipe(Se(h=>h&&function G2(n){return"boolean"==typeof n}(h)?function tL(n,e,t,i){return K(e).pipe(Ur(r=>Ec(function iL(n,e){return null!==n&&e&&e(new C2(n)),Fe(!0)}(r.route.parent,i),function nL(n,e){return null!==n&&e&&e(new w2(n)),Fe(!0)}(r.route,i),function sL(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function z2(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>$f(()=>Fe(o.guards.map(_=>{const b=Da(o.node)??t,S=Qs(_,b);return hr(function q2(n){return n&&Ta(n.canActivateChild)}(S)?S.canActivateChild(i,n):b.runInContext(()=>S(i,n))).pipe(ur())})).pipe(Js())));return Fe(s).pipe(Js())}(n,r.path,t),function rL(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Fe(!0);const r=i.map(s=>$f(()=>{const o=Da(e)??t,h=Qs(s,o);return hr(function X2(n){return n&&Ta(n.canActivate)}(h)?h.canActivate(e,n):o.runInContext(()=>h(e,n))).pipe(ur())}));return Fe(r).pipe(Js())}(n,r.route,t))),ur(r=>!0!==r,!0))}(i,s,n,e):Fe(h)),ie(h=>({...t,guardsResult:h})))})}(this.environmentInjector,o=>this.events.next(o)),Wt(o=>{if(i.guardsResult=o.guardsResult,$r(o.guardsResult))throw Vb(0,o.guardsResult);const h=new g2(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(h)}),ci(o=>!!o.guardsResult||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),pp(o=>{if(o.guards.canActivateChecks.length)return Fe(o).pipe(Wt(h=>{const _=new m2(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(_)}),Sn(h=>{let _=!1;return Fe(h).pipe(function ML(n,e){return Se(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Fe(t);let s=0;return K(r).pipe(Ur(o=>function xL(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!iw(r)&&(s[pa]=r.title),function AL(n,e,t,i){const r=function IL(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Fe({});const s={};return K(r).pipe(Se(o=>function OL(n,e,t,i){const r=Da(e)??i,s=Qs(n,r);return hr(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(ur(),Wt(h=>{s[o]=h}))),Wf(1),function LF(n){return e=>e.lift(new NF(n))}(s),Hr(o=>dp(o)?jr:Ws(o)))}(s,n,e,i).pipe(ie(o=>(n._resolvedData=o,n.data=Fb(n,t).resolve,r&&iw(r)&&(n.data[pa]=r.title),null)))}(o.route,i,n,e)),Wt(()=>s++),Wf(1),Se(o=>s===r.length?Fe(t):jr))})}(t.paramsInheritanceStrategy,this.environmentInjector),Wt({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),Wt(h=>{const _=new _2(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(_)}))}),pp(o=>{const h=_=>{const b=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(_.routeConfig).pipe(Wt(S=>{_.component=S}),ie(()=>{})));for(const S of _.children)b.push(...h(S));return b};return zf(h(o.targetSnapshot.root)).pipe(Mc(),Yi(1))}),pp(()=>this.afterPreactivation()),ie(o=>{const h=function O2(n,e,t){const i=ba(n,e._root,t?t._root:void 0);return new Rb(i,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return i={...o,targetRouterState:h}}),Wt(o=>{t.currentUrlTree=o.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),t.routerState=o.targetRouterState,"deferred"===t.urlUpdateStrategy&&(o.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,o),t.browserUrlTree=o.urlAfterRedirects)}),((n,e,t)=>ie(i=>(new U2(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o)),Yi(1),Wt({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Wr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Gf(()=>{r||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Hr(o=>{if(s=!0,Ub(o)){jb(o)||(t.navigated=!0,t.restoreHistory(i,!0));const h=new Fc(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode);if(this.events.next(h),jb(o)){const _=t.urlHandlingStrategy.merge(o.url,t.rawUrlTree),b={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||ow(i.source)};t.scheduleNavigation(_,Ca,null,b,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{t.restoreHistory(i,!0);const h=new ep(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);this.events.next(h);try{i.resolve(t.errorHandler(o))}catch(_){i.reject(_)}}return jr}))}))}cancelNavigationTransition(t,i,r){const s=new Fc(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ow(n){return n!==Ca}let aw=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Ke);return i}getResolvedTitleForRoute(t){return t.data[pa]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:function(){return tt(RL)},providedIn:"root"}),n})(),RL=(()=>{class n extends aw{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(ye(rb))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:function(){return tt(LL)},providedIn:"root"}),n})();class FL{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let LL=(()=>{class n extends FL{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Zt(n)))(i||n)}}(),n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Yc=new we("",{providedIn:"root",factory:()=>({})});let VL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:function(){return tt(BL)},providedIn:"root"}),n})(),BL=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function jL(n){throw n}function UL(n,e,t){return e.parse("/")}const HL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let At=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=tt(XO),this.isNgZoneEnabled=!1,this.options=tt(Yc,{optional:!0})||{},this.errorHandler=this.options.errorHandler||jL,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||UL,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=tt(VL),this.routeReuseStrategy=tt(kL),this.urlCreationStrategy=tt(x2),this.titleStrategy=tt(aw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=fb(tt(eo,{optional:!0})??[]),this.navigationTransitions=tt(Gc),this.urlSerializer=tt(ma),this.location=tt(vf),this.isNgZoneEnabled=tt(ct)instanceof ct&&ct.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new fr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=kb(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ca,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const _={...r};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(s.state=_)}const h=this.parseUrl(t);this.scheduleNavigation(h,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(up),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:h,preserveFragment:_}=i,b=_?this.currentUrlTree.fragment:o;let S=null;switch(h){case"merge":S={...this.currentUrlTree.queryParams,...s};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=s||null}return null!==S&&(S=this.removeEmptyProps(S)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,t,S,b??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=$r(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Ca,null,i)}navigate(t,i={skipLocationChange:!1}){return function $L(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new se(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...HL}:!1===i?{...zL}:i,$r(t))return mb(this.currentUrlTree,t,r);const s=this.parseUrl(t);return mb(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let h,_,b,S;return o?(h=o.resolve,_=o.reject,b=o.promise):b=new Promise((T,P)=>{h=T,_=P}),S="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:S,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:h,reject:_,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(T=>Promise.reject(T))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class lw{}let YL=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ci(t=>t instanceof Wr),Ur(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=Zl(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,h=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(h,s.children??s._loadedRoutes))}return K(r).pipe(Ze())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):Fe(null);const s=r.pipe(Se(o=>null===o?Fe(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?K([s,this.loader.loadComponent(i)]).pipe(Ze()):s})}}return n.\u0275fac=function(t){return new(t||n)(ye(At),ye(N0),ye(Ni),ye(lw),ye(gp))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vp=new we("");let cw=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Jf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Wr&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ob&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ob(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function Q_(){throw new Error("invalid")}()},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();var On=(()=>((On=On||{})[On.COMPLETE=0]="COMPLETE",On[On.FAILED=1]="FAILED",On[On.REDIRECTING=2]="REDIRECTING",On))();const to=!1;function pr(n,e){return{\u0275kind:n,\u0275providers:e}}const yp=new we("",{providedIn:"root",factory:()=>!1});function dw(){const n=tt(mi);return e=>{const t=n.get(oa);if(e!==t.components[0])return;const i=n.get(At),r=n.get(hw);1===n.get(Cp)&&i.initialNavigation(),n.get(fw,null,Ue.Optional)?.setUpPreloading(),n.get(vp,null,Ue.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const hw=new we(to?"bootstrap done indicator":"",{factory:()=>new le}),Cp=new we(to?"initial navigation":"",{providedIn:"root",factory:()=>1});function QL(){let n=[];return n=to?[{provide:Ol,multi:!0,useFactory:()=>{const e=tt(At);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function S2(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],pr(1,n)}const fw=new we(to?"router preloader":"");function JL(n){return pr(0,[{provide:fw,useExisting:YL},{provide:lw,useExisting:n}])}const xa=!1,pw=new we(xa?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),eN=[vf,{provide:ma,useClass:Yf},At,wa,{provide:Zs,useFactory:function uw(n){return n.routerState.root},deps:[At]},gp,xa?{provide:yp,useValue:!0}:[]];function tN(){return new W0("Router",At)}let gw=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[eN,xa&&i?.enableTracing?QL().\u0275providers:[],{provide:eo,multi:!0,useValue:t},{provide:pw,useFactory:sN,deps:[[At,new xo,new Ao]]},{provide:Yc,useValue:i||{}},i?.useHash?{provide:Br,useClass:FP}:{provide:Br,useClass:pC},{provide:vp,useFactory:()=>{const n=tt(tk),e=tt(ct),t=tt(Yc),i=tt(Gc),r=tt(ma);return t.scrollOffset&&n.setOffset(t.scrollOffset),new cw(r,i,n,e,t)}},i?.preloadingStrategy?JL(i.preloadingStrategy).\u0275providers:[],{provide:W0,multi:!0,useFactory:tN},i?.initialNavigation?oN(i):[],[{provide:mw,useFactory:dw},{provide:$0,multi:!0,useExisting:mw}]]}}static forChild(t){return{ngModule:n,providers:[{provide:eo,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(ye(pw,8))},n.\u0275mod=Xt({type:n}),n.\u0275inj=$t({imports:[lp]}),n})();function sN(n){if(xa&&n)throw new se(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function oN(n){return["disabled"===n.initialNavigation?pr(3,[{provide:tc,multi:!0,useFactory:()=>{const e=tt(At);return()=>{e.setUpLocationChangeListener()}}},{provide:Cp,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?pr(2,[{provide:Cp,useValue:0},{provide:tc,multi:!0,deps:[mi],useFactory:e=>{const t=e.get(RP,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(At),s=e.get(hw);(function XL(n,e){n.events.pipe(ci(t=>t instanceof Wr||t instanceof Fc||t instanceof ep||t instanceof Lc),ie(t=>t instanceof Wr||t instanceof Lc?On.COMPLETE:t instanceof Fc&&(0===t.code||1===t.code)?On.REDIRECTING:On.FAILED),ci(t=>t!==On.REDIRECTING),Yi(1)).subscribe(()=>{e()})})(r,()=>{i(!0)}),e.get(Gc).afterPreactivation=()=>(i(!0),s.closed?Fe(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const mw=new we(xa?"Router Initializer":"");let lN=(()=>{class n{constructor(t){this.router=t}ngOnInit(){}navActivte1(){this.router.navigate(["activite1"])}navActivte2(){this.router.navigate(["activite2"])}navActivte3(){this.router.navigate(["activite3"])}navActivte4(){this.router.navigate(["activite4"])}navActivte5(){this.router.navigate(["activite5"])}navActivte6(){this.router.navigate(["activite6"])}navActivte7(){this.router.navigate(["activite7"])}navActivte8(){this.router.navigate(["activite8"])}navActivte9(){this.router.navigate(["activite9"])}}return n.\u0275fac=function(t){return new(t||n)(Q(At))},n.\u0275cmp=Yt({type:n,selectors:[["app-main-page"]],decls:20,vars:0,consts:[[1,"content"],[1,"activite","a1",3,"click"],[1,"activite","a2",3,"click"],[1,"activite","a3",3,"click"],[1,"activite","a4",3,"click"],[1,"activite","a5",3,"click"],[1,"activite","a6",3,"click"],[1,"activite","a7",3,"click"],[1,"activite","a8",3,"click"],[1,"activite","a9",3,"click"]],template:function(t,i){1&t&&(ee(0,"div",0)(1,"ul")(2,"li",1),$e("click",function(){return i.navActivte1()}),de(3,"\u0627\u0644\u0646\u0634\u0627\u0637 1"),G(),ee(4,"li",2),$e("click",function(){return i.navActivte2()}),de(5,"\u0627\u0644\u0646\u0634\u0627\u0637 2"),G(),ee(6,"li",3),$e("click",function(){return i.navActivte3()}),de(7,"\u0627\u0644\u0646\u0634\u0627\u0637 3"),G(),ee(8,"li",4),$e("click",function(){return i.navActivte4()}),de(9,"\u0627\u0644\u0646\u0634\u0627\u0637 4"),G(),ee(10,"li",5),$e("click",function(){return i.navActivte5()}),de(11,"\u0627\u0644\u0646\u0634\u0627\u0637 5"),G(),ee(12,"li",6),$e("click",function(){return i.navActivte6()}),de(13,"\u0627\u0644\u0646\u0634\u0627\u0637 6"),G(),ee(14,"li",7),$e("click",function(){return i.navActivte7()}),de(15,"\u0627\u0644\u0646\u0634\u0627\u0637 7"),G(),ee(16,"li",8),$e("click",function(){return i.navActivte8()}),de(17,"\u0627\u0644\u0646\u0634\u0627\u0637 8"),G(),ee(18,"li",9),$e("click",function(){return i.navActivte9()}),de(19,"\u0627\u0644\u0646\u0634\u0627\u0637 9"),G()()())},styles:[".activite[_ngcontent-%COMP%]{cursor:pointer;display:grid;margin:0 auto;list-style:none;color:#fff;width:15vw;font-family:title;font-size:20px;font-weight:600;padding:.5em 2em;text-align:center;border-radius:.2em}.a1[_ngcontent-%COMP%]{background:rgba(135,206,235,.6666666667)}.a1[_ngcontent-%COMP%]:hover{box-shadow:.5em .5em .3em #76b4cd99;scale:1.1;border-radius:2em;text-decoration:underline}.a2[_ngcontent-%COMP%]{background:rgba(230,230,250,.6666666667)}.a2[_ngcontent-%COMP%]:hover{box-shadow:.5em .5em .3em #aaaafa99;scale:1.1;border-radius:2em;text-decoration:underline}.a3[_ngcontent-%COMP%]{background:rgba(152,255,152,.6666666667)}.a3[_ngcontent-%COMP%]:hover{box-shadow:.5em .5em .3em #70ff8099;scale:1.1;border-radius:2em;text-decoration:underline}.a4[_ngcontent-%COMP%]{background:rgba(255,127,80,.6666666667)}.a4[_ngcontent-%COMP%]:hover{box-shadow:.5em .5em .3em #ff7f5099;scale:1.1;border-radius:2em;text-decoration:underline}.a5[_ngcontent-%COMP%]{background:rgba(64,224,208,.6666666667)}.a5[_ngcontent-%COMP%]:hover{box-shadow:.5em .5em .3em #40e0d099;scale:1.1;border-radius:2em;text-decoration:underline}.a6[_ngcontent-%COMP%]{background:rgba(218,165,32,.6666666667)}.a6[_ngcontent-%COMP%]:hover{box-shadow:.5em .5em .3em #bb752099;scale:1.1;border-radius:2em;text-decoration:underline}.a7[_ngcontent-%COMP%]{background:rgba(250,128,114,.6666666667)}.a7[_ngcontent-%COMP%]:hover{box-shadow:.5em .5em .3em #ee807299;scale:1.1;border-radius:2em;text-decoration:underline}.a8[_ngcontent-%COMP%]{background:rgba(218,112,214,.6666666667)}.a8[_ngcontent-%COMP%]:hover{box-shadow:.5em .5em .3em #c767c499;scale:1.1;border-radius:2em;text-decoration:underline}.a9[_ngcontent-%COMP%]{background:rgba(100,149,237,.6666666667)}.a9[_ngcontent-%COMP%]:hover{box-shadow:.5em .5em .3em #547cc699;scale:1.1;border-radius:2em;text-decoration:underline}ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;height:100vh}.content[_ngcontent-%COMP%]{padding:0;background-image:url(341792299_770012378019495_3537664848324089426_n.021b91db168155c3.jpg);background-attachment:fixed;background-repeat:none;background-size:cover;background-position:center}"]}),n})();function gr(n){return null!=n&&"false"!=`${n}`}function _w(n,e=0){return function cN(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function bp(n){return Array.isArray(n)?n:[n]}function on(n){return n instanceof Qt?n.nativeElement:n}function vw(n,e,t,i){return w(t)&&(i=t,t=void 0),i?vw(n,e,t).pipe(ie(r=>di(r)?i(...r):i(r))):new x(r=>{yw(n,e,function s(o){r.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},r,t)})}function yw(n,e,t,i,r){let s;if(function hN(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(e,t,r),s=()=>o.removeEventListener(e,t,r)}else if(function dN(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(e,t),s=()=>o.off(e,t)}else if(function uN(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(e,t),s=()=>o.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,h=n.length;o<h;o++)yw(n[o],e,t,i,r)}i.add(s)}class fN extends p{constructor(e,t){super()}schedule(e,t=0){return this}}class Xc extends fN{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,i=t.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let Cw=(()=>{class n{constructor(t,i=n.now){this.SchedulerAction=t,this.now=i}schedule(t,i=0,r){return new this.SchedulerAction(this,t).schedule(r,i)}}return n.now=()=>Date.now(),n})();class ui extends Cw{constructor(e,t=Cw.now){super(e,()=>ui.delegate&&ui.delegate!==this?ui.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,i){return ui.delegate&&ui.delegate!==this?ui.delegate.schedule(e,t,i):super.schedule(e,t,i)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const wp=new class gN extends ui{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class pN extends Xc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});let mN=1;const _N=Promise.resolve(),qc={};function bw(n){return n in qc&&(delete qc[n],!0)}const ww={setImmediate(n){const e=mN++;return qc[e]=!0,_N.then(()=>bw(e)&&n()),e},clearImmediate(n){bw(n)}},Aa=(new class yN extends ui{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class vN extends Xc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=ww.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(ww.clearImmediate(t),e.scheduled=void 0)}}),new ui(Xc));class wN{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new DN(e,this.durationSelector))}}class DN extends ce{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let t;try{const{durationSelector:r}=this;t=r(e)}catch(r){return this.destination.error(r)}const i=Be(t,new oe(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:e,hasValue:t,throttled:i}=this;i&&(this.remove(i),this.throttled=void 0,i.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function Dp(n){return!di(n)&&n-parseFloat(n)+1>=0}function EN(n){const{index:e,period:t,subscriber:i}=n;if(i.next(e),!i.closed){if(-1===t)return i.complete();n.index=e+1,this.schedule(n,t)}}function Dw(n,e=Aa){return function bN(n){return function(t){return t.lift(new wN(n))}}(()=>function SN(n=0,e,t){let i=-1;return Dp(e)?i=Number(e)<1?1:Number(e):_e(e)&&(t=e),_e(t)||(t=Aa),new x(r=>{const s=Dp(n)?n:+n-t.now();return t.schedule(EN,s,{index:0,period:i,subscriber:r})})}(n,e))}let Sp;try{Sp=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Sp=!1}let Ia,Ep,Kc=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?kC(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Sp)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(ye(sa))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Gr(n){return function TN(){if(null==Ia&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ia=!0}))}finally{Ia=Ia||!1}return Ia}()?n:!!n.capture}function Ew(n){if(function MN(){if(null==Ep){const n=typeof document<"u"?document.head:null;Ep=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Ep}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Oa(n){return n.composedPath?n.composedPath()[0]:n.target}let IN=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new le,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new x(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(Dw(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Fe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(ci(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=on(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>vw(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(ye(ct),ye(Kc),ye(Tt,8))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),PN=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new le,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Dw(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(ye(Kc),ye(ct),ye(Tt,8))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xt({type:n}),n.\u0275inj=$t({}),n})();class jN{constructor(e){this.total=e}call(e,t){return t.subscribe(new UN(e,this.total))}}class UN extends d{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}class zN{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new $N(e,this.dueTime,this.scheduler))}}class $N extends d{constructor(e,t,i){super(e),this.dueTime=t,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(WN,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function WN(n){n.debouncedNext()}function io(n){return e=>e.lift(new GN(n))}class GN{constructor(e){this.notifier=e}call(e,t){const i=new YN(e),r=Be(this.notifier,new oe(i));return r&&!i.seenValue?(i.add(r),t.subscribe(i)):i}}class YN extends ce{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}const Tw=new Set;let ro,XN=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):KN}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function qN(n){if(!Tw.has(n))try{ro||(ro=document.createElement("style"),ro.setAttribute("type","text/css"),document.head.appendChild(ro)),ro.sheet&&(ro.sheet.insertRule(`@media ${n} {body{ }}`,0),Tw.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(ye(Kc))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function KN(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let ZN=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new le}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Mw(bp(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=zf(Mw(bp(t)).map(o=>this._registerQuery(o).observable));return s=Ec(s.pipe(Yi(1)),s.pipe(function BN(n){return e=>e.lift(new jN(n))}(1),function HN(n,e=Aa){return t=>t.lift(new zN(n,e))}(0))),s.pipe(ie(o=>{const h={matches:!1,breakpoints:{}};return o.forEach(({matches:_,query:b})=>{h.matches=h.matches||_,h.breakpoints[b]=_}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new x(o=>{const h=_=>this._zone.run(()=>o.next(_));return i.addListener(h),()=>{i.removeListener(h)}}).pipe(fa(i),ie(({matches:o})=>({query:t,matches:o})),io(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(ye(XN),ye(ct))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Mw(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function Ow(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function Pw(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Rw="cdk-high-contrast-black-on-white",kw="cdk-high-contrast-white-on-black",Tp="cdk-high-contrast-active";let o6=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=tt(ZN).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Tp,Rw,kw),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(Tp,Rw):2===i&&t.add(Tp,kw)}}}return n.\u0275fac=function(t){return new(t||n)(ye(Kc),ye(Tt))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function l6(n){const{subscriber:e,counter:t,period:i}=n;e.next(t),this.schedule({subscriber:e,counter:t+1,period:i},i)}const c6=new we("cdk-dir-doc",{providedIn:"root",factory:function u6(){return tt(Tt)}}),d6=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Fw=(()=>{class n{constructor(t){this.value="ltr",this.change=new at,t&&(this.value=function h6(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?d6.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(ye(c6,8))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Lw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xt({type:n}),n.\u0275inj=$t({}),n})();function Mp(n,e,t){for(let i in e)if(e.hasOwnProperty(i)){const r=e[i];r?n.setProperty(i,r,t?.has(i)?"important":""):n.removeProperty(i)}return n}function so(n,e){const t=e?"":"none";Mp(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function Nw(n,e,t){Mp(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function Qc(n,e){return e&&"none"!=e?n+" "+e:n}function Vw(n){const e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function xp(n,e){return n.getPropertyValue(e).split(",").map(i=>i.trim())}function Ap(n){const e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function Ip(n,e,t){const{top:i,bottom:r,left:s,right:o}=n;return t>=i&&t<=r&&e>=s&&e<=o}function Pa(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function Bw(n,e,t,i){const{top:r,right:s,bottom:o,left:h,width:_,height:b}=n,S=_*e,T=b*e;return i>r-T&&i<o+T&&t>h-S&&t<s+S}class jw{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:Ap(t)})})}handleScroll(e){const t=Oa(e),i=this.positions.get(t);if(!i)return null;const r=i.scrollPosition;let s,o;if(t===this._document){const b=this.getViewportScrollPosition();s=b.top,o=b.left}else s=t.scrollTop,o=t.scrollLeft;const h=r.top-s,_=r.left-o;return this.positions.forEach((b,S)=>{b.clientRect&&t!==S&&t.contains(S)&&Pa(b.clientRect,h,_)}),r.top=s,r.left=o,{top:h,left:_}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function Uw(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();e.removeAttribute("id");for(let r=0;r<t.length;r++)t[r].removeAttribute("id");return"canvas"===i?$w(n,e):("input"===i||"select"===i||"textarea"===i)&&zw(n,e),Hw("canvas",n,e,$w),Hw("input, textarea, select",n,e,zw),e}function Hw(n,e,t,i){const r=e.querySelectorAll(n);if(r.length){const s=t.querySelectorAll(n);for(let o=0;o<r.length;o++)i(r[o],s[o])}}let p6=0;function zw(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${p6++}`)}function $w(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}const Ww=Gr({passive:!0}),Jc=Gr({passive:!1}),Op=new Set(["position"]);class m6{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=gr(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(i=>so(i,t)))}constructor(e,t,i,r,s,o){this._config=t,this._document=i,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new le,this._pointerMoveSubscription=p.EMPTY,this._pointerUpSubscription=p.EMPTY,this._scrollSubscription=p.EMPTY,this._resizeSubscription=p.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new le,this.started=new le,this.released=new le,this.ended=new le,this.entered=new le,this.exited=new le,this.dropped=new le,this.moved=this._moveEvents,this._pointerDown=h=>{if(this.beforeStarted.next(),this._handles.length){const _=this._getTargetHandle(h);_&&!this._disabledHandles.has(_)&&!this.disabled&&this._initializeDragSequence(_,h)}else this.disabled||this._initializeDragSequence(this._rootElement,h)},this._pointerMove=h=>{const _=this._getPointerPositionOnPage(h);if(!this._hasStartedDragging){if(Math.abs(_.x-this._pickupPositionOnPage.x)+Math.abs(_.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const k=Date.now()>=this._dragStartTime+this._getDragStartDelay(h),B=this._dropContainer;if(!k)return void this._endDragSequence(h);(!B||!B.isDragging()&&!B.isReceiving())&&(h.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(h)))}return}h.preventDefault();const b=this._getConstrainedPointerPosition(_);if(this._hasMoved=!0,this._lastKnownPointerPosition=_,this._updatePointerDirectionDelta(b),this._dropContainer)this._updateActiveDropContainer(b,_);else{const S=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,T=this._activeTransform;T.x=b.x-S.x+this._passiveTransform.x,T.y=b.y-S.y+this._passiveTransform.y,this._applyRootElementTransform(T.x,T.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:b,event:h,distance:this._getDragDistance(b),delta:this._pointerDirectionDelta})})},this._pointerUp=h=>{this._endDragSequence(h)},this._nativeDragStart=h=>{if(this._handles.length){const _=this._getTargetHandle(h);_&&!this._disabledHandles.has(_)&&!this.disabled&&h.preventDefault()}else this.disabled||h.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new jw(i),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(i=>on(i)),this._handles.forEach(i=>so(i,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&t.add(i)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=on(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,Jc),t.addEventListener("touchstart",this._pointerDown,Ww),t.addEventListener("dragstart",this._nativeDragStart,Jc)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?on(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),so(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),so(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){Ra(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const i=this._rootElement,r=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),h=this._getShadowRoot();r.insertBefore(o,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),Nw(i,!1,Op),this._document.body.appendChild(r.replaceChild(s,i)),this._getPreviewInsertionPoint(r,h).appendChild(this._preview),this.started.next({source:this,event:e}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const i=this.isDragging(),r=Ra(t),s=!r&&0!==t.button,o=this._rootElement,h=Oa(t),_=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),b=r?Pw(t):Ow(t);if(h&&h.draggable&&"mousedown"===t.type&&t.preventDefault(),i||s||_||b)return;if(this._handles.length){const P=o.style;this._rootElementTapHighlight=P.webkitTapHighlightColor||"",P.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(P=>this._updateOnScroll(P)),this._boundaryElement&&(this._boundaryRect=Ap(this._boundaryElement));const S=this._previewTemplate;this._pickupPositionInElement=S&&S.template&&!S.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,e,t);const T=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:T.x,y:T.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){Nw(this._rootElement,!0,Op),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,i=t.getItemIndex(this),r=this._getPointerPositionOnPage(e),s=this._getDragDistance(r),o=t._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r,event:e}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:r,event:e}),t.drop(this,i,this._initialIndex,this._initialContainer,o,s,r,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:i,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,i=e?e.template:null;let r;if(i&&e){const s=e.matchSize?this._initialClientRect:null,o=e.viewContainer.createEmbeddedView(i,e.context);o.detectChanges(),r=Yw(o,this._document),this._previewRef=o,e.matchSize?Xw(r,s):r.style.transform=eu(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=Uw(this._rootElement),Xw(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return Mp(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},Op),so(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>r.classList.add(s)):r.classList.add(t)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function f6(n){const e=getComputedStyle(n),t=xp(e,"transition-property"),i=t.find(h=>"transform"===h||"all"===h);if(!i)return 0;const r=t.indexOf(i),s=xp(e,"transition-duration"),o=xp(e,"transition-delay");return Vw(s[r])+Vw(o[r])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const r=o=>{(!o||Oa(o)===this._preview&&"transform"===o.propertyName)&&(this._preview?.removeEventListener("transitionend",r),i(),clearTimeout(s))},s=setTimeout(r,1.5*t);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let i;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),i=Yw(this._placeholderRef,this._document)):i=Uw(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(e,t,i){const r=t===this._rootElement?null:t,s=r?r.getBoundingClientRect():e,o=Ra(i)?i.targetTouches[0]:i,h=this._getViewportScrollPosition();return{x:s.left-e.left+(o.pageX-s.left-h.left),y:s.top-e.top+(o.pageY-s.top-h.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),i=Ra(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,r=i.pageX-t.left,s=i.pageY-t.top;if(this._ownerSVGElement){const o=this._ownerSVGElement.getScreenCTM();if(o){const h=this._ownerSVGElement.createSVGPoint();return h.x=r,h.y=s,h.matrixTransform(o.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:r}=this.constrainPosition?this.constrainPosition(e,this,this._initialClientRect,this._pickupPositionInElement):e;if("x"===this.lockAxis||"x"===t?r=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(i=this._pickupPositionOnPage.x),this._boundaryRect){const{x:s,y:o}=this._pickupPositionInElement,h=this._boundaryRect,{width:_,height:b}=this._getPreviewRect(),S=h.top+o,T=h.bottom-(b-o);i=Gw(i,h.left+s,h.right-(_-s)),r=Gw(r,S,T)}return{x:i,y:r}}_updatePointerDirectionDelta(e){const{x:t,y:i}=e,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-s.x),h=Math.abs(i-s.y);return o>this._config.pointerDirectionChangeThreshold&&(r.x=t>s.x?1:-1,s.x=t),h>this._config.pointerDirectionChangeThreshold&&(r.y=i>s.y?1:-1,s.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,so(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,Jc),e.removeEventListener("touchstart",this._pointerDown,Ww),e.removeEventListener("dragstart",this._nativeDragStart,Jc)}_applyRootElementTransform(e,t){const i=eu(e,t),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=Qc(i,this._initialTransform)}_applyPreviewTransform(e,t){const i=this._previewTemplate?.template?void 0:this._initialTransform,r=eu(e,t);this._preview.style.transform=Qc(r,i)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===i.width&&0===i.height)return;const s=r.left-i.left,o=i.right-r.right,h=r.top-i.top,_=i.bottom-r.bottom;r.width>i.width?(s>0&&(e+=s),o>0&&(e-=o)):e=0,r.height>i.height?(h>0&&(t+=h),_>0&&(t-=_)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:Ra(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const i=Oa(e);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Pa(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Ew(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const i=this._previewContainer||"global";if("parent"===i)return e;if("global"===i){const r=this._document;return t||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return on(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function eu(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function Gw(n,e,t){return Math.max(e,Math.min(t,n))}function Ra(n){return"t"===n.type[0]}function Yw(n,e){const t=n.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const i=e.createElement("div");return t.forEach(r=>i.appendChild(r)),i}function Xw(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=eu(e.left,e.top)}function tu(n,e,t){const i=ka(e,n.length-1),r=ka(t,n.length-1);if(i===r)return;const s=n[i],o=r<i?-1:1;for(let h=i;h!==r;h+=o)n[h]=n[h+o];n[r]=s}function ka(n,e){return Math.max(0,Math.min(e,n))}class _6{constructor(e,t){this._element=e,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,i,r){const s=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,i,r);if(-1===o&&s.length>0)return null;const h="horizontal"===this.orientation,_=s.findIndex(W=>W.drag===e),b=s[o],T=b.clientRect,P=_>o?1:-1,k=this._getItemOffsetPx(s[_].clientRect,T,P),B=this._getSiblingOffsetPx(_,s,P),H=s.slice();return tu(s,_,o),s.forEach((W,pe)=>{if(H[pe]===W)return;const ve=W.drag===e,ne=ve?k:B,Te=ve?e.getPlaceholderElement():W.drag.getRootElement();W.offset+=ne,h?(Te.style.transform=Qc(`translate3d(${Math.round(W.offset)}px, 0, 0)`,W.initialTransform),Pa(W.clientRect,0,ne)):(Te.style.transform=Qc(`translate3d(0, ${Math.round(W.offset)}px, 0)`,W.initialTransform),Pa(W.clientRect,ne,0))}),this._previousSwap.overlaps=Ip(T,t,i),this._previousSwap.drag=b.drag,this._previousSwap.delta=h?r.x:r.y,{previousIndex:_,currentIndex:o}}enter(e,t,i,r){const s=null==r||r<0?this._getItemIndexFromPointerPosition(e,t,i):r,o=this._activeDraggables,h=o.indexOf(e),_=e.getPlaceholderElement();let b=o[s];if(b===e&&(b=o[s+1]),!b&&(null==s||-1===s||s<o.length-1)&&this._shouldEnterAsFirstChild(t,i)&&(b=o[0]),h>-1&&o.splice(h,1),b&&!this._dragDropRegistry.isDragging(b)){const S=b.getRootElement();S.parentElement.insertBefore(_,S),o.splice(s,0,e)}else on(this._element).appendChild(_),o.push(e);_.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{const t=e.getRootElement();if(t){const i=this._itemPositions.find(r=>r.drag===e)?.initialTransform;t.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:i})=>{Pa(i,e,t)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){const e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const i=t.getVisibleElement();return{drag:t,offset:0,initialTransform:i.style.transform||"",clientRect:Ap(i)}}).sort((t,i)=>e?t.clientRect.left-i.clientRect.left:t.clientRect.top-i.clientRect.top)}_getItemOffsetPx(e,t,i){const r="horizontal"===this.orientation;let s=r?t.left-e.left:t.top-e.top;return-1===i&&(s+=r?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,i){const r="horizontal"===this.orientation,s=t[e].clientRect,o=t[e+-1*i];let h=s[r?"width":"height"]*i;if(o){const _=r?"left":"top",b=r?"right":"bottom";-1===i?h-=o.clientRect[_]-s[b]:h+=s[_]-o.clientRect[b]}return h}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,r="horizontal"===this.orientation;if(i[0].drag!==this._activeDraggables[0]){const o=i[i.length-1].clientRect;return r?e>=o.right:t>=o.bottom}{const o=i[0].clientRect;return r?e<=o.left:t<=o.top}}_getItemIndexFromPointerPosition(e,t,i,r){const s="horizontal"===this.orientation,o=this._itemPositions.findIndex(({drag:h,clientRect:_})=>h!==e&&((!r||h!==this._previousSwap.drag||!this._previousSwap.overlaps||(s?r.x:r.y)!==this._previousSwap.delta)&&(s?t>=Math.floor(_.left)&&t<Math.floor(_.right):i>=Math.floor(_.top)&&i<Math.floor(_.bottom))));return-1!==o&&this._sortPredicate(o,e)?o:-1}}const Kw=.05;class v6{constructor(e,t,i,r,s){this._dragDropRegistry=t,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new le,this.entered=new le,this.exited=new le,this.dropped=new le,this.sorted=new le,this.receivingStarted=new le,this.receivingStopped=new le,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=p.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new le,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function a6(n=0,e=Aa){return(!Dp(n)||n<0)&&(n=0),(!e||"function"!=typeof e.schedule)&&(e=Aa),new x(t=>(t.add(e.schedule(l6,n,{subscriber:t,counter:0,period:n})),t))}(0,wp).pipe(io(this._stopScrollTimers)).subscribe(()=>{const o=this._scrollNode,h=this.autoScrollStep;1===this._verticalScrollDirection?o.scrollBy(0,-h):2===this._verticalScrollDirection&&o.scrollBy(0,h),1===this._horizontalScrollDirection?o.scrollBy(-h,0):2===this._horizontalScrollDirection&&o.scrollBy(h,0)})},this.element=on(e),this._document=i,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new jw(i),this._sortStrategy=new _6(this.element,t),this._sortStrategy.withSortPredicate((o,h)=>this.sortPredicate(o,h,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,i,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,i,r,s,o,h,_={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:s,distance:o,dropPoint:h,event:_})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(t.filter(r=>r.isDragging()).every(r=>-1===e.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){const t=on(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,i,r){if(this.sortingDisabled||!this._clientRect||!Bw(this._clientRect,.05,t,i))return;const s=this._sortStrategy.sort(e,t,i,r);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let i,r=0,s=0;if(this._parentPositions.positions.forEach((o,h)=>{h===this._document||!o.clientRect||i||Bw(o.clientRect,.05,e,t)&&([r,s]=function y6(n,e,t,i){const r=Zw(e,i),s=Qw(e,t);let o=0,h=0;if(r){const _=n.scrollTop;1===r?_>0&&(o=1):n.scrollHeight-_>n.clientHeight&&(o=2)}if(s){const _=n.scrollLeft;1===s?_>0&&(h=1):n.scrollWidth-_>n.clientWidth&&(h=2)}return[o,h]}(h,o.clientRect,e,t),(r||s)&&(i=h))}),!r&&!s){const{width:o,height:h}=this._viewportRuler.getViewportSize(),_={width:o,height:h,top:0,right:o,bottom:h,left:0};r=Zw(_,t),s=Qw(_,e),i=window}i&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=i,(r||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=on(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=on(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;const e=on(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return null!=this._clientRect&&Ip(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,i){return this._siblings.find(r=>r._canReceive(e,t,i))}_canReceive(e,t,i){if(!this._clientRect||!Ip(this._clientRect,t,i)||!this.enterPredicate(e,this))return!1;const r=this._getShadowRoot().elementFromPoint(t,i);if(!r)return!1;const s=on(this.element);return r===s||s.contains(r)}_startReceiving(e,t){const i=this._activeSiblings;!i.has(e)&&t.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=Ew(on(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function Zw(n,e){const{top:t,bottom:i,height:r}=n,s=r*Kw;return e>=t-s&&e<=t+s?1:e>=i-s&&e<=i+s?2:0}function Qw(n,e){const{left:t,right:i,width:r}=n,s=r*Kw;return e>=t-s&&e<=t+s?1:e>=i-s&&e<=i+s?2:0}const nu=Gr({passive:!1,capture:!0});let C6=(()=>{class n{constructor(t,i){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new le,this.pointerUp=new le,this.scroll=new le,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=i}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,nu)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,nu)}startDragging(t,i){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const r=i.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:nu}),r||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:nu}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,o)=>{this._document.addEventListener(o,s.handler,s.options)})})}}stopDragging(t){const i=this._activeDragInstances.indexOf(t);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const i=[this.scroll];return t&&t!==this._document&&i.push(new x(r=>this._ngZone.runOutsideAngular(()=>{const o=h=>{this._activeDragInstances.length&&r.next(h)};return t.addEventListener("scroll",o,!0),()=>{t.removeEventListener("scroll",o,!0)}}))),rt(...i)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,i)=>{this._document.removeEventListener(i,t.handler,t.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(t){return new(t||n)(ye(ct),ye(Tt))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const b6={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Pp=(()=>{class n{constructor(t,i,r,s){this._document=t,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=s}createDrag(t,i=b6){return new m6(t,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new v6(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(t){return new(t||n)(ye(Tt),ye(ct),ye(PN),ye(C6))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Rp=new we("CDK_DRAG_PARENT"),kp=new we("CdkDropListGroup"),Jw=new we("CDK_DRAG_CONFIG");let D6=0;const eD=new we("CdkDropList");let iu=(()=>{class n{get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=gr(t)}constructor(t,i,r,s,o,h,_){this.element=t,this._changeDetectorRef=r,this._scrollDispatcher=s,this._dir=o,this._group=h,this._destroyed=new le,this.connectedTo=[],this.id="cdk-drop-list-"+D6++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new at,this.entered=new at,this.exited=new at,this.sorted=new at,this._unsortedItems=new Set,this._dropListRef=i.createDropList(t),this._dropListRef.data=this,_&&this._assignDefaults(_),this._dropListRef.enterPredicate=(b,S)=>this.enterPredicate(b.data,S.data),this._dropListRef.sortPredicate=(b,S,T)=>this.sortPredicate(b,S.data,T.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),h&&h._items.add(this)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,i)=>t._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=n._dropLists.indexOf(this);t>-1&&n._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(fa(this._dir.value),io(this._destroyed)).subscribe(i=>t.withDirection(i)),t.beforeStarted.subscribe(()=>{const i=bp(this.connectedTo).map(r=>"string"==typeof r?n._dropLists.find(o=>o.id===r):r);if(this._group&&this._group._items.forEach(r=>{-1===i.indexOf(r)&&i.push(r)}),!this._scrollableParentsResolved){const r=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(r),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=gr(this.sortingDisabled),t.autoScrollDisabled=gr(this.autoScrollDisabled),t.autoScrollStep=_w(this.autoScrollStep,2),t.connectedTo(i.filter(r=>r&&r!==this).map(r=>r._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),t.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),t.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),rt(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){const{lockAxis:i,draggingDisabled:r,sortingDisabled:s,listAutoScrollDisabled:o,listOrientation:h}=t;this.disabled=r??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=o??!1,this.orientation=h||"vertical",i&&(this.lockAxis=i)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}}return n._dropLists=[],n.\u0275fac=function(t){return new(t||n)(Q(Qt),Q(Pp),Q(zs),Q(IN),Q(Fw,8),Q(kp,12),Q(Jw,8))},n.\u0275dir=Ie({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,i){2&t&&(ni("id",i.id),ar("cdk-drop-list-disabled",i.disabled)("cdk-drop-list-dragging",i._dropListRef.isDragging())("cdk-drop-list-receiving",i._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[_t([{provide:kp,useValue:void 0},{provide:eD,useExisting:n}])]}),n})();const Fp=new we("CdkDragHandle"),tD=new we("CdkDragPlaceholder"),nD=new we("CdkDragPreview");let ru=(()=>{class n{get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=gr(t),this._dragRef.disabled=this._disabled}constructor(t,i,r,s,o,h,_,b,S,T,P){this.element=t,this.dropContainer=i,this._ngZone=s,this._viewContainerRef=o,this._dir=_,this._changeDetectorRef=S,this._selfHandle=T,this._parentDrag=P,this._destroyed=new le,this.started=new at,this.released=new at,this.ended=new at,this.entered=new at,this.exited=new at,this.dropped=new at,this.moved=new x(k=>{const B=this._dragRef.moved.pipe(ie(H=>({source:this,pointerPosition:H.pointerPosition,event:H.event,delta:H.delta,distance:H.distance}))).subscribe(k);return()=>{B.unsubscribe()}}),this._dragRef=b.createDrag(t,{dragStartThreshold:h&&null!=h.dragStartThreshold?h.dragStartThreshold:5,pointerDirectionChangeThreshold:h&&null!=h.pointerDirectionChangeThreshold?h.pointerDirectionChangeThreshold:5,zIndex:h?.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),h&&this._assignDefaults(h),i&&(this._dragRef._withDropContainer(i._dropListRef),i.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Yi(1),io(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const i=t.rootElementSelector,r=t.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=n._dragInstances.indexOf(this);t>-1&&n._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let i=t;this.rootElementSelector&&(i=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):on(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const i=this._dir,r=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof r&&r?r:_w(r),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),i&&t.withDirection(i.value)}}),t.beforeStarted.pipe(Yi(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let i=this.element.nativeElement.parentElement;for(;i;){if(i.classList.contains("cdk-drag")){t.withParent(n._dragInstances.find(r=>r.element.nativeElement===i)?._dragRef||null);break}i=i.parentElement}})}_handleEvents(t){t.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),t.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),t.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),t.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(t){const{lockAxis:i,dragStartDelay:r,constrainPosition:s,previewClass:o,boundaryElement:h,draggingDisabled:_,rootElementSelector:b,previewContainer:S}=t;this.disabled=_??!1,this.dragStartDelay=r||0,i&&(this.lockAxis=i),s&&(this.constrainPosition=s),o&&(this.previewClass=o),h&&(this.boundaryElement=h),b&&(this.rootElementSelector=b),S&&(this.previewContainer=S)}_setupHandlesListener(){this._handles.changes.pipe(fa(this._handles),Wt(t=>{const i=t.filter(r=>r._parentDrag===this).map(r=>r.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),Sn(t=>rt(...t.map(i=>i._stateChanges.pipe(fa(i))))),io(this._destroyed)).subscribe(t=>{const i=this._dragRef,r=t.element.nativeElement;t.disabled?i.disableHandle(r):i.enableHandle(r)})}}return n._dragInstances=[],n.\u0275fac=function(t){return new(t||n)(Q(Qt),Q(eD,12),Q(Tt),Q(ct),Q(Hn),Q(Jw,8),Q(Fw,8),Q(Pp),Q(zs),Q(Fp,10),Q(Rp,12))},n.\u0275dir=Ie({type:n,selectors:[["","cdkDrag",""]],contentQueries:function(t,i,r){if(1&t&&(na(r,nD,5),na(r,tD,5),na(r,Fp,5)),2&t){let s;Ui(s=Hi())&&(i._previewTemplate=s.first),Ui(s=Hi())&&(i._placeholderTemplate=s.first),Ui(s=Hi())&&(i._handles=s)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,i){2&t&&ar("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[_t([{provide:Rp,useExisting:n}]),yn]}),n})(),x6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xt({type:n}),n.\u0275inj=$t({providers:[Pp],imports:[RN]}),n})();const O6=new class I6 extends ui{}(class A6 extends Xc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(e,t,i):e.flush(this)}});class Yn{constructor(e,t,i){this.kind=e,this.value=t,this.error=i,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,i){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return i&&i()}}accept(e,t,i){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,i)}toObservable(){switch(this.kind){case"N":return Fe(this.value);case"E":return Ws(this.error);case"C":return Tc()}throw new Error("unexpected notification kind value")}static createNext(e){return typeof e<"u"?new Yn("N",e):Yn.undefinedValueNotification}static createError(e){return new Yn("E",void 0,e)}static createComplete(){return Yn.completeNotification}}Yn.completeNotification=new Yn("C"),Yn.undefinedValueNotification=new Yn("N",void 0);class R6{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new su(e,this.scheduler,this.delay))}}class su extends d{constructor(e,t,i=0){super(e),this.scheduler=t,this.delay=i}static dispatch(e){const{notification:t,destination:i}=e;t.observe(i),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(su.dispatch,this.delay,new k6(e,this.destination)))}_next(e){this.scheduleMessage(Yn.createNext(e))}_error(e){this.scheduleMessage(Yn.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(Yn.createComplete()),this.unsubscribe()}}class k6{constructor(e,t){this.notification=e,this.destination=t}}class F6 extends le{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new L6(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,i=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,s=i.length;let o;if(this.closed)throw new q;if(this.isStopped||this.hasError?o=p.EMPTY:(this.observers.push(e),o=new he(this,e)),r&&e.add(e=new su(e,r)),t)for(let h=0;h<s&&!e.closed;h++)e.next(i[h]);else for(let h=0;h<s&&!e.closed;h++)e.next(i[h].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||O6).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,i=this._windowTime,r=this._events,s=r.length;let o=0;for(;o<s&&!(e-r[o].time<i);)o++;return s>t&&(o=Math.max(o,s-t)),o>0&&r.splice(0,o),r}}class L6{constructor(e,t){this.time=e,this.value=t}}const B6=["container"],Lp=new we("LottieOptions");let Np=(()=>{class n{constructor(t,i){this.ngZone=t,this.options=i,this.player$=function j6(n,e){const t=n();return(t instanceof Promise?K(t).pipe(ie(r=>r.default||r)):Fe(t)).pipe(Wt(r=>r.useWebWorker(e)),function N6(n,e,t){let i;return i=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},r=>r.lift(function V6({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:i}){let r,o,s=0,h=!1,_=!1;return function(S){let T;s++,!r||h?(h=!1,r=new F6(n,e,i),T=r.subscribe(this),o=S.subscribe({next(P){r.next(P)},error(P){h=!0,r.error(P)},complete(){_=!0,o=void 0,r.complete()}}),_&&(o=void 0)):T=r.subscribe(this),this.add(()=>{s--,T.unsubscribe(),T=void 0,o&&!_&&t&&0===s&&(o.unsubscribe(),o=void 0,r=void 0)})}}(i))}({bufferSize:1,refCount:!0}))}(this.options.player,this.options.useWebWorker).pipe(function P6(n,e=0){return function(i){return i.lift(new R6(n,e))}}(wp))}loadAnimation(t){return this.player$.pipe(ie(i=>this.createAnimationItem(i,t)))}resolveOptions(t,i){return Object.assign({container:i,renderer:"svg",loop:!0,autoplay:!0},t)}createAnimationItem(t,i){return this.ngZone.runOutsideAngular(()=>t.loadAnimation(i))}}return n.\u0275fac=function(t){return new(t||n)(ye(ct),ye(Lp))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),U6=(()=>{class n{constructor(t,i,r){this.ngZone=t,this.platformId=i,this.animationLoader=r,this.options=null,this.containerClass=null,this.styles=null,this.animationCreated=this.getAnimationItem(),this.complete=this.awaitAnimationItemAndStartListening("complete"),this.loopComplete=this.awaitAnimationItemAndStartListening("loopComplete"),this.enterFrame=this.awaitAnimationItemAndStartListening("enterFrame"),this.segmentStart=this.awaitAnimationItemAndStartListening("segmentStart"),this.configReady=this.awaitAnimationItemAndStartListening("config_ready"),this.dataReady=this.awaitAnimationItemAndStartListening("data_ready"),this.domLoaded=this.awaitAnimationItemAndStartListening("DOMLoaded"),this.destroy=this.awaitAnimationItemAndStartListening("destroy"),this.error=this.awaitAnimationItemAndStartListening("error"),this.destroy$=new le,this.loadAnimation$=new le,this.animationItem$=new Wn(null),this.setupLoadAnimationListener()}ngOnDestroy(){this.destroy$.next(),this.destroyAnimation()}loadAnimation(t,i){this.ngZone.runOutsideAngular(()=>this.loadAnimation$.next([t,i]))}getAnimationItem(){return $f(()=>this.animationItem$).pipe(ci(t=>null!==t))}awaitAnimationItemAndStartListening(t){return this.getAnimationItem().pipe(Sn(i=>new x(r=>{this.ngZone.runOutsideAngular(()=>{i.addEventListener(t,s=>{this.ngZone.runOutsideAngular(()=>{r.next(s)})})})})))}setupLoadAnimationListener(){this.loadAnimation$.pipe(ci(([i])=>kC(this.platformId)&&void 0!==i.options)).pipe(Sn(([i,r])=>(this.destroyAnimation(),this.animationLoader.loadAnimation(this.animationLoader.resolveOptions(i.options.currentValue,r)))),io(this.destroy$)).subscribe(i=>{this.ngZone.run(()=>this.animationItem$.next(i))})}destroyAnimation(){const t=this.animationItem$.getValue();null!==t&&(t.destroy(),this.animationItem$.next(null))}}return n.\u0275fac=function(t){return new(t||n)(Q(ct),Q(sa),Q(Np))},n.\u0275dir=Ie({type:n,selectors:[["","lottie",""]],inputs:{options:"options",containerClass:"containerClass",styles:"styles"},outputs:{animationCreated:"animationCreated",complete:"complete",loopComplete:"loopComplete",enterFrame:"enterFrame",segmentStart:"segmentStart",configReady:"configReady",dataReady:"dataReady",domLoaded:"domLoaded",destroy:"destroy",error:"error"}}),n})(),mr=(()=>{class n extends U6{constructor(t,i,r){super(t,i,r),this.width=null,this.height=null,this.container=null}ngOnChanges(t){super.loadAnimation(t,this.container.nativeElement)}}return n.\u0275fac=function(t){return new(t||n)(Q(ct),Q(sa),Q(Np))},n.\u0275cmp=Yt({type:n,selectors:[["ng-lottie"]],viewQuery:function(t,i){if(1&t&&ta(B6,7),2&t){let r;Ui(r=Hi())&&(i.container=r.first)}},inputs:{width:"width",height:"height"},standalone:!0,features:[mt,yn,Vh],decls:2,vars:6,consts:[[3,"ngStyle","ngClass"],["container",""]],template:function(t,i){1&t&&Ne(0,"div",0,1),2&t&&(xh("width",i.width||"100%")("height",i.height||"100%"),Et("ngStyle",i.styles)("ngClass",i.containerClass))},dependencies:[Rf,EC,OC],encapsulation:2,changeDetection:0}),n})(),H6=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:Lp,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xt({type:n}),n.\u0275inj=$t({imports:[mr]}),n})();function ou(n,e){return new x(t=>{const i=n.length;if(0===i)return void t.complete();const r=new Array(i);let s=0,o=0;for(let h=0;h<i;h++){const _=K(n[h]);let b=!1;t.add(_.subscribe({next:S=>{b||(b=!0,o++),r[h]=S},error:S=>t.error(S),complete:()=>{s++,(s===i||!b)&&(o===i&&t.next(e?e.reduce((S,T,P)=>(S[T]=r[P],S),{}):r),t.complete())}}))}})}let iD=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(Q(Vi),Q(Qt))},n.\u0275dir=Ie({type:n}),n})(),Xr=(()=>{class n extends iD{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Zt(n)))(i||n)}}(),n.\u0275dir=Ie({type:n,features:[mt]}),n})();const Si=new we("NgValueAccessor"),G6={provide:Si,useExisting:bt(()=>_r),multi:!0},X6=new we("CompositionEventMode");let _r=(()=>{class n extends iD{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Y6(){const n=$i()?$i().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(Q(Vi),Q(Qt),Q(X6,8))},n.\u0275dir=Ie({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&$e("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[_t([G6]),mt]}),n})();const q6=!1,an=new we("NgValidators"),yr=new we("NgAsyncValidators");function pD(n){return null!=n}function gD(n){const e=Go(n)?K(n):n;if(q6&&!Dh(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new se(-1101,t)}return e}function mD(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function _D(n,e){return e.map(t=>t(n))}function vD(n){return n.map(e=>function Z6(n){return!n.validate}(e)?e:t=>e.validate(t))}function Vp(n){return null!=n?function yD(n){if(!n)return null;const e=n.filter(pD);return 0==e.length?null:function(t){return mD(_D(t,e))}}(vD(n)):null}function Bp(n){return null!=n?function CD(n){if(!n)return null;const e=n.filter(pD);return 0==e.length?null:function(t){return function $6(...n){if(1===n.length){const e=n[0];if(di(e))return ou(e,null);if(y(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return ou(t.map(i=>e[i]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return ou(n=1===n.length&&di(n[0])?n[0]:n,null).pipe(ie(t=>e(...t)))}return ou(n,null)}(_D(t,e).map(gD)).pipe(ie(mD))}}(vD(n)):null}function bD(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function jp(n){return n?Array.isArray(n)?n:[n]:[]}function lu(n,e){return Array.isArray(n)?n.includes(e):n===e}function SD(n,e){const t=jp(e);return jp(n).forEach(r=>{lu(t,r)||t.push(r)}),t}function ED(n,e){return jp(e).filter(t=>!lu(n,t))}class TD{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Vp(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Bp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class gn extends TD{get formDirective(){return null}get path(){return null}}class Cr extends TD{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class MD{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let qr=(()=>{class n extends MD{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(Q(Cr,2))},n.\u0275dir=Ie({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&ar("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[mt]}),n})(),Fa=(()=>{class n extends MD{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(Q(gn,10))},n.\u0275dir=Ie({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&ar("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[mt]}),n})();function xD(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const zp=!1,La="VALID",uu="INVALID",oo="PENDING",Na="DISABLED";function $p(n){return(du(n)?n.validators:n)||null}function Wp(n,e){return(du(e)?e.asyncValidators:n)||null}function du(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class OD{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===La}get invalid(){return this.status===uu}get pending(){return this.status==oo}get disabled(){return this.status===Na}get enabled(){return this.status!==Na}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(SD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(SD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ED(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ED(e,this._rawAsyncValidators))}hasValidator(e){return lu(this._rawValidators,e)}hasAsyncValidator(e){return lu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=oo,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Na,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=La,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===La||this.status===oo)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Na:La}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=oo,this._hasOwnPendingAsyncValidator=!0;const t=gD(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new at,this.statusChanges=new at}_calculateStatus(){return this._allControlsDisabled()?Na:this.errors?uu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(oo)?oo:this._anyControlsHaveStatus(uu)?uu:La}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){du(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function rV(n){return Array.isArray(n)?Vp(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function sV(n){return Array.isArray(n)?Bp(n):n||null}(this._rawAsyncValidators)}}class Gp extends OD{constructor(e,t,i){super($p(t),Wp(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function ID(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new se(1002,zp?function iV(n,e){return`Must supply a value for form control ${xD(n,e)}`}(e,r):"")})})(this,!0,e),Object.keys(e).forEach(i=>{(function AD(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new se(1e3,zp?function tV(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!i[t])throw new se(1001,zp?function nV(n,e){return`Cannot find form control ${xD(n,e)}`}(e,t):"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const ao=new we("CallSetDisabledState",{providedIn:"root",factory:()=>hu}),hu="always";function Va(n,e,t=hu){Yp(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function lV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&PD(n,e)})}(n,e),function uV(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function cV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&PD(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function aV(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function gu(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Yp(n,e){const t=function wD(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(bD(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function DD(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(bD(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();gu(e._rawValidators,r),gu(e._rawAsyncValidators,r)}function PD(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const gV={provide:gn,useExisting:bt(()=>Kr)},Ba=(()=>Promise.resolve())();let Kr=(()=>{class n extends gn{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new at,this.form=new Gp({},Vp(t),Bp(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ba.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Va(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ba.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ba.then(()=>{const i=this._findContainer(t.path),r=new Gp({});(function RD(n,e){Yp(n,e)})(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ba.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Ba.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function kD(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(Q(an,10),Q(yr,10),Q(ao,8))},n.\u0275dir=Ie({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&$e("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_t([gV]),mt]}),n})();function FD(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function LD(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ND=class extends OD{constructor(e=null,t,i){super($p(t),Wp(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),du(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=LD(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){FD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){FD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){LD(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},vV={provide:Cr,useExisting:bt(()=>br)},jD=(()=>Promise.resolve())();let br=(()=>{class n extends Cr{constructor(t,i,r,s,o,h){super(),this._changeDetectorRef=o,this.callSetDisabledState=h,this.control=new ND,this._registered=!1,this.update=new at,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function Kp(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===_r?t=s:function fV(n){return Object.getPrototypeOf(n.constructor)===Xr}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function qp(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Va(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){jD.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&function $s(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(i);jD.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function fu(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(Q(gn,9),Q(an,10),Q(yr,10),Q(Si,10),Q(zs,8),Q(ao,8))},n.\u0275dir=Ie({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_t([vV]),mt,yn]}),n})(),ja=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ie({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),HD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xt({type:n}),n.\u0275inj=$t({}),n})();const xV={provide:Si,useExisting:bt(()=>_u),multi:!0};function qD(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let _u=(()=>{class n extends Xr{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=qD(this._getOptionId(t),t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){const i=function AV(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i):t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Zt(n)))(i||n)}}(),n.\u0275dir=Ie({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,i){1&t&&$e("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[_t([xV]),mt]}),n})(),KD=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(qD(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(Q(Qt),Q(Vi),Q(_u,9))},n.\u0275dir=Ie({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const IV={provide:Si,useExisting:bt(()=>eg),multi:!0};function ZD(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let eg=(()=>{class n extends Xr{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let i;if(this.value=t,Array.isArray(t)){const r=t.map(s=>this._getOptionId(s));i=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{const r=[],s=i.selectedOptions;if(void 0!==s){const o=s;for(let h=0;h<o.length;h++){const b=this._getOptionValue(o[h].value);r.push(b)}}else{const o=i.options;for(let h=0;h<o.length;h++){const _=o[h];if(_.selected){const b=this._getOptionValue(_.value);r.push(b)}}}this.value=r,t(r)}}_registerOption(t){const i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){const i=function OV(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Zt(n)))(i||n)}}(),n.\u0275dir=Ie({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,i){1&t&&$e("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[_t([IV]),mt]}),n})(),QD=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(ZD(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(ZD(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(Q(Qt),Q(Vi),Q(eg,9))},n.\u0275dir=Ie({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),jV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xt({type:n}),n.\u0275inj=$t({imports:[HD]}),n})(),HV=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ao,useValue:t.callSetDisabledState??hu}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xt({type:n}),n.\u0275inj=$t({imports:[jV]}),n})();function zV(n,e){if(1&n&&(ee(0,"div",26)(1,"td"),Ne(2,"img",27),G(),ee(3,"td")(4,"h2"),de(5),G()(),ee(6,"div",28),Ne(7,"img",29),ee(8,"p",30),de(9),G()()()),2&n){const t=e.$implicit,i=e.index,r=Rv();ht(2),Et("src",r.data[i].img,bs),ht(3),Un(" ",r.data[i].text," "),ht(2),Et("src",t,bs),ht(2),Ih(i+1)}}const $V=["../../assets/a1/p2.jpg","../../assets/a1/p5.jpg","../../assets/a1/p1.jpg","../../assets/a1/p3.jpg","../../assets/a1/p4.jpg"];let WV=(()=>{class n{constructor(t){this.router=t,this.data=[{text:" \u0628\u0627\u0644\u0641\u0645 \u0623\u062a\u0630\u0648\u0642 \u0627\u0644\u0637\u0639\u0627\u0645",img:"../../assets/a1/r6.jpg"},{text:"\u0628\u0627\u0644\u0623\u0630\u0646 \u0627\u0633\u0645\u0639 \u0627\u0644\u0645\u0648\u0633\u064a\u0642\u0649",img:"../../assets/a1/r1.jpg"},{text:"\u0628\u0627\u0644\u064a\u062f\u064a\u0646 \u0627\u0644\u0645\u0633 \u0627\u0644\u0642\u0637\u0629",img:"../../assets/a1/r2.jpg"},{text:"\u0628\u0627\u0644\u0639\u064a\u0646\u064a\u0646 \u0623\u0631\u0649 \u0642\u0648\u0633 \u0642\u0632\u062d",img:"../../assets/a1/r3.jpg"},{text:"\u0628\u0627\u0644\u0623\u0646\u0641 \u0623\u0634\u0645 \u0627\u0644\u0648\u0631\u062f",img:"../../assets/a1/r4.jpg"}],this.images=["../../assets/a1/p1.jpg","../../assets/a1/p2.jpg","../../assets/a1/p3.jpg","../../assets/a1/p4.jpg","../../assets/a1/p5.jpg"],this.respWrang="https://assets7.lottiefiles.com/packages/lf20_pojzngga.json",this.respCorrect="https://assets2.lottiefiles.com/packages/lf20_cehxtohr.json",this.options={path:""},this.msg=""}ngOnInit(){}setDialog(t){console.log(t.value),this.testCorrect()?(this.options={path:this.respCorrect},this.msg="\u0623\u062d\u0633\u0646\u062a \u0627\u0644\u062c\u0648\u0628 \u0635\u062d\u064a\u062d "):(this.options={path:this.respWrang},this.msg="\u0627\u0644\u062c\u0648\u0627\u0628 \u062e\u0627\u0637\u0626")}returnBack(){this.router.navigate([""])}drop(t){if(t.previousContainer===t.container)tu(t.container.data,t.previousIndex,t.currentIndex);else{const i=[...t.container.data];i.splice(t.currentIndex,0,t.previousContainer.data[t.previousIndex]),t.previousContainer.data.splice(t.previousIndex,1),t.container.data=i}}testCorrect(){for(let t=0;t<5;t++)if(this.images[t]!=$V[t])return!1;return!0}}return n.\u0275fac=function(t){return new(t||n)(Q(At))},n.\u0275cmp=Yt({type:n,selectors:[["app-activite1"]],decls:40,vars:4,consts:[[1,"content"],[1,"sub-content"],["type","button",1,"btn","btn-outline-secondary","position-absolute","top-0","start-50","translate-middle-x",3,"click"],[1,"question"],[2,"border","2px solid rgb(255, 157, 0)","padding","0.5em","margin","0 0.5em","border-radius","0.5em"],[2,"color","rgb(255, 157, 0)"],["src","../../assets/icons/idea.png","alt","idea"],[1,"container"],["select","ngForm"],[1,"table",2,"background-color","rgba(245, 245, 220, 0.741)"],[2,"display","table","margin","1em auto","width","80vw"],["cdkDropList","",1,"example-list",3,"cdkDropListData","cdkDropListDropped"],["itemsList","cdkDropList"],["style","display: flex; justify-content: space-around;align-items: center;",4,"ngFor","ngForOf"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary","confirm",3,"click"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"lottie-animation","mt-10"],[3,"options"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[2,"display","flex","justify-content","space-around","align-items","center"],["alt","",1,"resp",3,"src"],["cdkDrag","",1,"card"],["alt","",1,"p1",3,"src"],[1,"number"]],template:function(t,i){if(1&t){const r=Wo();ee(0,"div",0)(1,"div",1)(2,"button",2),$e("click",function(){return i.returnBack()}),de(3,"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0631\u0626\u0633\u064a\u0629"),G(),ee(4,"h2"),de(5," \u0627\u0644\u062d\u0648\u0627\u0633 \u0648 \u0627\u0644\u0648\u0642\u0627\u064a\u0629 \u0645\u0646 \u0627\u0644\u0623\u0645\u0631\u0627\u0636 "),G(),ee(6,"div",3)(7,"h4")(8,"b",4),de(9," \u0623\u0648\u0638\u0641 "),G(),ee(10,"b",5),de(11," \u0623\u0643\u0645\u0644 "),G(),de(12," \u0627\u0644\u062c\u062f\u0648\u0644 \u0628\u0627\u0644\u0635\u0648\u0631 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629 "),G(),Ne(13,"img",6),G(),ee(14,"div",7)(15,"form",null,8)(17,"table",9)(18,"tbody",10)(19,"td")(20,"div",11,12),$e("cdkDropListDropped",function(o){return i.drop(o)}),$o(22,zV,10,4,"div",13),G()()()()(),ee(23,"button",14),$e("click",function(){Co(r);const o=Fr(16);return bo(i.setDialog(o))}),de(24,"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062c\u0648\u0627\u0628 "),G(),ee(25,"div",15)(26,"div",16)(27,"div",17)(28,"div",18)(29,"h2",19),de(30,"\u0627\u0644\u0646\u062a\u064a\u062c\u0629"),G(),Ne(31,"button",20),G(),ee(32,"div",21)(33,"div",22),Ne(34,"ng-lottie",23),G(),ee(35,"h2"),de(36),G()(),ee(37,"div",24)(38,"button",25),de(39," \u0623\u063a\u0644\u0642 "),G()()()()()()()()}2&t&&(ht(20),Et("cdkDropListData",i.images),ht(2),Et("ngForOf",i.images),ht(12),Et("options",i.options),ht(2),Un(" ",i.msg," "))},dependencies:[mr,_c,ja,Fa,Kr,iu,ru],styles:["*[_ngcontent-%COMP%]{font-family:title}.content[_ngcontent-%COMP%]{background-image:url(bg.ded0382502644826.jpg);background-position:center;background-attachment:fixed;background-size:cover}.sub-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}h2[_ngcontent-%COMP%]{font-family:title;margin:2em .5em;text-align:right}.question[_ngcontent-%COMP%]{display:flex;margin-left:auto;align-items:center}.list-img[_ngcontent-%COMP%]{display:flex;justify-content:space-around}h4[_ngcontent-%COMP%]{font-family:title}.p1[_ngcontent-%COMP%], .p2[_ngcontent-%COMP%], .p3[_ngcontent-%COMP%], .p4[_ngcontent-%COMP%], .p5[_ngcontent-%COMP%]{height:20vh}.number[_ngcontent-%COMP%]{font-size:18px;border:2px solid rgb(255,246,123);background-color:#fff78a;text-align:center;padding:.5em;border-radius:3em}.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center;width:20vw;height:30vh;background:#fff;border-radius:1em;box-shadow:0 0 .5em #666;margin:1em;padding:1em;transition:.5s}.resp[_ngcontent-%COMP%]{width:10vw}td[_ngcontent-%COMP%]{vertical-align:middle;display:table-cell}.confirm[_ngcontent-%COMP%]{display:grid;margin:2em auto}"]}),n})();const Ua=["\u0627\u0644\u062c\u0633\u0645","\u062d\u0645\u0627\u064a\u062a\u0647","\u0627\u0644\u0644\u0645\u0633","\u0627\u0644\u062d\u0631\u0627\u0631\u0629","\u0627\u0644\u062a\u0639\u0631\u0642"];let GV=(()=>{class n{constructor(t){this.router=t,this.respWrang="https://assets7.lottiefiles.com/packages/lf20_pojzngga.json",this.respCorrect="https://assets2.lottiefiles.com/packages/lf20_cehxtohr.json",this.options={path:""},this.msg=""}ngOnInit(){}setDialog(t){console.log(t.value),t.value[1]==Ua[0]&&t.value[2]==Ua[1]&&t.value[3]==Ua[2]&&t.value[4]==Ua[3]&&t.value[5]==Ua[4]?(this.options={path:this.respCorrect},this.msg="\u0623\u062d\u0633\u0646\u062a \u0627\u0644\u062c\u0648\u0628 \u0635\u062d\u064a\u062d "):(this.options={path:this.respWrang},this.msg="\u0627\u0644\u062c\u0648\u0627\u0628 \u062e\u0627\u0637\u0626")}returnBack(){this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(Q(At))},n.\u0275cmp=Yt({type:n,selectors:[["app-activite2"]],decls:45,vars:2,consts:[[1,"content"],[1,"sub-content"],["type","button",1,"btn","btn-outline-secondary","position-absolute","top-0","start-50","translate-middle-x",3,"click"],[1,"question"],[2,"border","2px solid rgb(251, 47, 200)","padding","0.5em","margin","0 0.5em","border-radius","0.5em"],[2,"color","rgb(251, 47, 200)"],["src","../../assets/icons/pencil.png","alt","idea"],[2,"width","50vw","display","grid","margin","1em auto","border","2px solid burlywood","padding","1em 2em","border-radius","1em"],["select","ngForm"],[2,"line-height","2em","text-align","right","font-size","20 px","font-weight","600"],["ngModel","","name","1","type","text","placeholder","..................................................."],["ngModel","","name","2","type","text","placeholder","..................................................."],["ngModel","","name","3","type","text","placeholder","..................................................."],["ngModel","","name","4","type","text","placeholder","..................................................."],["ngModel","","name","5","type","text","placeholder","..................................................."],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary","confirm",3,"click"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"lottie-animation","mt-10"],[3,"options"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"]],template:function(t,i){if(1&t){const r=Wo();ee(0,"div",0)(1,"div",1)(2,"button",2),$e("click",function(){return i.returnBack()}),de(3,"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0631\u0626\u0633\u064a\u0629"),G(),ee(4,"h2"),de(5," \u0627\u0644\u062d\u0648\u0627\u0633 \u0648 \u0627\u0644\u0648\u0642\u0627\u064a\u0629 \u0645\u0646 \u0627\u0644\u0623\u0645\u0631\u0627\u0636 "),G(),ee(6,"div",3)(7,"h2")(8,"b",4),de(9," \u0623\u0637\u0628\u0642 "),G(),ee(10,"b",5),de(11," \u0623\u0643\u0645\u0644 "),G(),de(12," \u0627\u0644\u0641\u0631\u0627\u063a\u0627\u062a \u0628\u0645\u0627 \u064a\u0646\u0627\u0633\u0628: \u0627\u0644\u062d\u0631\u0627\u0631\u0629/ \u062d\u0645\u0627\u064a\u062a\u0647/ \u0627\u0644\u062a\u0639\u0631\u0642 /\u0627\u0644\u062c\u0633\u0645/\u0627\u0644\u0644\u0645\u0633 "),G(),Ne(13,"img",6),G(),ee(14,"form",7,8)(16,"p",9),de(17," \u0627\u0644\u062c\u0644\u062f \u0647\u0648 \u0627\u0644\u0639\u0636\u0648 \u0627\u0644\u0630\u064a \u064a\u063a\u0637\u064a \u0643\u0627\u0645\u0644"),Ne(18,"input",10),de(19,"\u0648 \u064a\u0642\u0648\u0645 \u0628"),Ne(20,"input",11),de(21," \u0645\u0646 \u0627\u0644\u062c\u0631\u0627\u062b\u064a\u0645 \u0648 \u0627\u0644\u063a\u0628\u0627\u0631 \u0627\u0644\u0645\u062a\u0637\u0627\u064a\u0631 \u0641\u064a \u0627\u0644\u0647\u0648\u0627\u0621 \u0648 \u0647\u0648 \u0627\u0644\u0645\u0633\u0624\u0648\u0644 \u0639\u0644\u0649 \u062d\u0627\u0633\u0629 "),Ne(22,"input",12),de(23," \u0648 \u064a\u0633\u0627\u0639\u062f \u0639\u0644\u0649 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0629 \u0639\u0644\u0649 \u062f\u0631\u062c\u0629 "),Ne(24,"input",13),de(25," \u0627\u0644\u062f\u0627\u062e\u0644\u064a\u0629 \u0644\u0644\u062c\u0633\u0645 \u0648 \u0625\u062e\u0631\u0627\u062c \u0627\u0644\u0641\u0636\u0644\u0627\u062a \u0648 \u0627\u0644\u0633\u0645\u0648\u0645 \u0639\u0628\u0631 \u0639\u0645\u0644\u064a\u0629 "),Ne(26,"br")(27,"input",14),G()(),ee(28,"button",15),$e("click",function(){Co(r);const o=Fr(15);return bo(i.setDialog(o))}),de(29,"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062c\u0648\u0627\u0628 "),G(),ee(30,"div",16)(31,"div",17)(32,"div",18)(33,"div",19)(34,"h2",20),de(35,"\u0627\u0644\u0646\u062a\u064a\u062c\u0629"),G(),Ne(36,"button",21),G(),ee(37,"div",22)(38,"div",23),Ne(39,"ng-lottie",24),G(),ee(40,"h2"),de(41),G()(),ee(42,"div",25)(43,"button",26),de(44," \u0623\u063a\u0644\u0642 "),G()()()()()()()}2&t&&(ht(39),Et("options",i.options),ht(2),Un(" ",i.msg," "))},dependencies:[mr,ja,_r,qr,Fa,br,Kr],styles:[".content[_ngcontent-%COMP%]{background-image:url(bg.ded0382502644826.jpg);background-position:center;background-attachment:fixed;background-size:cover;height:100vh}.sub-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}h1[_ngcontent-%COMP%]{text-align:right;padding:1em;border-radius:3em;float:right}h2[_ngcontent-%COMP%]{margin:2em .5em;text-align:right}.question[_ngcontent-%COMP%]{display:flex;margin-left:auto;align-items:center}.list-img[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.p1[_ngcontent-%COMP%], .p2[_ngcontent-%COMP%], .p3[_ngcontent-%COMP%], .p4[_ngcontent-%COMP%], .p5[_ngcontent-%COMP%]{height:20vh}.number[_ngcontent-%COMP%]{font-size:18px;border:2px solid rgb(255,246,123);background-color:#fff78a;text-align:center;padding:.5em;border-radius:3em}.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center;width:20vw;height:30vh;background:#fff;border-radius:1em;box-shadow:0 0 .5em #666;margin:1em;padding:1em;transition:.5s}.resp[_ngcontent-%COMP%]{width:10vw}td[_ngcontent-%COMP%]{vertical-align:middle;display:table-cell}.confirm[_ngcontent-%COMP%]{display:grid;margin:2em auto}input[_ngcontent-%COMP%]{border:1px solid rgb(255,217,0);margin:.5em;text-align:right}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-family:title}"]}),n})();let YV=(()=>{class n{constructor(t){this.router=t,this.respWrang="https://assets7.lottiefiles.com/packages/lf20_pojzngga.json",this.respCorrect="https://assets2.lottiefiles.com/packages/lf20_cehxtohr.json",this.options={path:""},this.msg=""}ngOnInit(){}setDialog(t){console.log(t.value),"1"==t.value[1]&&"1"==t.value[2]&&"2"==t.value[3]&&"1"==t.value[4]&&"2"==t.value[5]?(this.options={path:this.respCorrect},this.msg="\u0623\u062d\u0633\u0646\u062a \u0627\u0644\u062c\u0648\u0628 \u0635\u062d\u064a\u062d "):(this.options={path:this.respWrang},this.msg="\u0627\u0644\u062c\u0648\u0627\u0628 \u062e\u0627\u0637\u0626")}returnBack(){this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(Q(At))},n.\u0275cmp=Yt({type:n,selectors:[["app-activite3"]],decls:71,vars:2,consts:[[1,"content"],[1,"sub-content"],["type","button",1,"btn","btn-outline-secondary","position-absolute","top-0","start-50","translate-middle-x",3,"click"],[1,"question"],[2,"border","2px solid rgb(20, 184, 255)","padding","0.5em","margin","0 0.5em","border-radius","0.5em"],[2,"color","rgb(20, 184, 255)"],["src","../../assets/icons/choice.png","alt","idea"],[1,"container"],["select","ngForm"],[1,"list-img"],[1,"card"],["src","../../assets/a3/1.jpg","alt","",1,"p1"],["ngModel","","name","1","aria-label",".form-select-lg example",1,"form-select","form-select-lg","mb-3"],["value","1",2,"text-align","right"],["value","2",2,"text-align","right"],["src","../../assets/a3/2.jpg","alt","",1,"p2"],["ngModel","","name","2","aria-label",".form-select-lg example",1,"form-select","form-select-lg","mb-3"],["src","../../assets/a3/3.jpg","alt","",1,"p3"],["ngModel","","name","3","aria-label",".form-select-lg example",1,"form-select","form-select-lg","mb-3"],["src","../../assets/a3/4.jpg","alt","",1,"p4"],["ngModel","","name","4","aria-label",".form-select-lg example",1,"form-select","form-select-lg","mb-3"],["src","../../assets/a3/5.jpg","alt","",1,"p5"],["ngModel","","name","5","aria-label",".form-select-lg example",1,"form-select","form-select-lg","mb-3"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary","confirm",3,"click"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"lottie-animation","mt-10"],[3,"options"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"]],template:function(t,i){if(1&t){const r=Wo();ee(0,"div",0)(1,"div",1)(2,"button",2),$e("click",function(){return i.returnBack()}),de(3,"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0631\u0626\u0633\u064a\u0629"),G(),ee(4,"h2"),de(5," \u0627\u0644\u062d\u0648\u0627\u0633 \u0648 \u0627\u0644\u0648\u0642\u0627\u064a\u0629 \u0645\u0646 \u0627\u0644\u0623\u0645\u0631\u0627\u0636"),G(),ee(6,"div",3)(7,"h4"),de(8," (\u2713) \u0623\u0648 (X) "),ee(9,"b",4),de(10," \u0623\u0648\u0638\u0641 "),G(),ee(11,"b",5),de(12," \u0623\u0636\u0639 "),G(),de(13," \u0627\u0644\u0639\u0644\u0627\u0645\u0629 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629 \u0641\u064a \u0627\u0644\u062e\u0627\u0646\u0629 \u0627\u0644\u0645\u0646\u0627\u0633\u0628 "),G(),Ne(14,"img",6),G(),ee(15,"div",7)(16,"form",null,8)(18,"div",9)(19,"div",10),Ne(20,"img",11),ee(21,"select",12)(22,"option",13),de(23,"(X) \u0627\u0644\u0639\u0644\u0627\u0645\u0629"),G(),ee(24,"option",14),de(25,"(\u2713) \u0627\u0644\u0639\u0644\u0627\u0645\u0629"),G()()(),ee(26,"div",10),Ne(27,"img",15),ee(28,"select",16)(29,"option",13),de(30,"(X) \u0627\u0644\u0639\u0644\u0627\u0645\u0629"),G(),ee(31,"option",14),de(32,"(\u2713) \u0627\u0644\u0639\u0644\u0627\u0645\u0629"),G()()(),ee(33,"div",10),Ne(34,"img",17),ee(35,"select",18)(36,"option",13),de(37,"(X) \u0627\u0644\u0639\u0644\u0627\u0645\u0629"),G(),ee(38,"option",14),de(39,"(\u2713) \u0627\u0644\u0639\u0644\u0627\u0645\u0629"),G()()(),ee(40,"div",10),Ne(41,"img",19),ee(42,"select",20)(43,"option",13),de(44,"(X) \u0627\u0644\u0639\u0644\u0627\u0645\u0629"),G(),ee(45,"option",14),de(46,"(\u2713) \u0627\u0644\u0639\u0644\u0627\u0645\u0629"),G()()(),ee(47,"div",10),Ne(48,"img",21),ee(49,"select",22)(50,"option",13),de(51,"(X) \u0627\u0644\u0639\u0644\u0627\u0645\u0629"),G(),ee(52,"option",14),de(53,"(\u2713) \u0627\u0644\u0639\u0644\u0627\u0645\u0629"),G()()()()(),ee(54,"button",23),$e("click",function(){Co(r);const o=Fr(17);return bo(i.setDialog(o))}),de(55,"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062c\u0648\u0627\u0628 "),G(),ee(56,"div",24)(57,"div",25)(58,"div",26)(59,"div",27)(60,"h2",28),de(61,"\u0627\u0644\u0646\u062a\u064a\u062c\u0629"),G(),Ne(62,"button",29),G(),ee(63,"div",30)(64,"div",31),Ne(65,"ng-lottie",32),G(),ee(66,"h2"),de(67),G()(),ee(68,"div",33)(69,"button",34),de(70," \u0623\u063a\u0644\u0642 "),G()()()()()()()()}2&t&&(ht(65),Et("options",i.options),ht(2),Un(" ",i.msg," "))},dependencies:[mr,ja,KD,QD,_u,qr,Fa,br,Kr],styles:[".content[_ngcontent-%COMP%]{background-image:url(bg.ded0382502644826.jpg);background-position:center;background-attachment:fixed;background-size:cover;height:100vh}.sub-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}h1[_ngcontent-%COMP%]{text-align:right;padding:1em;border-radius:3em;float:right}h2[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{font-family:title}h2[_ngcontent-%COMP%]{margin:2em .5em;text-align:right}.question[_ngcontent-%COMP%]{display:flex;margin-left:auto;align-items:center}.list-img[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.p1[_ngcontent-%COMP%], .p2[_ngcontent-%COMP%], .p3[_ngcontent-%COMP%], .p4[_ngcontent-%COMP%], .p5[_ngcontent-%COMP%]{height:20vh}.number[_ngcontent-%COMP%]{font-size:18px;border:2px solid rgb(255,246,123);background-color:#fff78a;text-align:center;padding:.5em;border-radius:3em}.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center;width:20vw;height:30vh;background:#fff;border-radius:1em;box-shadow:0 0 .5em #666;margin:1em;padding:1em;transition:.5s}.resp[_ngcontent-%COMP%]{width:10vw}td[_ngcontent-%COMP%]{vertical-align:middle;display:table-cell}.confirm[_ngcontent-%COMP%]{display:grid;margin:2em auto}"]}),n})();var wr=Mi(621);const XV=["canvas"];let qV=(()=>{class n{constructor(t){this.router=t,this.canvasRef={},this.options={path:""},this.brushColor="black",this.msg=""}ngOnInit(){}ngAfterViewInit(){this.canvas=new wr.fabric.Canvas(this.canvasRef.nativeElement);const t=[{url:"../../assets/4.png",left:this.canvas.getWidth()/2,top:this.canvas.getHeight()/2}];for(const i of t)wr.fabric.Image.fromURL(i.url,r=>{r.set({left:i.left,top:i.top,originX:"center",originY:"center",scaleX:.5,scaleY:.5}),this.canvas.add(r),this.canvas.renderAll()});this.canvas.isDrawingMode=!0,this.canvas.freeDrawingBrush=new wr.fabric.PencilBrush(this.canvas),this.canvas.freeDrawingBrush.color="#00000099",this.canvas.freeDrawingBrush.width=15,this.canvas.on("mouse:move",i=>{this.canvas.isDrawingMode&&this.canvas.getPointer(i.e)})}onBrushColorChange(t){this.canvas.freeDrawingBrush.color=t.target.value,this.canvas.freeDrawingBrush.color+="99"}onBrushWidthChange(t){this.canvas.freeDrawingBrush.width=t.target.value}returnBack(){this.router.navigate([""])}onRemoveLastDraw(){const t=this.canvas.getObjects().pop();t&&this.canvas.remove(t)}}return n.\u0275fac=function(t){return new(t||n)(Q(At))},n.\u0275cmp=Yt({type:n,selectors:[["app-activite4"]],viewQuery:function(t,i){if(1&t&&ta(XV,7),2&t){let r;Ui(r=Hi())&&(i.canvasRef=r.first)}},decls:26,vars:1,consts:[[1,"content"],[1,"sub-content"],["type","button",1,"btn","btn-outline-secondary","position-absolute","top-0","start-50","translate-middle-x",3,"click"],[1,"question"],[2,"font-family","title"],[2,"border","2px solid rgb(255, 157, 0)","padding","0.5em","margin","0 0.5em","border-radius","0.5em"],["src","../../assets/icons/pencil.png","alt","idea"],[1,"options"],["type","button",1,"btn","btn-secondary",3,"click"],[2,"display","flex","justify-content","center"],["type","color",3,"ngModel","ngModelChange","change"],[2,"text-align","right"],[1,"canvaContainer",2,"background-color","beige","border-radius","1em"],["width","770","height","350",2,"z-index","1000","box-shadow","0.2em 0.2em 0.3em rgb(77, 77, 77)","border-radius","1em","display","block","margin","auto"],["canvas",""]],template:function(t,i){1&t&&(ee(0,"div",0)(1,"div",1)(2,"button",2),$e("click",function(){return i.returnBack()}),de(3,"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0631\u0626\u0633\u064a\u0629"),G(),ee(4,"h2"),de(5," \u0627\u0644\u062d\u0648\u0627\u0633 \u0648 \u0627\u0644\u0648\u0642\u0627\u064a\u0629 \u0645\u0646 \u0627\u0644\u0623\u0645\u0631\u0627\u0636"),G(),ee(6,"div",3)(7,"h3",4),de(8," : "),ee(9,"b",5),de(10," \u0623\u0644\u0648\u0646 "),G(),de(11," \u0627\u0644\u0625\u062c\u0627\u0628\u0629 \u0627\u0644\u0635\u062d\u064a\u062d\u0629 "),G(),Ne(12,"br")(13,"img",6),G(),ee(14,"h4"),de(15," \u0643\u064a\u0641 \u064a\u0645\u0643\u0646 \u062d\u0645\u0627\u064a\u0629 \u062d\u0648\u0627\u0633\u064a \u061f "),G(),ee(16,"div",7)(17,"button",8),$e("click",function(){return i.onRemoveLastDraw()}),de(18," \u0627\u0644\u0631\u062c\u0648\u0639 \u0644\u0644\u0648\u0631\u0627\u0621 "),G(),ee(19,"div",9)(20,"input",10),$e("ngModelChange",function(s){return i.brushColor=s})("change",function(s){return i.onBrushColorChange(s)}),G(),ee(21,"p",11),de(22," \u0627\u0636\u063a\u0637 \u0647\u0646\u0627 \u0644\u062a\u063a\u064a\u064a\u0631 \u0644\u0648\u0646 "),G()()(),ee(23,"div",12),Ne(24,"canvas",13,14),G()()()),2&t&&(ht(20),Et("ngModel",i.brushColor))},dependencies:[_r,qr,br],styles:["*[_ngcontent-%COMP%]{font-family:title}.content[_ngcontent-%COMP%]{background-image:url(bg.ded0382502644826.jpg);background-position:center;background-attachment:fixed;background-size:cover}.sub-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}h1[_ngcontent-%COMP%]{text-align:right;padding:1em;border-radius:3em;float:right}h2[_ngcontent-%COMP%]{margin:2em .5em;text-align:right}.question[_ngcontent-%COMP%]{display:flex;margin-left:auto;align-items:center}.list-img[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around}.p1[_ngcontent-%COMP%], .p2[_ngcontent-%COMP%], .p3[_ngcontent-%COMP%], .p4[_ngcontent-%COMP%], .p5[_ngcontent-%COMP%]{height:20vh}.number[_ngcontent-%COMP%]{font-size:18px;border:2px solid rgb(255,246,123);background-color:#fff78a;text-align:center;padding:.5em;border-radius:3em}.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center;width:20vw;height:30vh;background:#fff;border-radius:1em;box-shadow:0 0 .5em #666;margin:1em;padding:1em;transition:.5s}.resp[_ngcontent-%COMP%]{width:10vw}td[_ngcontent-%COMP%]{vertical-align:middle;display:table-cell}.confirm[_ngcontent-%COMP%]{display:grid;margin:2em auto}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{font-family:title;text-align:right}mat-card[_ngcontent-%COMP%]{width:50vw;background-color:#faebd7;margin:1.5em auto}mat-card-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between}img[_ngcontent-%COMP%]{display:grid;margin:1em auto;height:12vh}td[_ngcontent-%COMP%]{display:flex}tbody[_ngcontent-%COMP%]{display:table;margin:1em auto}tr[_ngcontent-%COMP%]{display:block}.canvaContainer[_ngcontent-%COMP%]{display:grid;margin:5vh auto}.options[_ngcontent-%COMP%]{display:flex;justify-content:space-around}"]}),n})();const lo={1:"\u0633\u0639\u0627\u0644",2:"\u0627\u0644\u0645 \u0641\u064a \u0627\u0644\u062d\u0644\u0642",3:"\u0627\u0631\u062a\u0641\u0627\u0639 \u062f\u0631\u062c\u0629 \u0627\u0644\u062d\u0631\u0627\u0631\u0629",4:"\u0633\u064a\u0644\u0627\u0646 \u0627\u0644\u0623\u0646\u0641",5:"\u0635\u062f\u0627\u0639"};let KV=(()=>{class n{constructor(t){this.router=t,this.respWrang="https://assets7.lottiefiles.com/packages/lf20_pojzngga.json",this.respCorrect="https://assets2.lottiefiles.com/packages/lf20_cehxtohr.json",this.options={path:""},this.msg=""}ngOnInit(){}setDialog(t){console.log(t.value),console.log(lo),t.value[1]==lo[1]&&t.value[2]==lo[2]&&t.value[3]==lo[3]&&t.value[4]==lo[4]&&t.value[5]==lo[5]?(this.options={path:this.respCorrect},this.msg="\u0623\u062d\u0633\u0646\u062a \u0627\u0644\u062c\u0648\u0628 \u0635\u062d\u064a\u062d "):(this.options={path:this.respWrang},this.msg="\u0627\u0644\u062c\u0648\u0627\u0628 \u062e\u0627\u0637\u0626")}returnBack(){this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(Q(At))},n.\u0275cmp=Yt({type:n,selectors:[["app-activite5"]],decls:51,vars:2,consts:[[1,"content"],[1,"sub-content"],["type","button",1,"btn","btn-outline-secondary","position-absolute","top-0","start-50","translate-middle-x",3,"click"],["f",""],[1,"question"],[2,"font-family","title"],[2,"border","2px solid rgb(251, 47, 200)","padding","0.5em","margin","0 0.5em","border-radius","0.5em"],[2,"color","rgb(251, 47, 200)"],["src","../../assets/icons/pencil.png","alt","idea"],[1,"container"],["select","ngForm"],[1,"list-img"],[1,"card"],["src","../../assets/a5/1.jpg","alt","",1,"p1"],["type","text","ngModel","","name","1","placeholder",".............",1,"input-group-text","text"],["src","../../assets/a5/2.jpg","alt","",1,"p2"],["type","text","ngModel","","name","2","placeholder",".............",1,"input-group-text","text"],["src","../../assets/a5/3.jpg","alt","",1,"p3"],["type","text","ngModel","","name","3","placeholder",".............",1,"input-group-text","text"],["src","../../assets/a5/4.jpg","alt","",1,"p4"],["type","text","ngModel","","name","4","placeholder",".............",1,"input-group-text","text"],["src","../../assets/a5/5.jpg","alt","",1,"p5"],["type","text","ngModel","","name","5","placeholder",".............",1,"input-group-text","text"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary","confirm",3,"click"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"lottie-animation","mt-10"],[3,"options"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"]],template:function(t,i){if(1&t){const r=Wo();ee(0,"div",0)(1,"div",1)(2,"button",2),$e("click",function(){return i.returnBack()}),de(3,"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0631\u0626\u0633\u064a\u0629"),G(),ee(4,"h2",3),de(5," \u0627\u0644\u062d\u0648\u0627\u0633 \u0648 \u0627\u0644\u0648\u0642\u0627\u064a\u0629 \u0645\u0646 \u0627\u0644\u0623\u0645\u0631\u0627\u0636"),G(),ee(6,"div",4)(7,"h3",5),de(8," . "),ee(9,"b",6),de(10," \u0623\u0648\u0638\u0641 "),G(),ee(11,"b",7),de(12," \u0623\u0636\u0639 "),G(),de(13," \u0623\u0645\u0627\u0645 \u0643\u0644 \u0635\u0648\u0631\u0629 \u0627\u0644\u0639\u0628\u0627\u0631\u0629 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629 \u0644\u0647\u0627 : \u0633\u0639\u0627\u0644/\u0635\u062f\u0627\u0639/\u0627\u0644\u0645 \u0641\u064a \u0627\u0644\u062d\u0644\u0642/\u0627\u0631\u062a\u0641\u0627\u0639 \u062f\u0631\u062c\u0629 \u0627\u0644\u062d\u0631\u0627\u0631\u0629/\u0633\u064a\u0644\u0627\u0646 \u0627\u0644\u0623\u0646\u0641 "),G(),Ne(14,"img",8),G(),ee(15,"div",9)(16,"form",null,10)(18,"div",11)(19,"div",12),Ne(20,"img",13)(21,"input",14),G(),ee(22,"div",12),Ne(23,"img",15)(24,"input",16),G(),ee(25,"div",12),Ne(26,"img",17)(27,"input",18),G(),ee(28,"div",12),Ne(29,"img",19)(30,"input",20),G(),ee(31,"div",12),Ne(32,"img",21)(33,"input",22),G()()(),ee(34,"button",23),$e("click",function(){Co(r);const o=Fr(17);return bo(i.setDialog(o))}),de(35,"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062c\u0648\u0627\u0628 "),G(),ee(36,"div",24)(37,"div",25)(38,"div",26)(39,"div",27)(40,"h2",28),de(41,"\u0627\u0644\u0646\u062a\u064a\u062c\u0629"),G(),Ne(42,"button",29),G(),ee(43,"div",30)(44,"div",31),Ne(45,"ng-lottie",32),G(),ee(46,"h2"),de(47),G()(),ee(48,"div",33)(49,"button",34),de(50," \u0623\u063a\u0644\u0642 "),G()()()()()()()()}2&t&&(ht(45),Et("options",i.options),ht(2),Un(" ",i.msg," "))},dependencies:[mr,ja,_r,qr,Fa,br,Kr],styles:["*[_ngcontent-%COMP%]{font-family:title}.content[_ngcontent-%COMP%]{background-image:url(bg.ded0382502644826.jpg);background-position:center;background-attachment:fixed;background-size:cover}.sub-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}h1[_ngcontent-%COMP%]{text-align:right;padding:1em;border-radius:3em;float:right}h2[_ngcontent-%COMP%]{margin:2em .5em;text-align:right}.question[_ngcontent-%COMP%]{display:flex;margin-left:auto;align-items:center}.list-img[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around}.p1[_ngcontent-%COMP%], .p2[_ngcontent-%COMP%], .p3[_ngcontent-%COMP%], .p4[_ngcontent-%COMP%], .p5[_ngcontent-%COMP%]{height:20vh}.number[_ngcontent-%COMP%]{font-size:18px;border:2px solid rgb(255,246,123);background-color:#fff78a;text-align:center;padding:.5em;border-radius:3em}.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center;width:20vw;height:30vh;background:#fff;border-radius:1em;box-shadow:0 0 .5em #666;margin:1em;padding:1em;transition:.5s}.resp[_ngcontent-%COMP%]{width:10vw}td[_ngcontent-%COMP%]{vertical-align:middle;display:table-cell}.confirm[_ngcontent-%COMP%]{display:grid;margin:2em auto}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-family:title}"]}),n})();const ZV=["canvas"];let QV=(()=>{class n{constructor(t){this.router=t,this.canvasRef={},this.options={path:""},this.brushColor="black",this.msg=""}ngOnInit(){}ngAfterViewInit(){this.canvas=new wr.fabric.Canvas(this.canvasRef.nativeElement);const t=[{url:"../../assets/a7/1.jpg",left:150,top:225},{url:"../../assets/a7/2.jpg",left:400,top:225},{url:"../../assets/a7/3.jpg",left:650,top:225},{url:"../../assets/a7/4.jpg",left:920,top:225},{url:"../../assets/a7/5.jpg",left:this.canvas.getWidth()/2,top:75+this.canvas.getHeight()/2+50}];for(const i of t)wr.fabric.Image.fromURL(i.url,r=>{r.set({left:i.left,top:i.top,originX:"center",originY:"center"}),this.canvas.add(r),this.canvas.renderAll()});this.canvas.isDrawingMode=!0,this.canvas.freeDrawingBrush=new wr.fabric.PencilBrush(this.canvas),this.canvas.freeDrawingBrush.color="#000000aa",this.canvas.freeDrawingBrush.width=15,this.canvas.on("mouse:move",i=>{this.canvas.isDrawingMode&&this.canvas.getPointer(i.e)})}onBrushColorChange(t){this.canvas.freeDrawingBrush.color=t.target.value,this.canvas.freeDrawingBrush.color+="aa"}onBrushWidthChange(t){this.canvas.freeDrawingBrush.width=t.target.value}setDialog(){this.options={path:"https://assets2.lottiefiles.com/datafiles/d2PQkkDcP77TPTeBzAx7iQMu6zJOARPXuafCB19k/success.json"},this.msg="\u0623\u062d\u0633\u0646\u062a \u0627\u0644\u062c\u0648\u0628 \u0635\u062d\u064a\u062d "}returnBack(){this.router.navigate([""])}onRemoveLastDraw(){const t=this.canvas.getObjects().pop();t&&this.canvas.remove(t)}}return n.\u0275fac=function(t){return new(t||n)(Q(At))},n.\u0275cmp=Yt({type:n,selectors:[["app-activite6"]],viewQuery:function(t,i){if(1&t&&ta(ZV,7),2&t){let r;Ui(r=Hi())&&(i.canvasRef=r.first)}},decls:29,vars:1,consts:[[1,"content"],[1,"sub-content"],["type","button",1,"btn","btn-outline-secondary","position-absolute","top-0","start-50","translate-middle-x",3,"click"],[1,"question"],[2,"font-family","title"],[2,"border","2px solid rgb(255, 157, 0)","padding","0.5em","margin","0 0.5em","border-radius","0.5em"],[2,"color","rgb(247, 46, 46)"],[2,"color","rgb(59, 247, 46)"],["src","../../assets/icons/idea.png","alt","idea"],[1,"options"],["type","button",1,"btn","btn-secondary",3,"click"],[2,"display","flex","justify-content","center"],["type","color",3,"ngModel","ngModelChange","change"],[2,"text-align","right"],[1,"canvaContainer",2,"background-color","beige","border-radius","1em"],["width","1080","height","720",2,"z-index","1000","box-shadow","0.2em 0.2em 0.3em rgb(77, 77, 77)","border-radius","1em","display","block","margin","auto"],["canvas",""]],template:function(t,i){1&t&&(ee(0,"div",0)(1,"div",1)(2,"button",2),$e("click",function(){return i.returnBack()}),de(3,"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0631\u0626\u0633\u064a\u0629"),G(),ee(4,"h2"),de(5," \u0627\u0644\u062a\u063a\u0630\u064a\u0629"),G(),ee(6,"div",3)(7,"h3",4),de(8," : "),ee(9,"b",5),de(10," \u0623\u0644\u0648\u0646 "),G(),de(11," \u0627\u0644\u0623\u063a\u0630\u064a\u0629 \u0627\u0644\u062a\u064a \u0645\u0635\u062f\u0631\u0647\u0627 \u062d\u064a\u0648\u0627\u0646\u064a "),ee(12,"b",6),de(13," \u0628\u0627\u0644\u0623\u062d\u0645\u0631 "),G(),de(14," \u0648 \u0627\u0644\u062a\u064a \u0645\u0635\u062f\u0631\u0647\u0627 \u0646\u0628\u0627\u062a\u064a "),ee(15,"b",7),de(16," \u0628\u0627\u0644\u0623\u062e\u0636\u0631 "),G(),de(17," . "),G(),Ne(18,"img",8),G(),ee(19,"div",9)(20,"button",10),$e("click",function(){return i.onRemoveLastDraw()}),de(21," \u0627\u0644\u0631\u062c\u0648\u0639 \u0644\u0644\u0648\u0631\u0627\u0621 "),G(),ee(22,"div",11)(23,"input",12),$e("ngModelChange",function(s){return i.brushColor=s})("change",function(s){return i.onBrushColorChange(s)}),G(),ee(24,"p",13),de(25," \u0627\u0636\u063a\u0637 \u0647\u0646\u0627 \u0644\u062a\u063a\u064a\u064a\u0631 \u0644\u0648\u0646 "),G()()(),ee(26,"div",14),Ne(27,"canvas",15,16),G()()()),2&t&&(ht(23),Et("ngModel",i.brushColor))},dependencies:[_r,qr,br],styles:["*[_ngcontent-%COMP%]{font-family:title}.content[_ngcontent-%COMP%]{background-image:url(bg.ded0382502644826.jpg);background-position:center;background-attachment:fixed;background-size:cover}.sub-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}h1[_ngcontent-%COMP%]{text-align:right;padding:1em;border-radius:3em;float:right}h2[_ngcontent-%COMP%]{margin:2em .5em;text-align:right}.question[_ngcontent-%COMP%]{display:flex;margin-left:auto;align-items:center}.list-img[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around}.p1[_ngcontent-%COMP%], .p2[_ngcontent-%COMP%], .p3[_ngcontent-%COMP%], .p4[_ngcontent-%COMP%], .p5[_ngcontent-%COMP%]{height:20vh}.number[_ngcontent-%COMP%]{font-size:18px;border:2px solid rgb(255,246,123);background-color:#fff78a;text-align:center;padding:.5em;border-radius:3em}.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center;width:20vw;height:30vh;background:#fff;border-radius:1em;box-shadow:0 0 .5em #666;margin:1em;padding:1em;transition:.5s}.resp[_ngcontent-%COMP%]{width:10vw}td[_ngcontent-%COMP%]{vertical-align:middle;display:table-cell}.confirm[_ngcontent-%COMP%]{display:grid;margin:2em auto}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-family:title;text-align:right}mat-card[_ngcontent-%COMP%]{width:50vw;background-color:#faebd7;margin:1.5em auto}mat-card-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between}img[_ngcontent-%COMP%]{display:grid;margin:1em auto;height:12vh}td[_ngcontent-%COMP%]{display:flex}tbody[_ngcontent-%COMP%]{display:table;margin:1em auto}tr[_ngcontent-%COMP%]{display:block}.canvaContainer[_ngcontent-%COMP%]{display:grid;margin:5vh auto}.options[_ngcontent-%COMP%]{display:flex;justify-content:space-around}"]}),n})();const eB=new we("mat-sanity-checks",{providedIn:"root",factory:function JV(){return!0}});let uS=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function xN(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(ye(o6),ye(eB,8),ye(Tt))},n.\u0275mod=Xt({type:n}),n.\u0275inj=$t({imports:[Lw,Lw]}),n})();class nB{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const dS=Gr({passive:!0,capture:!0});class iB{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Oa(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){const s=this._events.get(t);if(s){const o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,dS)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const s=r.get(t);s&&(s.delete(i),0===s.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,dS)))}}const hS={enterDuration:225,exitDuration:150},fS=Gr({passive:!0,capture:!0}),pS=["mousedown","touchstart"],gS=["mouseup","mouseleave","touchend","touchcancel"];class vu{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=on(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...hS,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function sB(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),h=e-r.left,_=t-r.top,b=s.enterDuration,S=document.createElement("div");S.classList.add("mat-ripple-element"),S.style.left=h-o+"px",S.style.top=_-o+"px",S.style.height=2*o+"px",S.style.width=2*o+"px",null!=i.color&&(S.style.backgroundColor=i.color),S.style.transitionDuration=`${b}ms`,this._containerElement.appendChild(S);const T=window.getComputedStyle(S),k=T.transitionDuration,B="none"===T.transitionProperty||"0s"===k||"0s, 0s"===k||0===r.width&&0===r.height,H=new nB(this,S,i,B);S.style.transform="scale3d(1, 1, 1)",H.state=0,i.persistent||(this._mostRecentTransientRipple=H);let W=null;return!B&&(b||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const pe=()=>this._finishRippleTransition(H),ve=()=>this._destroyRipple(H);S.addEventListener("transitionend",pe),S.addEventListener("transitioncancel",ve),W={onTransitionEnd:pe,onTransitionCancel:ve}}),this._activeRipples.set(H,W),(B||!b)&&this._finishRippleTransition(H),H}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...hS,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=on(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,pS.forEach(i=>{vu._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{gS.forEach(t=>{this._triggerElement.addEventListener(t,this,fS)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=Ow(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Pw(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(pS.forEach(t=>vu._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&gS.forEach(t=>e.removeEventListener(t,this,fS)))}}vu._eventManager=new iB;const oB=["*"],dB=new we("MAT_CARD_CONFIG");let mS=(()=>{class n{constructor(t){this.appearance=t?.appearance||"raised"}}return n.\u0275fac=function(t){return new(t||n)(Q(dB,8))},n.\u0275cmp=Yt({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(t,i){2&t&&ar("mat-mdc-card-outlined","outlined"===i.appearance)("mdc-card--outlined","outlined"===i.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:oB,decls:1,vars:0,template:function(t,i){1&t&&(function $l(n){const e=fe()[nn][tn];if(!e.projection){const i=e.projection=Mo(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?t1(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}(),function sr(n,e=0,t){const i=fe(),r=st(),s=Ms(r,St+n,16,null,t||null);null===s.projection&&(s.projection=e),nd(),32!=(32&s.flags)&&function bM(n,e,t){a_(e[et],0,e,t,Qm(n,t,e),n_(t.parent||e[tn],t,e))}(r,i,s)}(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mat-mdc-card{position:relative;border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px));background-color:var(--mdc-elevated-card-container-color, transparent);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color, transparent)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width, 1px);border-style:solid;border-color:var(--mdc-outlined-card-outline-color, transparent)}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),n})(),_S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ie({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]}),n})(),SB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xt({type:n}),n.\u0275inj=$t({imports:[uS,Rf,uS]}),n})();function EB(n,e){if(1&n&&(ee(0,"mat-card",22)(1,"mat-card-content"),Ne(2,"img",23),ee(3,"h3"),de(4),G()()()),2&n){const t=e.$implicit;ht(2),Et("src",t[0],bs),ht(2),Un(" ",t[1]," ")}}const vS=[["../../assets/a6/4.jpg","\u064a\u0642\u0637\u0639 \u0627\u0644\u0623\u0631\u0646\u0628 \u0627\u0644\u063a\u0630\u0627\u0621 \u0628\u0623\u0633\u0646\u0627\u0646\u0647 "],["../../assets/a6/3.png"," \u0645\u0631\u0648\u0631 \u0627\u0644\u063a\u0630\u0627\u0621 \u0625\u0644\u0649 \u0627\u0644\u0645\u0639\u062f\u0629 \u0639\u0628\u0631 \u0627\u0644\u0628\u0644\u0639\u0648\u0645 \u0648 \u0627\u0644\u0645\u0631\u064a\u0621"],["../../assets/a6/2.jpg","  \u062a\u062a\u062d\u0648\u0644 \u0627\u0644\u0623\u063a\u0630\u064a\u0629 \u062f\u0627\u062e\u0644 \u0627\u0644\u0645\u0639\u062f\u0629 \u0625\u0644\u0649 \u0645\u063a\u0630\u064a\u0627\u062a \u0630\u0627\u0626\u0628\u0629 "],["../../assets/a6/1.jpg"," \u062a\u0633\u0627\u0647\u0645 \u0627\u0644\u0623\u0645\u0639\u0627\u0621 \u0627\u0644\u062f\u0642\u064a\u0642\u0629 \u0641\u064a \u0647\u0636\u0645 \u0627\u0644\u0637\u0639\u0627\u0645 "],["../../assets/a6/5.jpg","  \u062a\u062e\u0631\u062c \u0627\u0644\u0641\u0636\u0644\u0627\u062a \u0639\u0628\u0631 \u0641\u062a\u062d\u0629 \u0627\u0644\u0634\u0631\u062c "]];let TB=(()=>{class n{constructor(t){this.router=t,this.items=[["../../assets/a6/2.jpg","  \u062a\u062a\u062d\u0648\u0644 \u0627\u0644\u0623\u063a\u0630\u064a\u0629 \u062f\u0627\u062e\u0644 \u0627\u0644\u0645\u0639\u062f\u0629 \u0625\u0644\u0649 \u0645\u063a\u0630\u064a\u0627\u062a \u0630\u0627\u0626\u0628\u0629 "],["../../assets/a6/4.jpg","\u064a\u0642\u0637\u0639 \u0627\u0644\u0623\u0631\u0646\u0628 \u0627\u0644\u063a\u0630\u0627\u0621 \u0628\u0623\u0633\u0646\u0627\u0646\u0647 "],["../../assets/a6/5.jpg","  \u062a\u062e\u0631\u062c \u0627\u0644\u0641\u0636\u0644\u0627\u062a \u0639\u0628\u0631 \u0641\u062a\u062d\u0629 \u0627\u0644\u0634\u0631\u062c "],["../../assets/a6/1.jpg"," \u062a\u0633\u0627\u0647\u0645 \u0627\u0644\u0623\u0645\u0639\u0627\u0621 \u0627\u0644\u062f\u0642\u064a\u0642\u0629 \u0641\u064a \u0647\u0636\u0645 \u0627\u0644\u0637\u0639\u0627\u0645 "],["../../assets/a6/3.png"," \u0645\u0631\u0648\u0631 \u0627\u0644\u063a\u0630\u0627\u0621 \u0625\u0644\u0649 \u0627\u0644\u0645\u0639\u062f\u0629 \u0639\u0628\u0631 \u0627\u0644\u0628\u0644\u0639\u0648\u0645 \u0648 \u0627\u0644\u0645\u0631\u064a\u0621"]],this.respWrang="https://assets7.lottiefiles.com/packages/lf20_pojzngga.json",this.respCorrect="https://assets2.lottiefiles.com/packages/lf20_cehxtohr.json",this.options={path:""},this.msg=""}ngOnInit(){}setDialog(){this.testResults()?(this.options={path:this.respCorrect},this.msg="\u0623\u062d\u0633\u0646\u062a \u0627\u0644\u062c\u0648\u0628 \u0635\u062d\u064a\u062d "):(this.options={path:this.respWrang},this.msg="\u0627\u0644\u062c\u0648\u0627\u0628 \u062e\u0627\u0637\u0626")}testResults(){for(let t=0;t<vS.length;t++)if(vS[t][1]!=this.items[t][1])return!1;return!0}returnBack(){this.router.navigate([""])}drop(t){console.log(this.items),tu(this.items,t.previousIndex,t.currentIndex)}}return n.\u0275fac=function(t){return new(t||n)(Q(At))},n.\u0275cmp=Yt({type:n,selectors:[["app-activite7"]],decls:33,vars:3,consts:[[1,"content"],[1,"sub-content"],["type","button",1,"btn","btn-outline-secondary","position-absolute","top-0","start-50","translate-middle-x",3,"click"],[1,"question"],[2,"font-family","title"],[2,"border","2px solid rgb(251, 47, 200)","padding","0.5em","margin","0 0.5em","border-radius","0.5em"],["src","../../assets/icons/pencil.png","alt","idea"],["cdkDropList","",1,"container",3,"cdkDropListDropped"],[1,"example-box"],["cdkDrag","",4,"ngFor","ngForOf"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary","confirm",3,"click"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"lottie-animation","mt-10"],[3,"options"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["cdkDrag",""],["alt","",3,"src"]],template:function(t,i){1&t&&(ee(0,"div",0)(1,"div",1)(2,"button",2),$e("click",function(){return i.returnBack()}),de(3,"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0631\u0626\u0633\u064a\u0629"),G(),ee(4,"h2"),de(5," \u0627\u0644\u062a\u063a\u0630\u064a\u0629"),G(),ee(6,"div",3)(7,"h3",4),de(8," : "),ee(9,"b",5),de(10," \u0627\u0631\u062a\u0628 "),G(),de(11," \u0627\u0644\u0645\u0631\u0627\u062d\u0644 \u0627\u0644\u062a\u064a \u064a\u0645\u0631 \u0628\u0647\u0627 \u0627\u0644\u063a\u0630\u0627\u0621 \u062f\u0627\u062e\u0644 \u0627\u0644\u0623\u0646\u0628\u0648\u0628 \u0627\u0644\u0647\u0636\u0645\u064a"),G(),Ne(12,"img",6),G(),ee(13,"div",7),$e("cdkDropListDropped",function(s){return i.drop(s)}),ee(14,"div",8),$o(15,EB,5,2,"mat-card",9),G(),ee(16,"button",10),$e("click",function(){return i.setDialog()}),de(17,"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062c\u0648\u0627\u0628 "),G(),ee(18,"div",11)(19,"div",12)(20,"div",13)(21,"div",14)(22,"h2",15),de(23,"\u0627\u0644\u0646\u062a\u064a\u062c\u0629"),G(),Ne(24,"button",16),G(),ee(25,"div",17)(26,"div",18),Ne(27,"ng-lottie",19),G(),ee(28,"h2"),de(29),G()(),ee(30,"div",20)(31,"button",21),de(32," \u0623\u063a\u0644\u0642 "),G()()()()()()()()),2&t&&(ht(15),Et("ngForOf",i.items),ht(12),Et("options",i.options),ht(2),Un(" ",i.msg," "))},dependencies:[mS,_S,mr,_c,iu,ru],styles:["*[_ngcontent-%COMP%]{font-family:title}.content[_ngcontent-%COMP%]{background-image:url(bg.ded0382502644826.jpg);background-position:center;background-attachment:fixed;background-size:cover}.sub-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}h1[_ngcontent-%COMP%]{text-align:right;padding:1em;border-radius:3em;float:right}h2[_ngcontent-%COMP%]{margin:2em .5em;text-align:right}.question[_ngcontent-%COMP%]{display:flex;margin-left:auto;align-items:center}.list-img[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around}.p1[_ngcontent-%COMP%], .p2[_ngcontent-%COMP%], .p3[_ngcontent-%COMP%], .p4[_ngcontent-%COMP%], .p5[_ngcontent-%COMP%]{height:20vh}.number[_ngcontent-%COMP%]{font-size:18px;border:2px solid rgb(255,246,123);background-color:#fff78a;text-align:center;padding:.5em;border-radius:3em}.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center;width:20vw;height:30vh;background:#fff;border-radius:1em;box-shadow:0 0 .5em #666;margin:1em;padding:1em;transition:.5s}.resp[_ngcontent-%COMP%]{width:10vw}td[_ngcontent-%COMP%]{vertical-align:middle;display:table-cell}.confirm[_ngcontent-%COMP%]{display:grid;margin:2em auto}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-family:title;text-align:right}mat-card[_ngcontent-%COMP%]{width:50vw;background-color:#faebd7;margin:1.5em auto}mat-card-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between}img[_ngcontent-%COMP%]{height:12vh}"]}),n})();function MB(n,e){1&n&&Ne(0,"img",24),2&n&&Et("src",e.$implicit,bs)}function xB(n,e){if(1&n&&(ee(0,"div",25)(1,"h3",26),de(2),G()()),2&n){const t=e.$implicit;ht(2),Un(" ",t," ")}}const yS=function(n){return[n]},ng=[["../../assets/a8/2.jpg","\u0642\u0637\u0639 \u0627\u0644\u0637\u0639\u0627\u0645 "],["../../assets/a8/4.jpg","  \u0637\u062d\u0646 \u0627\u0644\u0637\u0639\u0627\u0645 "],["../../assets/a8/1.jpg","  \u062a\u0645\u0632\u064a\u0642 \u0627\u0644\u0637\u0639\u0627\u0645 "],["../../assets/a8/3.jpg"," \u0633\u062d\u0642 \u0627\u0644\u0637\u0639\u0627\u0645 "]];let AB=(()=>{class n{constructor(t){this.router=t,this.texts=["\u0642\u0637\u0639 \u0627\u0644\u0637\u0639\u0627\u0645 ","  \u0637\u062d\u0646 \u0627\u0644\u0637\u0639\u0627\u0645 ","  \u062a\u0645\u0632\u064a\u0642 \u0627\u0644\u0637\u0639\u0627\u0645 "," \u0633\u062d\u0642 \u0627\u0644\u0637\u0639\u0627\u0645 "],this.images=["../../assets/a8/1.jpg","../../assets/a8/2.jpg","../../assets/a8/3.jpg","../../assets/a8/4.jpg"],this.respWrang="https://assets7.lottiefiles.com/packages/lf20_pojzngga.json",this.respCorrect="https://assets2.lottiefiles.com/packages/lf20_cehxtohr.json",this.options={path:""},this.msg=""}ngOnInit(){}setDialog(){this.testCorrect()?(this.options={path:this.respCorrect},this.msg="\u0623\u062d\u0633\u0646\u062a \u0627\u0644\u062c\u0648\u0628 \u0635\u062d\u064a\u062d "):(this.options={path:this.respWrang},this.msg="\u0627\u0644\u062c\u0648\u0627\u0628 \u062e\u0627\u0637\u0626")}returnBack(){this.router.navigate([""])}drop(t){if(t.previousContainer===t.container)tu(t.container.data,t.previousIndex,t.currentIndex);else{const i=[...t.container.data];i.splice(t.currentIndex,0,t.previousContainer.data[t.previousIndex]),t.previousContainer.data.splice(t.previousIndex,1),t.container.data=i}}testCorrect(){for(let t=0;t<this.images.length;t++){let i=this.texts.indexOf(ng[t][1]);if(console.log(ng[t]),console.log(this.images[i]),this.images[i]!=ng[t][0])return!1}return!0}}return n.\u0275fac=function(t){return new(t||n)(Q(At))},n.\u0275cmp=Yt({type:n,selectors:[["app-activite8"]],decls:43,vars:12,consts:[[1,"content"],[1,"sub-content"],["type","button",1,"btn","btn-outline-secondary","position-absolute","top-0","start-50","translate-middle-x",3,"click"],[1,"question"],[2,"font-family","title"],[2,"border","2px solid rgb(251, 47, 200)","padding","0.5em","margin","0 0.5em","border-radius","0.5em"],["src","../../assets/icons/pencil.png","alt","idea"],["cdkDropList","",3,"cdkDropListConnectedTo","cdkDropListData","cdkDropListDropped"],["img","cdkDropList"],["alt","","cdkDrag","",3,"src",4,"ngFor","ngForOf"],["text","cdkDropList"],["style","height: 12vh; margin: 1em;",4,"ngFor","ngForOf"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary","confirm",3,"click"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"lottie-animation","mt-10"],[3,"options"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["alt","","cdkDrag","",3,"src"],[2,"height","12vh","margin","1em"],["cdkDrag","",2,"box-shadow","0.2em 0.2em 0.5em gray","margin","0.5em","background","rgb(255, 241, 197)","padding","0.5em 1em","text-align","center"]],template:function(t,i){if(1&t&&(ee(0,"div",0)(1,"div",1)(2,"button",2),$e("click",function(){return i.returnBack()}),de(3,"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0631\u0626\u0633\u064a\u0629"),G(),ee(4,"h2"),de(5," \u0627\u0644\u062a\u063a\u0630\u064a\u0629"),G(),ee(6,"div",3)(7,"h3",4),de(8," : "),ee(9,"b",5),de(10," \u0627\u0631\u062a\u0628 "),G(),de(11," \u0627\u0644\u0645\u0631\u0627\u062d\u0644 \u0627\u0644\u062a\u064a \u064a\u0645\u0631 \u0628\u0647\u0627 \u0627\u0644\u063a\u0630\u0627\u0621 \u062f\u0627\u062e\u0644 \u0627\u0644\u0623\u0646\u0628\u0648\u0628 \u0627\u0644\u0647\u0636\u0645\u064a"),G(),Ne(12,"img",6),G(),ee(13,"table"),Ne(14,"thead"),ee(15,"tbody")(16,"td")(17,"tr")(18,"div",7,8),$e("cdkDropListDropped",function(s){return i.drop(s)}),$o(20,MB,1,1,"img",9),G()(),ee(21,"tr")(22,"div",7,10),$e("cdkDropListDropped",function(s){return i.drop(s)}),$o(24,xB,3,1,"div",11),G()()(),Ne(25,"td"),G()(),ee(26,"button",12),$e("click",function(){return i.setDialog()}),de(27,"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062c\u0648\u0627\u0628 "),G(),ee(28,"div",13)(29,"div",14)(30,"div",15)(31,"div",16)(32,"h2",17),de(33,"\u0627\u0644\u0646\u062a\u064a\u062c\u0629"),G(),Ne(34,"button",18),G(),ee(35,"div",19)(36,"div",20),Ne(37,"ng-lottie",21),G(),ee(38,"h2"),de(39),G()(),ee(40,"div",22)(41,"button",23),de(42," \u0623\u063a\u0644\u0642 "),G()()()()()()()),2&t){const r=Fr(19),s=Fr(23);ht(18),Et("cdkDropListConnectedTo",jh(8,yS,r))("cdkDropListData",i.images),ht(2),Et("ngForOf",i.images),ht(2),Et("cdkDropListConnectedTo",jh(10,yS,s))("cdkDropListData",i.texts),ht(2),Et("ngForOf",i.texts),ht(13),Et("options",i.options),ht(2),Un(" ",i.msg," ")}},dependencies:[mr,_c,iu,ru],styles:["*[_ngcontent-%COMP%]{font-family:title}.content[_ngcontent-%COMP%]{background-image:url(bg.ded0382502644826.jpg);background-position:center;background-attachment:fixed;background-size:cover}.sub-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}h1[_ngcontent-%COMP%]{text-align:right;padding:1em;border-radius:3em;float:right}h2[_ngcontent-%COMP%]{margin:2em .5em;text-align:right}.question[_ngcontent-%COMP%]{display:flex;margin-left:auto;align-items:center}.list-img[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around}.p1[_ngcontent-%COMP%], .p2[_ngcontent-%COMP%], .p3[_ngcontent-%COMP%], .p4[_ngcontent-%COMP%], .p5[_ngcontent-%COMP%]{height:20vh}.number[_ngcontent-%COMP%]{font-size:18px;border:2px solid rgb(255,246,123);background-color:#fff78a;text-align:center;padding:.5em;border-radius:3em}.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center;width:20vw;height:30vh;background:#fff;border-radius:1em;box-shadow:0 0 .5em #666;margin:1em;padding:1em;transition:.5s}.resp[_ngcontent-%COMP%]{width:10vw}td[_ngcontent-%COMP%]{vertical-align:middle;display:table-cell}.confirm[_ngcontent-%COMP%]{display:grid;margin:2em auto}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-family:title;text-align:right}mat-card[_ngcontent-%COMP%]{width:50vw;background-color:#faebd7;margin:1.5em auto}mat-card-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between}img[_ngcontent-%COMP%]{display:grid;margin:1em auto;height:12vh}td[_ngcontent-%COMP%]{display:flex}tbody[_ngcontent-%COMP%]{display:table;margin:1em auto}tr[_ngcontent-%COMP%]{display:block}"]}),n})();const IB=["canvas"],OB=[{path:"",component:lN},{path:"activite1",component:WV},{path:"activite2",component:GV},{path:"activite3",component:YV},{path:"activite4",component:qV},{path:"activite5",component:KV},{path:"activite6",component:QV},{path:"activite7",component:TB},{path:"activite8",component:AB},{path:"activite9",component:(()=>{class n{constructor(t){this.router=t,this.canvasRef={},this.options={path:""},this.brushColor="black",this.msg=""}ngAfterViewInit(){this.canvas=new wr.fabric.Canvas(this.canvasRef.nativeElement),this.canvas.isDrawingMode=!0,this.canvas.freeDrawingBrush=new wr.fabric.PencilBrush(this.canvas),this.canvas.freeDrawingBrush.color="#000000",this.canvas.freeDrawingBrush.width=2,this.canvas.on("mouse:move",t=>{this.canvas.isDrawingMode&&this.canvas.getPointer(t.e)})}onBrushColorChange(t){this.canvas.freeDrawingBrush.color=t.target.value}onBrushWidthChange(t){this.canvas.freeDrawingBrush.width=t.target.value}setDialog(){this.options={path:"https://assets2.lottiefiles.com/datafiles/d2PQkkDcP77TPTeBzAx7iQMu6zJOARPXuafCB19k/success.json"},this.msg="\u0623\u062d\u0633\u0646\u062a \u0627\u0644\u062c\u0648\u0628 \u0635\u062d\u064a\u062d "}returnBack(){this.router.navigate([""])}onRemoveLastDraw(){const t=this.canvas.getObjects().pop();t&&this.canvas.remove(t)}}return n.\u0275fac=function(t){return new(t||n)(Q(At))},n.\u0275cmp=Yt({type:n,selectors:[["app-activite9"]],viewQuery:function(t,i){if(1&t&&ta(IB,7),2&t){let r;Ui(r=Hi())&&(i.canvasRef=r.first)}},decls:35,vars:2,consts:[[1,"content"],[1,"sub-content"],["type","button",1,"btn","btn-outline-secondary","position-absolute","top-0","start-50","translate-middle-x",3,"click"],[1,"question"],[2,"font-family","title"],[2,"border","2px solid rgb(255, 157, 0)","padding","0.5em","margin","0 0.5em","border-radius","0.5em"],["src","../../assets/icons/idea.png","alt","idea"],[1,"options"],["type","button",1,"btn","btn-secondary",3,"click"],[2,"display","flex","justify-content","center"],["type","color",3,"ngModel","ngModelChange","change"],[2,"text-align","right"],[1,"canvaContainer",2,"background-color","beige","border-radius","1em"],["width","720","height","420",2,"z-index","1000","box-shadow","0.2em 0.2em 0.3em rgb(77, 77, 77)","border-radius","1em","display","block","margin","auto"],["canvas",""],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary","confirm",3,"click"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-body"],[1,"lottie-animation","mt-10"],[3,"options"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"]],template:function(t,i){1&t&&(ee(0,"div",0)(1,"div",1)(2,"button",2),$e("click",function(){return i.returnBack()}),de(3,"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0631\u0626\u0633\u064a\u0629"),G(),ee(4,"h2"),de(5," \u0627\u0644\u062a\u063a\u0630\u064a\u0629"),G(),ee(6,"div",3)(7,"h3",4),de(8," : "),ee(9,"b",5),de(10," \u0627\u0631\u0633\u0645 "),G(),de(11," \u0635\u0648\u0631\u0629 \u0627\u0644\u0633\u0646 \u0627\u0644\u0645\u0648\u0633\u0648\u0633\u0629 \u062f\u0627\u062e\u0644 \u0627\u0644\u0645\u0633\u062a\u0637\u064a\u0644 "),G(),Ne(12,"img",6),G(),ee(13,"div",7)(14,"button",8),$e("click",function(){return i.onRemoveLastDraw()}),de(15," \u0627\u0644\u0631\u062c\u0648\u0639 \u0644\u0644\u0648\u0631\u0627\u0621 "),G(),ee(16,"div",9)(17,"input",10),$e("ngModelChange",function(s){return i.brushColor=s})("change",function(s){return i.onBrushColorChange(s)}),G(),ee(18,"p",11),de(19," \u0627\u0636\u063a\u0637 \u0647\u0646\u0627 \u0644\u062a\u063a\u064a\u064a\u0631 \u0644\u0648\u0646 "),G()()(),ee(20,"div",12),Ne(21,"canvas",13,14),G()(),ee(23,"button",15),$e("click",function(){return i.setDialog()}),de(24,"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062c\u0648\u0627\u0628 "),G(),ee(25,"div",16)(26,"div",17)(27,"div",18)(28,"div",19)(29,"div",20),Ne(30,"ng-lottie",21),G(),Ne(31,"h2"),G(),ee(32,"div",22)(33,"button",23),de(34," \u0623\u063a\u0644\u0642 "),G()()()()()()),2&t&&(ht(17),Et("ngModel",i.brushColor),ht(13),Et("options",i.options))},dependencies:[mr,_r,qr,br],styles:["*[_ngcontent-%COMP%]{font-family:title}.content[_ngcontent-%COMP%]{background-image:url(bg.ded0382502644826.jpg);background-position:center;background-attachment:fixed;background-size:cover}.sub-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}h1[_ngcontent-%COMP%]{text-align:right;padding:1em;border-radius:3em;float:right}h2[_ngcontent-%COMP%]{margin:2em .5em;text-align:right}.question[_ngcontent-%COMP%]{display:flex;margin-left:auto;align-items:center}.list-img[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around}.p1[_ngcontent-%COMP%], .p2[_ngcontent-%COMP%], .p3[_ngcontent-%COMP%], .p4[_ngcontent-%COMP%], .p5[_ngcontent-%COMP%]{height:20vh}.number[_ngcontent-%COMP%]{font-size:18px;border:2px solid rgb(255,246,123);background-color:#fff78a;text-align:center;padding:.5em;border-radius:3em}.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center;width:20vw;height:30vh;background:#fff;border-radius:1em;box-shadow:0 0 .5em #666;margin:1em;padding:1em;transition:.5s}.resp[_ngcontent-%COMP%]{width:10vw}td[_ngcontent-%COMP%]{vertical-align:middle;display:table-cell}.confirm[_ngcontent-%COMP%]{display:grid;margin:2em auto}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-family:title;text-align:right}mat-card[_ngcontent-%COMP%]{width:50vw;background-color:#faebd7;margin:1.5em auto}mat-card-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between}img[_ngcontent-%COMP%]{display:grid;margin:1em auto;height:12vh}td[_ngcontent-%COMP%]{display:flex}tbody[_ngcontent-%COMP%]{display:table;margin:1em auto}tr[_ngcontent-%COMP%]{display:block}.canvaContainer[_ngcontent-%COMP%]{display:grid;margin:5vh auto}.options[_ngcontent-%COMP%]{display:flex;justify-content:space-around}"]}),n})()},{path:"**",redirectTo:""}];let PB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xt({type:n}),n.\u0275inj=$t({imports:[gw.forRoot(OB),gw]}),n})(),RB=(()=>{class n{constructor(){this.title="pfeProject"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Yt({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&Ne(0,"router-outlet")},dependencies:[ap],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:title}"]}),n})();class CS{}class kB{}const qi="*";function bS(n,e=null){return{type:2,steps:n,options:e}}function wS(n){return{type:6,styles:n,offset:null}}function DS(n){Promise.resolve().then(n)}class $a{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){DS(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class SS{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?DS(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,h)=>Math.max(o,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const ig="!";function ES(n){return new se(3e3,!1)}function gj(){return typeof window<"u"&&typeof window.document<"u"}function rg(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Dr(n){switch(n.length){case 0:return new $a;case 1:return n[0];default:return new SS(n)}}function TS(n,e,t,i,r=new Map,s=new Map){const o=[],h=[];let _=-1,b=null;if(i.forEach(S=>{const T=S.get("offset"),P=T==_,k=P&&b||new Map;S.forEach((B,H)=>{let W=H,pe=B;if("offset"!==H)switch(W=e.normalizePropertyName(W,o),pe){case ig:pe=r.get(H);break;case qi:pe=s.get(H);break;default:pe=e.normalizeStyleValue(H,W,pe,o)}k.set(W,pe)}),P||h.push(k),b=k,_=T}),o.length)throw function ij(n){return new se(3502,!1)}();return h}function sg(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&og(t,"start",n)));break;case"done":n.onDone(()=>i(t&&og(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&og(t,"destroy",n)))}}function og(n,e,t){const s=ag(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function ag(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Pn(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function MS(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let lg=(n,e)=>!1,xS=(n,e,t)=>[],AS=null;function cg(n){const e=n.parentNode||n.host;return e===AS?null:e}(rg()||typeof Element<"u")&&(gj()?(AS=(()=>document.documentElement)(),lg=(n,e)=>{for(;e;){if(e===n)return!0;e=cg(e)}return!1}):lg=(n,e)=>n.contains(e),xS=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let Qr=null,IS=!1;const OS=lg,PS=xS;let RS=(()=>{class n{validateStyleProperty(t){return function _j(n){Qr||(Qr=function vj(){return typeof document<"u"?document.body:null}()||{},IS=!!Qr.style&&"WebkitAppearance"in Qr.style);let e=!0;return Qr.style&&!function mj(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Qr.style,!e&&IS&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Qr.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return OS(t,i)}getParentElement(t){return cg(t)}query(t,i,r){return PS(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,h=[],_){return new $a(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})(),ug=(()=>{class n{}return n.NOOP=new RS,n})();const yj=1e3,dg="ng-enter",yu="ng-leave",Cu="ng-trigger",bu=".ng-trigger",FS="ng-animating",hg=".ng-animating";function Ki(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:fg(parseFloat(e[1]),e[2])}function fg(n,e){return"s"===e?n*yj:n}function wu(n,e,t){return n.hasOwnProperty("duration")?n:function bj(n,e,t){let r,s=0,o="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(ES()),{duration:0,delay:0,easing:""};r=fg(parseFloat(h[1]),h[2]);const _=h[3];null!=_&&(s=fg(parseFloat(_),h[4]));const b=h[5];b&&(o=b)}else r=n;if(!t){let h=!1,_=e.length;r<0&&(e.push(function FB(){return new se(3100,!1)}()),h=!0),s<0&&(e.push(function LB(){return new se(3101,!1)}()),h=!0),h&&e.splice(_,0,ES())}return{duration:r,delay:s,easing:o}}(n,e,t)}function Wa(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function LS(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Sr(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function VS(n,e,t){return t?e+":"+t+";":""}function BS(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=VS(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=VS(0,Ej(t),n.style[t]));n.setAttribute("style",e)}function Ei(n,e,t){n.style&&(e.forEach((i,r)=>{const s=gg(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i}),rg()&&BS(n))}function Jr(n,e){n.style&&(e.forEach((t,i)=>{const r=gg(i);n.style[r]=""}),rg()&&BS(n))}function Ga(n){return Array.isArray(n)?1==n.length?n[0]:bS(n):n}const pg=new RegExp("{{\\s*(.+?)\\s*}}","g");function jS(n){let e=[];if("string"==typeof n){let t;for(;t=pg.exec(n);)e.push(t[1]);pg.lastIndex=0}return e}function Ya(n,e,t){const i=n.toString(),r=i.replace(pg,(s,o)=>{let h=e[o];return null==h&&(t.push(function VB(n){return new se(3003,!1)}()),h=""),h.toString()});return r==i?n:r}function Du(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Sj=/-+([a-z0-9])/g;function gg(n){return n.replace(Sj,(...e)=>e[1].toUpperCase())}function Ej(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Rn(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function BB(n){return new se(3004,!1)}()}}function US(n,e){return window.getComputedStyle(n)[e]}const Tu="*";function Oj(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Pj(n,e,t){if(":"==n[0]){const _=function Rj(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function JB(n){return new se(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function QB(n){return new se(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(HS(r,o));"<"==s[0]&&!(r==Tu&&o==Tu)&&e.push(HS(o,r))}(i,t,e)):t.push(n),t}const Mu=new Set(["true","1"]),xu=new Set(["false","0"]);function HS(n,e){const t=Mu.has(n)||xu.has(n),i=Mu.has(e)||xu.has(e);return(r,s)=>{let o=n==Tu||n==r,h=e==Tu||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?Mu.has(n):xu.has(n)),!h&&i&&"boolean"==typeof s&&(h=s?Mu.has(e):xu.has(e)),o&&h}}const kj=new RegExp("s*:selfs*,?","g");function mg(n,e,t,i){return new Fj(n).build(e,t,i)}class Fj{constructor(e){this._driver=e}build(e,t,i){const r=new Vj(t);return this._resetContextStyleTimingState(r),Rn(this,Ga(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function UB(){return new se(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const _=h,b=_.name;b.toString().split(/\s*,\s*/).forEach(S=>{_.name=S,s.push(this.visitState(_,t))}),_.name=b}else if(1==h.type){const _=this.visitTransition(h,t);i+=_.queryCount,r+=_.depCount,o.push(_)}else t.errors.push(function HB(){return new se(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(h=>{h instanceof Map&&h.forEach(_=>{jS(_).forEach(b=>{o.hasOwnProperty(b)||s.add(b)})})}),s.size&&(Du(s.values()),t.errors.push(function zB(n,e){return new se(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Rn(this,Ga(e.animation),t);return{type:1,matchers:Oj(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:es(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Rn(this,i,t)),options:es(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const h=Rn(this,o,t);return r=Math.max(r,t.currentTime),h});return t.currentTime=r,{type:3,steps:s,options:es(e.options)}}visitAnimate(e,t){const i=function jj(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return _g(wu(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=_g(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=wu(t,e);return _g(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:wS({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,h=!1;if(!o){h=!0;const b={};i.easing&&(b.easing=i.easing),o=wS(b)}t.currentTime+=i.duration+i.delay;const _=this.visitStyle(o,t);_.isEmptyStep=h,r=_}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of r)"string"==typeof h?h===qi?i.push(h):t.errors.push(new se(3002,!1)):i.push(LS(h));let s=!1,o=null;return i.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(o=h.get("easing"),h.delete("easing")),!s))for(let _ of h.values())if(_.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((h,_)=>{const b=t.collectedStyles.get(t.currentQuerySelector),S=b.get(_);let T=!0;S&&(s!=r&&s>=S.startTime&&r<=S.endTime&&(t.errors.push(function WB(n,e,t,i,r){return new se(3010,!1)}()),T=!1),s=S.startTime),T&&b.set(_,{startTime:s,endTime:r}),t.options&&function Dj(n,e,t){const i=e.params||{},r=jS(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function NB(n){return new se(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function GB(){return new se(3011,!1)}()),i;let s=0;const o=[];let h=!1,_=!1,b=0;const S=e.steps.map(pe=>{const ve=this._makeStyleAst(pe,t);let ne=null!=ve.offset?ve.offset:function Bj(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(ve.styles),Te=0;return null!=ne&&(s++,Te=ve.offset=ne),_=_||Te<0||Te>1,h=h||Te<b,b=Te,o.push(Te),ve});_&&t.errors.push(function YB(){return new se(3012,!1)}()),h&&t.errors.push(function XB(){return new se(3200,!1)}());const T=e.steps.length;let P=0;s>0&&s<T?t.errors.push(function qB(){return new se(3202,!1)}()):0==s&&(P=1/(T-1));const k=T-1,B=t.currentTime,H=t.currentAnimateTimings,W=H.duration;return S.forEach((pe,ve)=>{const ne=P>0?ve==k?1:P*ve:o[ve],Te=ne*W;t.currentTime=B+H.delay+Te,H.duration=Te,this._validateStyleAst(pe,t),pe.offset=ne,i.styles.push(pe)}),i}visitReference(e,t){return{type:8,animation:Rn(this,Ga(e.animation),t),options:es(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:es(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:es(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function Lj(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(kj,"")),n=n.replace(/@\*/g,bu).replace(/@\w+/g,t=>bu+"-"+t.slice(1)).replace(/:animating/g,hg),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Pn(t.collectedStyles,t.currentQuerySelector,new Map);const h=Rn(this,Ga(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:h,originalSelector:e.selector,options:es(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function KB(){return new se(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:wu(e.timings,t.errors,!0);return{type:12,animation:Rn(this,Ga(e.animation),t),timings:i,options:null}}}class Vj{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function es(n){return n?(n=Wa(n)).params&&(n.params=function Nj(n){return n?Wa(n):null}(n.params)):n={},n}function _g(n,e,t){return{duration:n,delay:e,easing:t}}function vg(n,e,t,i,r,s,o=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:h}}class Au{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const zj=new RegExp(":enter","g"),Wj=new RegExp(":leave","g");function yg(n,e,t,i,r,s=new Map,o=new Map,h,_,b=[]){return(new Gj).buildKeyframes(n,e,t,i,r,s,o,h,_,b)}class Gj{buildKeyframes(e,t,i,r,s,o,h,_,b,S=[]){b=b||new Au;const T=new Cg(e,t,b,r,s,S,[]);T.options=_;const P=_.delay?Ki(_.delay):0;T.currentTimeline.delayNextStep(P),T.currentTimeline.setStyles([o],null,T.errors,_),Rn(this,i,T);const k=T.timelines.filter(B=>B.containsAnimation());if(k.length&&h.size){let B;for(let H=k.length-1;H>=0;H--){const W=k[H];if(W.element===t){B=W;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([h],null,T.errors,_)}return k.length?k.map(B=>B.buildKeyframes()):[vg(t,[],[],[],0,P,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const s=r?.delay;if(s){const o="number"==typeof s?s:Ki(Ya(s,r?.params??{},t.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?Ki(i.duration):null,h=null!=i.delay?Ki(i.delay):null;return 0!==o&&e.forEach(_=>{const b=t.appendInstructionToTimeline(_,o,h);s=Math.max(s,b.duration+b.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Rn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Iu);const o=Ki(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Rn(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Ki(e.options.delay):0;e.steps.forEach(o=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),Rn(this,o,h),r=Math.max(r,h.currentTimeline.currentTime),i.push(h.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return wu(t.params?Ya(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,h=t.createSubContext().currentTimeline;h.easing=i.easing,e.styles.forEach(_=>{h.forwardTime((_.offset||0)*s),h.setStyles(_.styles,_.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Ki(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Iu);let o=i;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=h.length;let _=null;h.forEach((b,S)=>{t.currentQueryIndex=S;const T=t.createSubContext(e.options,b);s&&T.delayNextStep(s),b===t.element&&(_=T.currentTimeline),Rn(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),h=o*(t.currentQueryTotal-1);let _=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":_=h-_;break;case"full":_=i.currentStaggerTime}const S=t.currentTimeline;_&&S.delayNextStep(_);const T=S.currentTime;Rn(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-T+(r.startTime-i.currentTimeline.startTime)}}const Iu={};class Cg{constructor(e,t,i,r,s,o,h,_){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Iu,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new Ou(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Ki(i.duration)),null!=i.delay&&(r.delay=Ki(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!o.hasOwnProperty(h))&&(o[h]=Ya(s[h],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new Cg(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Iu,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new Yj(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let h=[];if(r&&h.push(this.element),e.length>0){e=(e=e.replace(zj,"."+this._enterClassName)).replace(Wj,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=i);0!==i&&(b=i<0?b.slice(b.length+i,b.length):b.slice(0,i)),h.push(...b)}return!s&&0==h.length&&o.push(function ZB(n){return new se(3014,!1)}()),h}}class Ou{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Ou(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||qi),this._currentKeyframe.set(t,qi);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function Xj(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,qi)}else Sr(r,t)}),t}(e,this._globalTimelineStyles);for(let[h,_]of o){const b=Ya(_,s,i);this._pendingStyles.set(h,b),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??qi),this._updateStyle(h,b)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((h,_)=>{const b=Sr(h,new Map,this._backFill);b.forEach((S,T)=>{S===ig?e.add(T):S===qi&&t.add(T)}),i||b.set("offset",_/this.duration),r.push(b)});const s=e.size?Du(e.values()):[],o=t.size?Du(t.values()):[];if(i){const h=r[0],_=new Map(h);h.set("offset",0),_.set("offset",1),r=[h,_]}return vg(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class Yj extends Ou{constructor(e,t,i,r,s,o,h=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,h=t/o,_=Sr(e[0]);_.set("offset",0),s.push(_);const b=Sr(e[0]);b.set("offset",WS(h)),s.push(b);const S=e.length-1;for(let T=1;T<=S;T++){let P=Sr(e[T]);const k=P.get("offset");P.set("offset",WS((t+k*i)/o)),s.push(P)}i=o,t=0,r="",e=s}return vg(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function WS(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class bg{}const qj=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Kj extends bg{normalizePropertyName(e,t){return gg(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(qj.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const h=i.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&r.push(function jB(n,e){return new se(3005,!1)}())}return o+s}}function GS(n,e,t,i,r,s,o,h,_,b,S,T,P){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:h,queriedElements:_,preStyleProps:b,postStyleProps:S,totalTime:T,errors:P}}const wg={};class YS{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function Zj(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,h,_,b,S){const T=[],P=this.ast.options&&this.ast.options.params||wg,B=this.buildStyles(i,h&&h.params||wg,T),H=_&&_.params||wg,W=this.buildStyles(r,H,T),pe=new Set,ve=new Map,ne=new Map,Te="void"===r,ot={params:Qj(H,P),delay:this.ast.options?.delay},ut=S?[]:yg(e,t,this.ast.animation,s,o,B,W,ot,b,T);let ln=0;if(ut.forEach(Qi=>{ln=Math.max(Qi.duration+Qi.delay,ln)}),T.length)return GS(t,this._triggerName,i,r,Te,B,W,[],[],ve,ne,ln,T);ut.forEach(Qi=>{const Ji=Qi.element,lE=Pn(ve,Ji,new Set);Qi.preStyleProps.forEach(ts=>lE.add(ts));const qa=Pn(ne,Ji,new Set);Qi.postStyleProps.forEach(ts=>qa.add(ts)),Ji!==t&&pe.add(Ji)});const Zi=Du(pe.values());return GS(t,this._triggerName,i,r,Te,B,W,ut,Zi,ve,ne,ln)}}function Qj(n,e){const t=Wa(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class Jj{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=Wa(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,h)=>{o&&(o=Ya(o,r,t));const _=this.normalizer.normalizePropertyName(h,t);o=this.normalizer.normalizeStyleValue(h,_,o,t),i.set(h,o)})}),i}}class t4{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new Jj(r.style,r.options&&r.options.params||{},i))}),XS(this.states,"true","1"),XS(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new YS(e,r,this.states))}),this.fallbackTransition=function n4(n,e,t){return new YS(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function XS(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const i4=new Au;class r4{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],r=[],s=mg(this._driver,t,i,r);if(i.length)throw function rj(n){return new se(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=TS(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let o;const h=new Map;if(s?(o=yg(this._driver,t,s,dg,yu,new Map,new Map,i,i4,r),o.forEach(S=>{const T=Pn(h,S.element,new Map);S.postStyleProps.forEach(P=>T.set(P,null))})):(r.push(function sj(){return new se(3300,!1)}()),o=[]),r.length)throw function oj(n){return new se(3504,!1)}();h.forEach((S,T)=>{S.forEach((P,k)=>{S.set(k,this._driver.computeStyle(T,k,qi))})});const b=Dr(o.map(S=>{const T=h.get(S.element);return this._buildPlayer(S,new Map,T)}));return this._playersById.set(e,b),b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function aj(n){return new se(3301,!1)}();return t}listen(e,t,i,r){const s=ag(t,"","","");return sg(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const qS="ng-animate-queued",Dg="ng-animate-disabled",c4=[],KS={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},u4={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Xn="__ng_removed";class Sg{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function p4(n){return n??null}(i?e.value:e),i){const s=Wa(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Xa="void",Eg=new Sg(Xa);class d4{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,qn(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function lj(n,e){return new se(3302,!1)}();if(null==i||0==i.length)throw function cj(n){return new se(3303,!1)}();if(!function g4(n){return"start"==n||"done"==n}(i))throw function uj(n,e){return new se(3400,!1)}();const s=Pn(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const h=Pn(this._engine.statesByElement,e,new Map);return h.has(t)||(qn(e,Cu),qn(e,Cu+"-"+t),h.set(t,Eg)),()=>{this._engine.afterFlush(()=>{const _=s.indexOf(o);_>=0&&s.splice(_,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function dj(n){return new se(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new Tg(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(qn(e,Cu),qn(e,Cu+"-"+t),this._engine.statesByElement.set(e,h=new Map));let _=h.get(t);const b=new Sg(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&_&&b.absorbOptions(_.options),h.set(t,b),_||(_=Eg),b.value!==Xa&&_.value===b.value){if(!function v4(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(_.params,b.params)){const H=[],W=s.matchStyles(_.value,_.params,H),pe=s.matchStyles(b.value,b.params,H);H.length?this._engine.reportError(H):this._engine.afterFlush(()=>{Jr(e,W),Ei(e,pe)})}return}const P=Pn(this._engine.playersByElement,e,[]);P.forEach(H=>{H.namespaceId==this.id&&H.triggerName==t&&H.queued&&H.destroy()});let k=s.matchTransition(_.value,b.value,e,b.params),B=!1;if(!k){if(!r)return;k=s.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:k,fromState:_,toState:b,player:o,isFallbackTransition:B}),B||(qn(e,qS),o.onStart(()=>{co(e,qS)})),o.onDone(()=>{let H=this.players.indexOf(o);H>=0&&this.players.splice(H,1);const W=this._engine.playersByElement.get(e);if(W){let pe=W.indexOf(o);pe>=0&&W.splice(pe,1)}}),this.players.push(o),P.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,bu,!0);i.forEach(r=>{if(r[Xn])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const h=[];if(s.forEach((_,b)=>{if(o.set(b,_.value),this._triggers.has(b)){const S=this.trigger(e,b,Xa,r);S&&h.push(S)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&Dr(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const _=this._triggers.get(o).fallbackTransition,b=i.get(o)||Eg,S=new Sg(Xa),T=new Tg(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:_,fromState:b,toState:S,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Xn];(!s||s===KS)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){qn(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(h=>{if(h.name==i.triggerName){const _=ag(s,i.triggerName,i.fromState.value,i.toState.value);_._data=e,sg(i.player,h.phase,_,h.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class h4{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new d4(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,h=this.driver.getParentElement(t);for(;h;){const _=r.get(h);if(_){const b=i.indexOf(_);i.splice(b+1,0,e),o=!0;break}h=this.driver.getParentElement(h)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(Pu(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!Pu(t))return;const s=t[Xn];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),qn(e,Dg)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),co(e,Dg))}removeNode(e,t,i,r){if(Pu(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[Xn]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return Pu(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,bu,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,hg,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Dr(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Xn];if(t&&t.setForRemoval){if(e[Xn]=KS,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Dg)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)qn(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Dr(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function hj(n){return new se(3402,!1)}()}_flushAnimations(e,t){const i=new Au,r=[],s=new Map,o=[],h=new Map,_=new Map,b=new Map,S=new Set;this.disabledNodes.forEach(Pe=>{S.add(Pe);const Le=this.driver.query(Pe,".ng-animate-queued",!0);for(let ze=0;ze<Le.length;ze++)S.add(Le[ze])});const T=this.bodyNode,P=Array.from(this.statesByElement.keys()),k=JS(P,this.collectedEnterElements),B=new Map;let H=0;k.forEach((Pe,Le)=>{const ze=dg+H++;B.set(Le,ze),Pe.forEach(lt=>qn(lt,ze))});const W=[],pe=new Set,ve=new Set;for(let Pe=0;Pe<this.collectedLeaveElements.length;Pe++){const Le=this.collectedLeaveElements[Pe],ze=Le[Xn];ze&&ze.setForRemoval&&(W.push(Le),pe.add(Le),ze.hasAnimation?this.driver.query(Le,".ng-star-inserted",!0).forEach(lt=>pe.add(lt)):ve.add(Le))}const ne=new Map,Te=JS(P,Array.from(pe));Te.forEach((Pe,Le)=>{const ze=yu+H++;ne.set(Le,ze),Pe.forEach(lt=>qn(lt,ze))}),e.push(()=>{k.forEach((Pe,Le)=>{const ze=B.get(Le);Pe.forEach(lt=>co(lt,ze))}),Te.forEach((Pe,Le)=>{const ze=ne.get(Le);Pe.forEach(lt=>co(lt,ze))}),W.forEach(Pe=>{this.processLeaveNode(Pe)})});const ot=[],ut=[];for(let Pe=this._namespaceList.length-1;Pe>=0;Pe--)this._namespaceList[Pe].drainQueuedTransitions(t).forEach(ze=>{const lt=ze.player,Gt=ze.element;if(ot.push(lt),this.collectedEnterElements.length){const cn=Gt[Xn];if(cn&&cn.setForMove){if(cn.previousTriggersValues&&cn.previousTriggersValues.has(ze.triggerName)){const ns=cn.previousTriggersValues.get(ze.triggerName),Kn=this.statesByElement.get(ze.element);if(Kn&&Kn.has(ze.triggerName)){const Fu=Kn.get(ze.triggerName);Fu.value=ns,Kn.set(ze.triggerName,Fu)}}return void lt.destroy()}}const Ti=!T||!this.driver.containsElement(T,Gt),kn=ne.get(Gt),Er=B.get(Gt),It=this._buildInstruction(ze,i,Er,kn,Ti);if(It.errors&&It.errors.length)return void ut.push(It);if(Ti)return lt.onStart(()=>Jr(Gt,It.fromStyles)),lt.onDestroy(()=>Ei(Gt,It.toStyles)),void r.push(lt);if(ze.isFallbackTransition)return lt.onStart(()=>Jr(Gt,It.fromStyles)),lt.onDestroy(()=>Ei(Gt,It.toStyles)),void r.push(lt);const dE=[];It.timelines.forEach(cn=>{cn.stretchStartingKeyframe=!0,this.disabledNodes.has(cn.element)||dE.push(cn)}),It.timelines=dE,i.append(Gt,It.timelines),o.push({instruction:It,player:lt,element:Gt}),It.queriedElements.forEach(cn=>Pn(h,cn,[]).push(lt)),It.preStyleProps.forEach((cn,ns)=>{if(cn.size){let Kn=_.get(ns);Kn||_.set(ns,Kn=new Set),cn.forEach((Fu,Ag)=>Kn.add(Ag))}}),It.postStyleProps.forEach((cn,ns)=>{let Kn=b.get(ns);Kn||b.set(ns,Kn=new Set),cn.forEach((Fu,Ag)=>Kn.add(Ag))})});if(ut.length){const Pe=[];ut.forEach(Le=>{Pe.push(function fj(n,e){return new se(3505,!1)}())}),ot.forEach(Le=>Le.destroy()),this.reportError(Pe)}const ln=new Map,Zi=new Map;o.forEach(Pe=>{const Le=Pe.element;i.has(Le)&&(Zi.set(Le,Le),this._beforeAnimationBuild(Pe.player.namespaceId,Pe.instruction,ln))}),r.forEach(Pe=>{const Le=Pe.element;this._getPreviousPlayers(Le,!1,Pe.namespaceId,Pe.triggerName,null).forEach(lt=>{Pn(ln,Le,[]).push(lt),lt.destroy()})});const Qi=W.filter(Pe=>tE(Pe,_,b)),Ji=new Map;QS(Ji,this.driver,ve,b,qi).forEach(Pe=>{tE(Pe,_,b)&&Qi.push(Pe)});const qa=new Map;k.forEach((Pe,Le)=>{QS(qa,this.driver,new Set(Pe),_,ig)}),Qi.forEach(Pe=>{const Le=Ji.get(Pe),ze=qa.get(Pe);Ji.set(Pe,new Map([...Array.from(Le?.entries()??[]),...Array.from(ze?.entries()??[])]))});const ts=[],cE=[],uE={};o.forEach(Pe=>{const{element:Le,player:ze,instruction:lt}=Pe;if(i.has(Le)){if(S.has(Le))return ze.onDestroy(()=>Ei(Le,lt.toStyles)),ze.disabled=!0,ze.overrideTotalTime(lt.totalTime),void r.push(ze);let Gt=uE;if(Zi.size>1){let kn=Le;const Er=[];for(;kn=kn.parentNode;){const It=Zi.get(kn);if(It){Gt=It;break}Er.push(kn)}Er.forEach(It=>Zi.set(It,Gt))}const Ti=this._buildAnimation(ze.namespaceId,lt,ln,s,qa,Ji);if(ze.setRealPlayer(Ti),Gt===uE)ts.push(ze);else{const kn=this.playersByElement.get(Gt);kn&&kn.length&&(ze.parentPlayer=Dr(kn)),r.push(ze)}}else Jr(Le,lt.fromStyles),ze.onDestroy(()=>Ei(Le,lt.toStyles)),cE.push(ze),S.has(Le)&&r.push(ze)}),cE.forEach(Pe=>{const Le=s.get(Pe.element);if(Le&&Le.length){const ze=Dr(Le);Pe.setRealPlayer(ze)}}),r.forEach(Pe=>{Pe.parentPlayer?Pe.syncPlayerEvents(Pe.parentPlayer):Pe.destroy()});for(let Pe=0;Pe<W.length;Pe++){const Le=W[Pe],ze=Le[Xn];if(co(Le,yu),ze&&ze.hasAnimation)continue;let lt=[];if(h.size){let Ti=h.get(Le);Ti&&Ti.length&&lt.push(...Ti);let kn=this.driver.query(Le,hg,!0);for(let Er=0;Er<kn.length;Er++){let It=h.get(kn[Er]);It&&It.length&&lt.push(...It)}}const Gt=lt.filter(Ti=>!Ti.destroyed);Gt.length?m4(this,Le,Gt):this.processLeaveNode(Le)}return W.length=0,ts.forEach(Pe=>{this.players.push(Pe),Pe.onDone(()=>{Pe.destroy();const Le=this.players.indexOf(Pe);this.players.splice(Le,1)}),Pe.play()}),ts}elementContainsData(e,t){let i=!1;const r=t[Xn];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(o=h)}else{const h=this.playersByElement.get(e);if(h){const _=!s||s==Xa;h.forEach(b=>{b.queued||!_&&b.triggerName!=r||o.push(b)})}}return(i||r)&&(o=o.filter(h=>!(i&&i!=h.namespaceId||r&&r!=h.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const b=_.element,S=b!==s,T=Pn(i,b,[]);this._getPreviousPlayers(b,S,o,h,t.toState).forEach(k=>{const B=k.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),k.destroy(),T.push(k)})}Jr(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const h=t.triggerName,_=t.element,b=[],S=new Set,T=new Set,P=t.timelines.map(B=>{const H=B.element;S.add(H);const W=H[Xn];if(W&&W.removedBeforeQueried)return new $a(B.duration,B.delay);const pe=H!==_,ve=function _4(n){const e=[];return eE(n,e),e}((i.get(H)||c4).map(ln=>ln.getRealPlayer())).filter(ln=>!!ln.element&&ln.element===H),ne=s.get(H),Te=o.get(H),ot=TS(0,this._normalizer,0,B.keyframes,ne,Te),ut=this._buildPlayer(B,ot,ve);if(B.subTimeline&&r&&T.add(H),pe){const ln=new Tg(e,h,H);ln.setRealPlayer(ut),b.push(ln)}return ut});b.forEach(B=>{Pn(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function f4(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,B.element,B))}),S.forEach(B=>qn(B,FS));const k=Dr(P);return k.onDestroy(()=>{S.forEach(B=>co(B,FS)),Ei(_,t.toStyles)}),T.forEach(B=>{Pn(r,B,[]).push(k)}),k}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new $a(e.duration,e.delay)}}class Tg{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new $a,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>sg(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Pn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Pu(n){return n&&1===n.nodeType}function ZS(n,e){const t=n.style.display;return n.style.display=e??"none",t}function QS(n,e,t,i,r){const s=[];t.forEach(_=>s.push(ZS(_)));const o=[];i.forEach((_,b)=>{const S=new Map;_.forEach(T=>{const P=e.computeStyle(b,T,r);S.set(T,P),(!P||0==P.length)&&(b[Xn]=u4,o.push(b))}),n.set(b,S)});let h=0;return t.forEach(_=>ZS(_,s[h++])),o}function JS(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=1,r=new Set(e),s=new Map;function o(h){if(!h)return i;let _=s.get(h);if(_)return _;const b=h.parentNode;return _=t.has(b)?b:r.has(b)?i:o(b),s.set(h,_),_}return e.forEach(h=>{const _=o(h);_!==i&&t.get(_).push(h)}),t}function qn(n,e){n.classList?.add(e)}function co(n,e){n.classList?.remove(e)}function m4(n,e,t){Dr(t).onDone(()=>n.processLeaveNode(e))}function eE(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof SS?eE(i.players,e):e.push(i)}}function tE(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class Ru{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new h4(e,t,i),this._timelineEngine=new r4(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let h=this._triggerCache[o];if(!h){const _=[],b=[],S=mg(this._driver,s,_,b);if(_.length)throw function nj(n,e){return new se(3404,!1)}();h=function e4(n,e,t){return new t4(n,e,t)}(r,S,this._normalizer),this._triggerCache[o]=h}this._transitionEngine.registerTrigger(t,r,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=MS(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,h]=MS(i);return this._timelineEngine.listen(o,t,h,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let C4=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ei(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ei(this._element,this._initialStyles),this._endStyles&&(Ei(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Jr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Jr(this._element,this._endStyles),this._endStyles=null),Ei(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Mg(n){let e=null;return n.forEach((t,i)=>{(function b4(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class nE{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:US(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class w4{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return OS(e,t)}getParentElement(e){return cg(e)}query(e,t,i){return PS(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const _={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(_.easing=s);const b=new Map,S=o.filter(k=>k instanceof nE);(function Tj(n,e){return 0===n||0===e})(i,r)&&S.forEach(k=>{k.currentSnapshot.forEach((B,H)=>b.set(H,B))});let T=function wj(n){return n.length?n[0]instanceof Map?n:n.map(e=>LS(e)):[]}(t).map(k=>Sr(k));T=function Mj(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(h=>o.set(h,US(n,h)))}}return e}(e,T,b);const P=function y4(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=Mg(e[0]),e.length>1&&(i=Mg(e[e.length-1]))):e instanceof Map&&(t=Mg(e)),t||i?new C4(n,t,i):null}(e,T);return new nE(e,T,_,P)}}let D4=(()=>{class n extends CS{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Zn.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?bS(t):t;return iE(this._renderer,null,i,"register",[r]),new S4(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(ye(Bo),ye(Tt))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();class S4 extends kB{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new E4(this._id,e,t||{},this._renderer)}}class E4{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return iE(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function iE(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const rE="@.disabled";let T4=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const h=o?.parentNode(s);h&&o.removeChild(h,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let S=this._rendererCache.get(s);return S||(S=new sE("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,S)),S}const o=i.id,h=i.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const _=S=>{Array.isArray(S)?S.forEach(_):this.engine.registerTrigger(o,h,t,S.name,S)};return i.data.animation.forEach(_),new M4(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,h]=s;o(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(ye(Bo),ye(Ru),ye(ct))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();class sE{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==rE?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class M4 extends sE{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==rE?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function x4(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function A4(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,h=>{this.factory.scheduleListenerCallback(h._data||-1,i,h)})}return this.delegate.listen(e,t,i)}}let I4=(()=>{class n extends Ru{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(ye(Tt),ye(ug),ye(bg),ye(oa))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();const oE=[{provide:CS,useClass:D4},{provide:bg,useFactory:function O4(){return new Kj}},{provide:Ru,useClass:I4},{provide:Bo,useFactory:function P4(n,e,t){return new T4(n,e,t)},deps:[Dc,Ru,ct]}],xg=[{provide:ug,useFactory:()=>new w4},{provide:L0,useValue:"BrowserAnimations"},...oE],aE=[{provide:ug,useClass:RS},{provide:L0,useValue:"NoopAnimations"},...oE];let R4=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?aE:xg}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xt({type:n}),n.\u0275inj=$t({providers:xg,imports:[ib]}),n})();function k4(){return Mi.e(487).then(Mi.t.bind(Mi,487,23))}let F4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Xt({type:n,bootstrap:[RB]}),n.\u0275inj=$t({imports:[SB,H6.forRoot({player:k4}),ib,HV,PB,x6,R4]}),n})();Qk().bootstrapModule(F4).catch(n=>console.error(n))},621:(Ka,We,Mi)=>{var y,f,m,p,l,u,w=w||{version:"5.3.0"};if(We.fabric=w,typeof document<"u"&&typeof window<"u")w.document=document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?document:document.implementation.createHTMLDocument(""),w.window=window;else{var mn=new(Mi(960).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;w.document=mn.document,w.jsdomImplForWrapper=Mi(759).implForWrapper,w.nodeCanvas=Mi(272).Canvas,w.window=mn,DOMParser=w.window.DOMParser}function tr(y,f){var m=y.canvas,p=f.targetCanvas,l=p.getContext("2d");l.translate(0,p.height),l.scale(1,-1),l.drawImage(m,0,m.height-p.height,p.width,p.height,0,0,p.width,p.height)}function di(y,f){var p=f.targetCanvas.getContext("2d"),l=f.destinationWidth,u=f.destinationHeight,a=l*u*4,d=new Uint8Array(this.imageBuffer,0,a),g=new Uint8ClampedArray(this.imageBuffer,0,a);y.readPixels(0,0,l,u,y.RGBA,y.UNSIGNED_BYTE,d);var c=new ImageData(g,l,u);p.putImageData(c,0,0)}w.isTouchSupported="ontouchstart"in w.window||"ontouchstart"in w.document||w.window&&w.window.navigator&&w.window.navigator.maxTouchPoints>0,w.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",w.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],w.DPI=96,w.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",w.commaWsp="(?:\\s+,?\\s*|,\\s*)",w.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,w.reNonWord=/[ \n\.,;!\?\-]/,w.fontPaths={},w.iMatrix=[1,0,0,1,0,0],w.svgNS="http://www.w3.org/2000/svg",w.perfLimitSizeTotal=2097152,w.maxCacheSideLimit=4096,w.minCacheSideLimit=256,w.charWidthsCache={},w.textureSize=2048,w.disableStyleCopyPaste=!1,w.enableGLFiltering=!0,w.devicePixelRatio=w.window.devicePixelRatio||w.window.webkitDevicePixelRatio||w.window.mozDevicePixelRatio||1,w.browserShadowBlurConstant=1,w.arcToSegmentsCache={},w.boundsOfCurveCache={},w.cachesBoundsOfCurve=!0,w.forceGLPutImageData=!1,w.initFilterBackend=function(){return w.enableGLFiltering&&w.isWebglSupported&&w.isWebglSupported(w.textureSize)?(console.log("max texture size: "+w.maxTextureSize),new w.WebglFilterBackend({tileSize:w.textureSize})):w.Canvas2dFilterBackend?new w.Canvas2dFilterBackend:void 0},typeof document<"u"&&typeof window<"u"&&(window.fabric=w),function(){function y(a,d){if(this.__eventListeners[a]){var g=this.__eventListeners[a];d?g[g.indexOf(d)]=!1:w.util.array.fill(g,!1)}}function m(a,d){var g=function(){d.apply(this,arguments),this.off(a,g)}.bind(this);this.on(a,g)}w.Observable={fire:function u(a,d){if(!this.__eventListeners)return this;var g=this.__eventListeners[a];if(!g)return this;for(var c=0,v=g.length;c<v;c++)g[c]&&g[c].call(this,d||{});return this.__eventListeners[a]=g.filter(function(C){return!1!==C}),this},on:function f(a,d){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var g in a)this.on(g,a[g]);else this.__eventListeners[a]||(this.__eventListeners[a]=[]),this.__eventListeners[a].push(d);return this},once:function p(a,d){if(1===arguments.length)for(var g in a)m.call(this,g,a[g]);else m.call(this,a,d);return this},off:function l(a,d){if(!this.__eventListeners)return this;if(0===arguments.length)for(a in this.__eventListeners)y.call(this,a);else if(1===arguments.length&&"object"==typeof arguments[0])for(var g in a)y.call(this,g,a[g]);else y.call(this,a,d);return this}}}(),w.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var y=0,f=arguments.length;y<f;y++)this._onObjectAdded(arguments[y]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(y,f,m){var p=this._objects;return m?p[f]=y:p.splice(f,0,y),this._onObjectAdded&&this._onObjectAdded(y),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var f,y=this._objects,m=!1,p=0,l=arguments.length;p<l;p++)-1!==(f=y.indexOf(arguments[p]))&&(m=!0,y.splice(f,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[p]));return this.renderOnAddRemove&&m&&this.requestRenderAll(),this},forEachObject:function(y,f){for(var m=this.getObjects(),p=0,l=m.length;p<l;p++)y.call(f,m[p],p,m);return this},getObjects:function(y){return typeof y>"u"?this._objects.concat():this._objects.filter(function(f){return f.type===y})},item:function(y){return this._objects[y]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(y,f){return this._objects.indexOf(y)>-1||!!f&&this._objects.some(function(m){return"function"==typeof m.contains&&m.contains(y,!0)})},complexity:function(){return this._objects.reduce(function(y,f){return y+(f.complexity?f.complexity():0)},0)}},w.CommonMethods={_setOptions:function(y){for(var f in y)this.set(f,y[f])},_initGradient:function(y,f){y&&y.colorStops&&!(y instanceof w.Gradient)&&this.set(f,new w.Gradient(y))},_initPattern:function(y,f,m){!y||!y.source||y instanceof w.Pattern?m&&m():this.set(f,new w.Pattern(y,m))},_setObject:function(y){for(var f in y)this._set(f,y[f])},set:function(y,f){return"object"==typeof y?this._setObject(y):this._set(y,f),this},_set:function(y,f){this[y]=f},toggle:function(y){var f=this.get(y);return"boolean"==typeof f&&this.set(y,!f),this},get:function(y){return this[y]}},y=We,f=Math.sqrt,m=Math.atan2,p=Math.pow,l=Math.PI/180,u=Math.PI/2,w.util={cos:function(a){if(0===a)return 1;switch(a<0&&(a=-a),a/u){case 1:case 3:return 0;case 2:return-1}return Math.cos(a)},sin:function(a){if(0===a)return 0;var g=1;switch(a<0&&(g=-1),a/u){case 1:return g;case 2:return 0;case 3:return-g}return Math.sin(a)},removeFromArray:function(a,d){var g=a.indexOf(d);return-1!==g&&a.splice(g,1),a},getRandomInt:function(a,d){return Math.floor(Math.random()*(d-a+1))+a},degreesToRadians:function(a){return a*l},radiansToDegrees:function(a){return a/l},rotatePoint:function(a,d,g){var c=new w.Point(a.x-d.x,a.y-d.y),v=w.util.rotateVector(c,g);return new w.Point(v.x,v.y).addEquals(d)},rotateVector:function(a,d){var g=w.util.sin(d),c=w.util.cos(d);return{x:a.x*c-a.y*g,y:a.x*g+a.y*c}},createVector:function(a,d){return new w.Point(d.x-a.x,d.y-a.y)},calcAngleBetweenVectors:function(a,d){return Math.acos((a.x*d.x+a.y*d.y)/(Math.hypot(a.x,a.y)*Math.hypot(d.x,d.y)))},getHatVector:function(a){return new w.Point(a.x,a.y).multiply(1/Math.hypot(a.x,a.y))},getBisector:function(a,d,g){var c=w.util.createVector(a,d),v=w.util.createVector(a,g),C=w.util.calcAngleBetweenVectors(c,v),D=w.util.calcAngleBetweenVectors(w.util.rotateVector(c,C),v);return{vector:w.util.getHatVector(w.util.rotateVector(c,C*(0===D?1:-1)/2)),angle:C}},projectStrokeOnPoints:function(a,d,g){var c=[],v=d.strokeWidth/2,C=d.strokeUniform?new w.Point(1/d.scaleX,1/d.scaleY):new w.Point(1,1),D=function(E){var M=v/Math.hypot(E.x,E.y);return new w.Point(E.x*M*C.x,E.y*M*C.y)};return a.length<=1||a.forEach(function(E,M){var R,j,x=new w.Point(E.x,E.y);0===M?(j=a[M+1],R=g?D(w.util.createVector(j,x)).addEquals(x):a[a.length-1]):M===a.length-1?(R=a[M-1],j=g?D(w.util.createVector(R,x)).addEquals(x):a[0]):(R=a[M-1],j=a[M+1]);var le,De,q=w.util.getBisector(x,R,j),he=q.vector;if("miter"===d.strokeLineJoin&&(le=-v/Math.sin(q.angle/2),De=new w.Point(he.x*le*C.x,he.y*le*C.y),Math.hypot(De.x,De.y)/v<=d.strokeMiterLimit))return c.push(x.add(De)),void c.push(x.subtract(De));le=-v*Math.SQRT2,De=new w.Point(he.x*le*C.x,he.y*le*C.y),c.push(x.add(De)),c.push(x.subtract(De))}),c},transformPoint:function(a,d,g){return g?new w.Point(d[0]*a.x+d[2]*a.y,d[1]*a.x+d[3]*a.y):new w.Point(d[0]*a.x+d[2]*a.y+d[4],d[1]*a.x+d[3]*a.y+d[5])},makeBoundingBoxFromPoints:function(a,d){if(d)for(var g=0;g<a.length;g++)a[g]=w.util.transformPoint(a[g],d);var c=[a[0].x,a[1].x,a[2].x,a[3].x],v=w.util.array.min(c),D=w.util.array.max(c)-v,E=[a[0].y,a[1].y,a[2].y,a[3].y],M=w.util.array.min(E);return{left:v,top:M,width:D,height:w.util.array.max(E)-M}},invertTransform:function(a){var d=1/(a[0]*a[3]-a[1]*a[2]),g=[d*a[3],-d*a[1],-d*a[2],d*a[0]],c=w.util.transformPoint({x:a[4],y:a[5]},g,!0);return g[4]=-c.x,g[5]=-c.y,g},toFixed:function(a,d){return parseFloat(Number(a).toFixed(d))},parseUnit:function(a,d){var g=/\D{0,2}$/.exec(a),c=parseFloat(a);switch(d||(d=w.Text.DEFAULT_SVG_FONT_SIZE),g[0]){case"mm":return c*w.DPI/25.4;case"cm":return c*w.DPI/2.54;case"in":return c*w.DPI;case"pt":return c*w.DPI/72;case"pc":return c*w.DPI/72*12;case"em":return c*d;default:return c}},falseFunction:function(){return!1},getKlass:function(a,d){return a=w.util.string.camelize(a.charAt(0).toUpperCase()+a.slice(1)),w.util.resolveNamespace(d)[a]},getSvgAttributes:function(a){var d=["instantiated_by_use","style","id","class"];switch(a){case"linearGradient":d=d.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":d=d.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":d=d.concat(["offset","stop-color","stop-opacity"])}return d},resolveNamespace:function(a){if(!a)return w;var c,d=a.split("."),g=d.length,v=y||w.window;for(c=0;c<g;++c)v=v[d[c]];return v},loadImage:function(a,d,g,c){if(a){var v=w.util.createImage(),C=function(){d&&d.call(g,v,!1),v=v.onload=v.onerror=null};v.onload=C,v.onerror=function(){w.log("Error loading "+v.src),d&&d.call(g,null,!0),v=v.onload=v.onerror=null},0!==a.indexOf("data")&&null!=c&&(v.crossOrigin=c),"data:image/svg"===a.substring(0,14)&&(v.onload=null,w.util.loadImageInDom(v,C)),v.src=a}else d&&d.call(g,a)},loadImageInDom:function(a,d){var g=w.document.createElement("div");g.style.width=g.style.height="1px",g.style.left=g.style.top="-100%",g.style.position="absolute",g.appendChild(a),w.document.querySelector("body").appendChild(g),a.onload=function(){d(),g.parentNode.removeChild(g),g=null}},enlivenObjects:function(a,d,g,c){var v=[],C=0,D=(a=a||[]).length;function E(){++C===D&&d&&d(v.filter(function(M){return M}))}D?a.forEach(function(M,x){M&&M.type?w.util.getKlass(M.type,g).fromObject(M,function(j,q){q||(v[x]=j),c&&c(M,j,q),E()}):E()}):d&&d(v)},enlivenObjectEnlivables:function(a,d,g){var c=w.Object.ENLIVEN_PROPS.filter(function(v){return!!a[v]});w.util.enlivenObjects(c.map(function(v){return a[v]}),function(v){var C={};c.forEach(function(D,E){C[D]=v[E],d&&(d[D]=v[E])}),g&&g(C)})},enlivenPatterns:function(a,d){function g(){++v===C&&d&&d(c)}var c=[],v=0,C=(a=a||[]).length;C?a.forEach(function(D,E){D&&D.source?new w.Pattern(D,function(M){c[E]=M,g()}):(c[E]=D,g())}):d&&d(c)},groupSVGElements:function(a,d,g){var c;return a&&1===a.length?(typeof g<"u"&&(a[0].sourcePath=g),a[0]):(d&&(d.width&&d.height?d.centerPoint={x:d.width/2,y:d.height/2}:(delete d.width,delete d.height)),c=new w.Group(a,d),typeof g<"u"&&(c.sourcePath=g),c)},populateWithProperties:function(a,d,g){if(g&&Array.isArray(g))for(var c=0,v=g.length;c<v;c++)g[c]in a&&(d[g[c]]=a[g[c]])},createCanvasElement:function(){return w.document.createElement("canvas")},copyCanvasElement:function(a){var d=w.util.createCanvasElement();return d.width=a.width,d.height=a.height,d.getContext("2d").drawImage(a,0,0),d},toDataURL:function(a,d,g){return a.toDataURL("image/"+d,g)},createImage:function(){return w.document.createElement("img")},multiplyTransformMatrices:function(a,d,g){return[a[0]*d[0]+a[2]*d[1],a[1]*d[0]+a[3]*d[1],a[0]*d[2]+a[2]*d[3],a[1]*d[2]+a[3]*d[3],g?0:a[0]*d[4]+a[2]*d[5]+a[4],g?0:a[1]*d[4]+a[3]*d[5]+a[5]]},qrDecompose:function(a){var d=m(a[1],a[0]),g=p(a[0],2)+p(a[1],2),c=f(g),v=(a[0]*a[3]-a[2]*a[1])/c,C=m(a[0]*a[2]+a[1]*a[3],g);return{angle:d/l,scaleX:c,scaleY:v,skewX:C/l,skewY:0,translateX:a[4],translateY:a[5]}},calcRotateMatrix:function(a){if(!a.angle)return w.iMatrix.concat();var d=w.util.degreesToRadians(a.angle),g=w.util.cos(d),c=w.util.sin(d);return[g,c,-c,g,0,0]},calcDimensionsMatrix:function(a){var d=typeof a.scaleX>"u"?1:a.scaleX,g=typeof a.scaleY>"u"?1:a.scaleY,c=[a.flipX?-d:d,0,0,a.flipY?-g:g,0,0],v=w.util.multiplyTransformMatrices,C=w.util.degreesToRadians;return a.skewX&&(c=v(c,[1,0,Math.tan(C(a.skewX)),1],!0)),a.skewY&&(c=v(c,[1,Math.tan(C(a.skewY)),0,1],!0)),c},composeMatrix:function(a){var d=[1,0,0,1,a.translateX||0,a.translateY||0],g=w.util.multiplyTransformMatrices;return a.angle&&(d=g(d,w.util.calcRotateMatrix(a))),(1!==a.scaleX||1!==a.scaleY||a.skewX||a.skewY||a.flipX||a.flipY)&&(d=g(d,w.util.calcDimensionsMatrix(a))),d},resetObjectTransform:function(a){a.scaleX=1,a.scaleY=1,a.skewX=0,a.skewY=0,a.flipX=!1,a.flipY=!1,a.rotate(0)},saveObjectTransform:function(a){return{scaleX:a.scaleX,scaleY:a.scaleY,skewX:a.skewX,skewY:a.skewY,angle:a.angle,left:a.left,flipX:a.flipX,flipY:a.flipY,top:a.top}},isTransparent:function(a,d,g,c){c>0&&(d>c?d-=c:d=0,g>c?g-=c:g=0);var C,v=!0,E=a.getImageData(d,g,2*c||1,2*c||1),M=E.data.length;for(C=3;C<M&&0!=(v=E.data[C]<=0);C+=4);return E=null,v},parsePreserveAspectRatioAttribute:function(a){var C,d="meet",v=a.split(" ");return v&&v.length&&("meet"!==(d=v.pop())&&"slice"!==d?(C=d,d="meet"):v.length&&(C=v.pop())),{meetOrSlice:d,alignX:"none"!==C?C.slice(1,4):"none",alignY:"none"!==C?C.slice(5,8):"none"}},clearFabricFontCache:function(a){(a=(a||"").toLowerCase())?w.charWidthsCache[a]&&delete w.charWidthsCache[a]:w.charWidthsCache={}},limitDimsByArea:function(a,d){var g=Math.sqrt(d*a),c=Math.floor(d/g);return{x:Math.floor(g),y:c}},capValue:function(a,d,g){return Math.max(a,Math.min(d,g))},findScaleToFit:function(a,d){return Math.min(d.width/a.width,d.height/a.height)},findScaleToCover:function(a,d){return Math.max(d.width/a.width,d.height/a.height)},matrixToSVG:function(a){return"matrix("+a.map(function(d){return w.util.toFixed(d,w.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(a,d){var g=w.util.invertTransform(d),c=w.util.multiplyTransformMatrices(g,a.calcOwnMatrix());w.util.applyTransformToObject(a,c)},addTransformToObject:function(a,d){w.util.applyTransformToObject(a,w.util.multiplyTransformMatrices(d,a.calcOwnMatrix()))},applyTransformToObject:function(a,d){var g=w.util.qrDecompose(d),c=new w.Point(g.translateX,g.translateY);a.flipX=!1,a.flipY=!1,a.set("scaleX",g.scaleX),a.set("scaleY",g.scaleY),a.skewX=g.skewX,a.skewY=g.skewY,a.angle=g.angle,a.setPositionByOrigin(c,"center","center")},sizeAfterTransform:function(a,d,g){var c=a/2,v=d/2,C=[{x:-c,y:-v},{x:c,y:-v},{x:-c,y:v},{x:c,y:v}],D=w.util.calcDimensionsMatrix(g),E=w.util.makeBoundingBoxFromPoints(C,D);return{x:E.width,y:E.height}},mergeClipPaths:function(a,d){var g=a,c=d;g.inverted&&!c.inverted&&(g=d,c=a),w.util.applyTransformToObject(c,w.util.multiplyTransformMatrices(w.util.invertTransform(g.calcTransformMatrix()),c.calcTransformMatrix()));var v=g.inverted&&c.inverted;return v&&(g.inverted=c.inverted=!1),new w.Group([g],{clipPath:c,inverted:v})},hasStyleChanged:function(a,d,g){return g=g||!1,a.fill!==d.fill||a.stroke!==d.stroke||a.strokeWidth!==d.strokeWidth||a.fontSize!==d.fontSize||a.fontFamily!==d.fontFamily||a.fontWeight!==d.fontWeight||a.fontStyle!==d.fontStyle||a.textBackgroundColor!==d.textBackgroundColor||a.deltaY!==d.deltaY||g&&(a.overline!==d.overline||a.underline!==d.underline||a.linethrough!==d.linethrough)},stylesToArray:function(g,d){g=w.util.object.clone(g,!0);for(var c=d.split("\n"),v=-1,C={},D=[],E=0;E<c.length;E++)if(g[E])for(var M=0;M<c[E].length;M++){v++;var x=g[E][M];x&&Object.keys(x).length>0&&(w.util.hasStyleChanged(C,x,!0)?D.push({start:v,end:v+1,style:x}):D[D.length-1].end++),C=x||{}}else v+=c[E].length;return D},stylesFromArray:function(a,d){if(!Array.isArray(a))return a;for(var g=d.split("\n"),c=-1,v=0,C={},D=0;D<g.length;D++)for(var E=0;E<g[D].length;E++)c++,a[v]&&a[v].start<=c&&c<a[v].end&&(C[D]=C[D]||{},C[D][E]=Object.assign({},a[v].style),c===a[v].end-1&&v++);return C}},function(){var y=Array.prototype.join,f={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},m={m:"l",M:"L"};function p(I,V,L,N,Y,F,O,U,$,re,X){var ue=w.util.cos(I),ge=w.util.sin(I),Ce=w.util.cos(V),J=w.util.sin(V),z=L*Y*Ce-N*F*J+O,K=N*Y*Ce+L*F*J+U;return["C",re+$*(-L*Y*ge-N*F*ue),X+$*(-N*Y*ge+L*F*ue),z+$*(L*Y*J+N*F*Ce),K+$*(N*Y*J-L*F*Ce),z,K]}function u(I,V,L,N){var Y=Math.atan2(V,I),F=Math.atan2(N,L);return F>=Y?F-Y:2*Math.PI-(Y-F)}function d(I,V,L){for(var X=function l(I,V,L,N,Y,F,O){var U=Math.PI,$=O*U/180,re=w.util.sin($),X=w.util.cos($),ue=0,ge=0,Ce=-X*I*.5-re*V*.5,J=-X*V*.5+re*I*.5,z=(L=Math.abs(L))*L,K=(N=Math.abs(N))*N,oe=J*J,te=Ce*Ce,ce=z*K-z*oe-K*te,be=0;if(ce<0){var Be=Math.sqrt(1-ce/(z*K));L*=Be,N*=Be}else be=(Y===F?-1:1)*Math.sqrt(ce/(z*oe+K*te));var Se=be*L*J/N,ae=-be*N*Ce/L,ke=X*Se-re*ae+.5*I,qe=re*Se+X*ae+.5*V,Ze=u(1,0,(Ce-Se)/L,(J-ae)/N),vt=u((Ce-Se)/L,(J-ae)/N,(-Ce-Se)/L,(-J-ae)/N);0===F&&vt>0?vt-=2*U:1===F&&vt<0&&(vt+=2*U);for(var rt=Math.ceil(Math.abs(vt/U*2)),Nt=[],Ot=vt/rt,xi=8/3*Math.sin(Ot/4)*Math.sin(Ot/4)/Math.sin(Ot/2),Ai=Ze+Ot,Fn=0;Fn<rt;Fn++)Nt[Fn]=p(Ze,Ai,X,re,L,N,ke,qe,xi,ue,ge),ue=Nt[Fn][5],ge=Nt[Fn][6],Ze=Ai,Ai+=Ot;return Nt}(L[6]-I,L[7]-V,L[1],L[2],L[4],L[5],L[3]),ue=0,ge=X.length;ue<ge;ue++)X[ue][1]+=I,X[ue][2]+=V,X[ue][3]+=I,X[ue][4]+=V,X[ue][5]+=I,X[ue][6]+=V;return X}function c(I,V,L,N){return Math.sqrt((L-I)*(L-I)+(N-V)*(N-V))}function M(I,V,L,N,Y,F,O,U){return function($){var re=function v(I){return I*I*I}($),X=function C(I){return 3*I*I*(1-I)}($),ue=function D(I){return 3*I*(1-I)*(1-I)}($),ge=function E(I){return(1-I)*(1-I)*(1-I)}($);return{x:O*re+Y*X+L*ue+I*ge,y:U*re+F*X+N*ue+V*ge}}}function x(I,V,L,N,Y,F,O,U){return function($){var re=1-$;return Math.atan2(3*re*re*(N-V)+6*re*$*(F-N)+3*$*$*(U-F),3*re*re*(L-I)+6*re*$*(Y-L)+3*$*$*(O-Y))}}function he(I,V,L,N,Y,F){return function(O){var U=function R(I){return I*I}(O),$=function j(I){return 2*I*(1-I)}(O),re=function q(I){return(1-I)*(1-I)}(O);return{x:Y*U+L*$+I*re,y:F*U+N*$+V*re}}}function me(I,V,L,N,Y,F){return function(O){var U=1-O;return Math.atan2(2*U*(N-V)+2*O*(F-N),2*U*(L-I)+2*O*(Y-L))}}function le(I,V,L){var Y,O,N={x:V,y:L},F=0;for(O=1;O<=100;O+=1)Y=I(O/100),F+=c(N.x,N.y,Y.x,Y.y),N=Y;return F}function _e(I){for(var N,re,X,ue,V=0,L=I.length,Y=0,F=0,O=0,U=0,$=[],ge=0;ge<L;ge++){switch(X={x:Y,y:F,command:(N=I[ge])[0]},N[0]){case"M":X.length=0,O=Y=N[1],U=F=N[2];break;case"L":X.length=c(Y,F,N[1],N[2]),Y=N[1],F=N[2];break;case"C":re=M(Y,F,N[1],N[2],N[3],N[4],N[5],N[6]),ue=x(Y,F,N[1],N[2],N[3],N[4],N[5],N[6]),X.iterator=re,X.angleFinder=ue,X.length=le(re,Y,F),Y=N[5],F=N[6];break;case"Q":re=he(Y,F,N[1],N[2],N[3],N[4]),ue=me(Y,F,N[1],N[2],N[3],N[4]),X.iterator=re,X.angleFinder=ue,X.length=le(re,Y,F),Y=N[3],F=N[4];break;case"Z":case"z":X.destX=O,X.destY=U,X.length=c(Y,F,O,U),Y=O,F=U}V+=X.length,$.push(X)}return $.push({length:V,x:Y,y:F}),$}w.util.joinPath=function(I){return I.map(function(V){return V.join(" ")}).join(" ")},w.util.parsePath=function xe(I){var N,Y,ue,ge,Ce,V=[],L=[],F=w.rePathCommand,O="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",U="("+O+")"+w.commaWsp,$="([01])"+w.commaWsp+"?",X=new RegExp(U+"?"+U+"?"+U+$+$+U+"?("+O+")","g");if(!I||!I.match)return V;for(var z,J=0,K=(Ce=I.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;J<K;J++){ge=(N=Ce[J]).slice(1).trim(),L.length=0;var oe=N.charAt(0);if(z=[oe],"a"===oe.toLowerCase())for(var te;te=X.exec(ge);)for(var ce=1;ce<te.length;ce++)L.push(te[ce]);else for(;ue=F.exec(ge);)L.push(ue[0]);ce=0;for(var be=L.length;ce<be;ce++)Y=parseFloat(L[ce]),isNaN(Y)||z.push(Y);var Be=f[oe.toLowerCase()],Se=m[oe]||oe;if(z.length-1>Be)for(var ae=1,ke=z.length;ae<ke;ae+=Be)V.push([oe].concat(z.slice(ae,ae+Be))),oe=Se;else V.push(z)}return V},w.util.makePathSimpler=function g(I){var O,U,$,X,ue,ge,V=0,L=0,N=I.length,Y=0,F=0,re=[];for(U=0;U<N;++U){switch($=!1,(O=I[U].slice(0))[0]){case"l":O[0]="L",O[1]+=V,O[2]+=L;case"L":V=O[1],L=O[2];break;case"h":O[1]+=V;case"H":O[0]="L",O[2]=L,V=O[1];break;case"v":O[1]+=L;case"V":O[0]="L",L=O[1],O[1]=V,O[2]=L;break;case"m":O[0]="M",O[1]+=V,O[2]+=L;case"M":V=O[1],L=O[2],Y=O[1],F=O[2];break;case"c":O[0]="C",O[1]+=V,O[2]+=L,O[3]+=V,O[4]+=L,O[5]+=V,O[6]+=L;case"C":ue=O[3],ge=O[4],V=O[5],L=O[6];break;case"s":O[0]="S",O[1]+=V,O[2]+=L,O[3]+=V,O[4]+=L;case"S":"C"===X?(ue=2*V-ue,ge=2*L-ge):(ue=V,ge=L),V=O[3],L=O[4],O[0]="C",O[5]=O[3],O[6]=O[4],O[3]=O[1],O[4]=O[2],O[1]=ue,O[2]=ge,ue=O[3],ge=O[4];break;case"q":O[0]="Q",O[1]+=V,O[2]+=L,O[3]+=V,O[4]+=L;case"Q":ue=O[1],ge=O[2],V=O[3],L=O[4];break;case"t":O[0]="T",O[1]+=V,O[2]+=L;case"T":"Q"===X?(ue=2*V-ue,ge=2*L-ge):(ue=V,ge=L),O[0]="Q",V=O[1],L=O[2],O[1]=ue,O[2]=ge,O[3]=V,O[4]=L;break;case"a":O[0]="A",O[6]+=V,O[7]+=L;case"A":$=!0,re=re.concat(d(V,L,O)),V=O[6],L=O[7];break;case"z":case"Z":V=Y,L=F}$||re.push(O),X=O[0]}return re},w.util.getSmoothPathFromPoints=function Re(I,V){var N,L=[],Y=new w.Point(I[0].x,I[0].y),F=new w.Point(I[1].x,I[1].y),O=I.length,U=1,$=0,re=O>2;for(re&&(U=I[2].x<F.x?-1:I[2].x===F.x?0:1,$=I[2].y<F.y?-1:I[2].y===F.y?0:1),L.push(["M",Y.x-U*(V=V||0),Y.y-$*V]),N=1;N<O;N++){if(!Y.eq(F)){var X=Y.midPointFrom(F);L.push(["Q",Y.x,Y.y,X.x,X.y])}Y=I[N],N+1<I.length&&(F=I[N+1])}return re&&(U=Y.x>I[N-2].x?1:Y.x===I[N-2].x?0:-1,$=Y.y>I[N-2].y?1:Y.y===I[N-2].y?0:-1),L.push(["L",Y.x+U*V,Y.y+$*V]),L},w.util.getPathSegmentsInfo=_e,w.util.getBoundsOfCurve=function a(I,V,L,N,Y,F,O,U){var $;if(w.cachesBoundsOfCurve&&($=y.call(arguments),w.boundsOfCurveCache[$]))return w.boundsOfCurveCache[$];var z,K,oe,te,ce,be,Be,Se,re=Math.sqrt,X=Math.min,ue=Math.max,ge=Math.abs,Ce=[],J=[[],[]];K=6*I-12*L+6*Y,z=-3*I+9*L-9*Y+3*O,oe=3*L-3*I;for(var ae=0;ae<2;++ae)if(ae>0&&(K=6*V-12*N+6*F,z=-3*V+9*N-9*F+3*U,oe=3*N-3*V),ge(z)<1e-12){if(ge(K)<1e-12)continue;0<(te=-oe/K)&&te<1&&Ce.push(te)}else!((Be=K*K-4*oe*z)<0)&&(0<(ce=(-K+(Se=re(Be)))/(2*z))&&ce<1&&Ce.push(ce),0<(be=(-K-Se)/(2*z))&&be<1&&Ce.push(be));for(var rt,Ze=Ce.length,vt=Ze;Ze--;)J[0][Ze]=(rt=1-(te=Ce[Ze]))*rt*rt*I+3*rt*rt*te*L+3*rt*te*te*Y+te*te*te*O,J[1][Ze]=rt*rt*rt*V+3*rt*rt*te*N+3*rt*te*te*F+te*te*te*U;J[0][vt]=I,J[1][vt]=V,J[0][vt+1]=O,J[1][vt+1]=U;var Nt=[{x:X.apply(null,J[0]),y:X.apply(null,J[1])},{x:ue.apply(null,J[0]),y:ue.apply(null,J[1])}];return w.cachesBoundsOfCurve&&(w.boundsOfCurveCache[$]=Nt),Nt},w.util.getPointOnPath=function ie(I,V,L){L||(L=_e(I));for(var N=0;V-L[N].length>0&&N<L.length-2;)V-=L[N].length,N++;var $,Y=L[N],F=V/Y.length,U=I[N];switch(Y.command){case"M":return{x:Y.x,y:Y.y,angle:0};case"Z":case"z":return($=new w.Point(Y.x,Y.y).lerp(new w.Point(Y.destX,Y.destY),F)).angle=Math.atan2(Y.destY-Y.y,Y.destX-Y.x),$;case"L":return($=new w.Point(Y.x,Y.y).lerp(new w.Point(U[1],U[2]),F)).angle=Math.atan2(U[2]-Y.y,U[1]-Y.x),$;case"C":case"Q":return function De(I,V){for(var O,U,X,L=0,N=0,Y=I.iterator,F={x:I.x,y:I.y},$=.01,re=I.angleFinder;N<V&&$>1e-4;)O=Y(L),X=L,(U=c(F.x,F.y,O.x,O.y))+N>V?(L-=$,$/=2):(F=O,L+=$,N+=U);return O.angle=re(X),O}(Y,V)}},w.util.transformPath=function Ae(I,V,L){return L&&(V=w.util.multiplyTransformMatrices(V,[1,0,0,1,-L.x,-L.y])),I.map(function(N){for(var Y=N.slice(0),F={},O=1;O<N.length-1;O+=2)F.x=N[O],F.y=N[O+1],F=w.util.transformPoint(F,V),Y[O]=F.x,Y[O+1]=F.y;return Y})}}(),function(){var y=Array.prototype.slice;function u(a,d,g){if(a&&0!==a.length){var c=a.length-1,v=d?a[c][d]:a[c];if(d)for(;c--;)g(a[c][d],v)&&(v=a[c][d]);else for(;c--;)g(a[c],v)&&(v=a[c]);return v}}w.util.array={fill:function l(a,d){for(var g=a.length;g--;)a[g]=d;return a},invoke:function f(a,d){for(var g=y.call(arguments,2),c=[],v=0,C=a.length;v<C;v++)c[v]=g.length?a[v][d].apply(a[v],g):a[v][d].call(a[v]);return c},min:function p(a,d){return u(a,d,function(g,c){return g<c})},max:function m(a,d){return u(a,d,function(g,c){return g>=c})}}}(),function(){function y(m,p,l){if(l)if(!w.isLikelyNode&&p instanceof Element)m=p;else if(p instanceof Array){m=[];for(var u=0,a=p.length;u<a;u++)m[u]=y({},p[u],l)}else if(p&&"object"==typeof p)for(var d in p)"canvas"===d||"group"===d?m[d]=null:p.hasOwnProperty(d)&&(m[d]=y({},p[d],l));else m=p;else for(var d in p)m[d]=p[d];return m}w.util.object={extend:y,clone:function f(m,p){return y({},m,p)}},w.util.object.extend(w.util,w.Observable)}(),function(){function l(u,a){var d=u.charCodeAt(a);if(isNaN(d))return"";if(d<55296||d>57343)return u.charAt(a);if(55296<=d&&d<=56319){if(u.length<=a+1)throw"High surrogate without following low surrogate";var g=u.charCodeAt(a+1);if(56320>g||g>57343)throw"High surrogate without following low surrogate";return u.charAt(a)+u.charAt(a+1)}if(0===a)throw"Low surrogate without preceding high surrogate";var c=u.charCodeAt(a-1);if(55296>c||c>56319)throw"Low surrogate without preceding high surrogate";return!1}w.util.string={camelize:function y(u){return u.replace(/-+(.)?/g,function(a,d){return d?d.toUpperCase():""})},capitalize:function f(u,a){return u.charAt(0).toUpperCase()+(a?u.slice(1):u.slice(1).toLowerCase())},escapeXml:function m(u){return u.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function p(u){var d,a=0,g=[];for(a=0;a<u.length;a++)!1!==(d=l(u,a))&&g.push(d);return g}}}(),function(){var y=Array.prototype.slice,f=function(){},m=function(){for(var d in{toString:1})if("toString"===d)return!1;return!0}(),p=function(d,g,c){for(var v in g)d.prototype[v]=v in d.prototype&&"function"==typeof d.prototype[v]&&(g[v]+"").indexOf("callSuper")>-1?function(C){return function(){var D=this.constructor.superclass;this.constructor.superclass=c;var E=g[C].apply(this,arguments);if(this.constructor.superclass=D,"initialize"!==C)return E}}(v):g[v],m&&(g.toString!==Object.prototype.toString&&(d.prototype.toString=g.toString),g.valueOf!==Object.prototype.valueOf&&(d.prototype.valueOf=g.valueOf))};function l(){}function u(d){for(var g=null,c=this;c.constructor.superclass;){var v=c.constructor.superclass.prototype[d];if(c[d]!==v){g=v;break}c=c.constructor.superclass.prototype}return g?arguments.length>1?g.apply(this,y.call(arguments,1)):g.call(this):console.log("tried to callSuper "+d+", method not found in prototype chain",this)}w.util.createClass=function a(){var d=null,g=y.call(arguments,0);function c(){this.initialize.apply(this,arguments)}"function"==typeof g[0]&&(d=g.shift()),c.superclass=d,c.subclasses=[],d&&(l.prototype=d.prototype,c.prototype=new l,d.subclasses.push(c));for(var v=0,C=g.length;v<C;v++)p(c,g[v],d);return c.prototype.initialize||(c.prototype.initialize=f),c.prototype.constructor=c,c.prototype.callSuper=u,c}}(),function(){var y=!!w.document.createElement("div").attachEvent,f=["touchstart","touchmove","touchend"];w.util.addListener=function(p,l,u,a){p&&p.addEventListener(l,u,!y&&a)},w.util.removeListener=function(p,l,u,a){p&&p.removeEventListener(l,u,!y&&a)},w.util.getPointer=function(p){var u=w.util.getScrollLeftTop(p.target),a=function m(p){var l=p.changedTouches;return l&&l[0]?l[0]:p}(p);return{x:a.clientX+u.left,y:a.clientY+u.top}},w.util.isTouchEvent=function(p){return f.indexOf(p.type)>-1||"touch"===p.pointerType}}(),function(){var f=w.document.createElement("div"),l=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,u=function(a){return a};"string"==typeof f.style.opacity?u=function(a,d){return a.style.opacity=d,a}:"string"==typeof f.style.filter&&(u=function(a,d){var g=a.style;return a.currentStyle&&!a.currentStyle.hasLayout&&(g.zoom=1),l.test(g.filter)?g.filter=g.filter.replace(l,d=d>=.9999?"":"alpha(opacity="+100*d+")"):g.filter+=" alpha(opacity="+100*d+")",a}),w.util.setStyle=function y(a,d){var g=a.style;if(!g)return a;if("string"==typeof d)return a.style.cssText+=";"+d,d.indexOf("opacity")>-1?u(a,d.match(/opacity:\s*(\d?\.?\d*)/)[1]):a;for(var c in d)"opacity"===c?u(a,d[c]):g.setProperty("float"===c||"cssFloat"===c?typeof g.styleFloat>"u"?"cssFloat":"styleFloat":c,d[c]);return a}}(),function(){var m,c,E,M,y=Array.prototype.slice,p=function(E){return y.call(E,0)};try{m=p(w.document.childNodes)instanceof Array}catch{}function l(E,M){var x=w.document.createElement(E);for(var R in M)"class"===R?x.className=M[R]:"for"===R?x.htmlFor=M[R]:x.setAttribute(R,M[R]);return x}function d(E){for(var M=0,x=0,R=w.document.documentElement,j=w.document.body||{scrollLeft:0,scrollTop:0};E&&(E.parentNode||E.host)&&((E=E.parentNode||E.host)===w.document?(M=j.scrollLeft||R.scrollLeft||0,x=j.scrollTop||R.scrollTop||0):(M+=E.scrollLeft||0,x+=E.scrollTop||0),1!==E.nodeType||"fixed"!==E.style.position););return{left:M,top:x}}m||(p=function(E){for(var M=new Array(E.length),x=E.length;x--;)M[x]=E[x];return M}),c=w.document.defaultView&&w.document.defaultView.getComputedStyle?function(E,M){var x=w.document.defaultView.getComputedStyle(E,null);return x?x[M]:void 0}:function(E,M){var x=E.style[M];return!x&&E.currentStyle&&(x=E.currentStyle[M]),x},M="userSelect"in(E=w.document.documentElement.style)?"userSelect":"MozUserSelect"in E?"MozUserSelect":"WebkitUserSelect"in E?"WebkitUserSelect":"KhtmlUserSelect"in E?"KhtmlUserSelect":"",w.util.makeElementUnselectable=function x(j){return typeof j.onselectstart<"u"&&(j.onselectstart=w.util.falseFunction),M?j.style[M]="none":"string"==typeof j.unselectable&&(j.unselectable="on"),j},w.util.makeElementSelectable=function R(j){return typeof j.onselectstart<"u"&&(j.onselectstart=null),M?j.style[M]="":"string"==typeof j.unselectable&&(j.unselectable=""),j},w.util.setImageSmoothing=function D(E,M){E.imageSmoothingEnabled=E.imageSmoothingEnabled||E.webkitImageSmoothingEnabled||E.mozImageSmoothingEnabled||E.msImageSmoothingEnabled||E.oImageSmoothingEnabled,E.imageSmoothingEnabled=M},w.util.getById=function f(E){return"string"==typeof E?w.document.getElementById(E):E},w.util.toArray=p,w.util.addClass=function u(E,M){E&&-1===(" "+E.className+" ").indexOf(" "+M+" ")&&(E.className+=(E.className?" ":"")+M)},w.util.makeElement=l,w.util.wrapElement=function a(E,M,x){return"string"==typeof M&&(M=l(M,x)),E.parentNode&&E.parentNode.replaceChild(M,E),M.appendChild(E),M},w.util.getScrollLeftTop=d,w.util.getElementOffset=function g(E){var M,q,x=E&&E.ownerDocument,R={left:0,top:0},j={left:0,top:0},he={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!x)return j;for(var me in he)j[he[me]]+=parseInt(c(E,me),10)||0;return M=x.documentElement,typeof E.getBoundingClientRect<"u"&&(R=E.getBoundingClientRect()),q=d(E),{left:R.left+q.left-(M.clientLeft||0)+j.left,top:R.top+q.top-(M.clientTop||0)+j.top}},w.util.getNodeCanvas=function v(E){var M=w.jsdomImplForWrapper(E);return M._canvas||M._image},w.util.cleanUpJsdomNode=function C(E){if(w.isLikelyNode){var M=w.jsdomImplForWrapper(E);M&&(M._image=null,M._canvas=null,M._currentSrc=null,M._attributes=null,M._classList=null)}}}(),function(){function f(){}w.util.request=function m(p,l){l||(l={});var u=l.method?l.method.toUpperCase():"GET",a=l.onComplete||function(){},d=new w.window.XMLHttpRequest,g=l.body||l.parameters;return d.onreadystatechange=function(){4===d.readyState&&(a(d),d.onreadystatechange=f)},"GET"===u&&(g=null,"string"==typeof l.parameters&&(p=function y(p,l){return p+(/\?/.test(p)?"&":"?")+l}(p,l.parameters))),d.open(u,p,!0),("POST"===u||"PUT"===u)&&d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.send(g),d}}(),w.log=console.log,w.warn=console.warn,function(){var y=w.util.object.extend,f=w.util.object.clone,m=[];function p(){return!1}function l(v,C,D,E){return-D*Math.cos(v/E*(Math.PI/2))+D+C}w.util.object.extend(m,{cancelAll:function(){var v=this.splice(0);return v.forEach(function(C){C.cancel()}),v},cancelByCanvas:function(v){if(!v)return[];var C=this.filter(function(D){return"object"==typeof D.target&&D.target.canvas===v});return C.forEach(function(D){D.cancel()}),C},cancelByTarget:function(v){var C=this.findAnimationsByTarget(v);return C.forEach(function(D){D.cancel()}),C},findAnimationIndex:function(v){return this.indexOf(this.findAnimation(v))},findAnimation:function(v){return this.find(function(C){return C.cancel===v})},findAnimationsByTarget:function(v){return v?this.filter(function(C){return C.target===v}):[]}});var a=w.window.requestAnimationFrame||w.window.webkitRequestAnimationFrame||w.window.mozRequestAnimationFrame||w.window.oRequestAnimationFrame||w.window.msRequestAnimationFrame||function(v){return w.window.setTimeout(v,1e3/60)},d=w.window.cancelAnimationFrame||w.window.clearTimeout;function g(){return a.apply(w.window,arguments)}w.util.animate=function u(v){v||(v={});var D,C=!1,E=function(){var M=w.runningAnimations.indexOf(D);return M>-1&&w.runningAnimations.splice(M,1)[0]};return D=y(f(v),{cancel:function(){return C=!0,E()},currentValue:"startValue"in v?v.startValue:0,completionRate:0,durationRate:0}),w.runningAnimations.push(D),g(function(M){var q,x=M||+new Date,R=v.duration||500,j=x+R,he=v.onChange||p,me=v.abort||p,le=v.onComplete||p,De=v.easing||l,_e="startValue"in v&&v.startValue.length>0,ie="startValue"in v?v.startValue:0,xe="endValue"in v?v.endValue:100,Re=v.byValue||(_e?ie.map(function(Ae,I){return xe[I]-ie[I]}):xe-ie);v.onStart&&v.onStart(),function Ae(I){var V=(q=I||+new Date)>j?R:q-x,L=V/R,N=_e?ie.map(function(F,O){return De(V,ie[O],Re[O],R)}):De(V,ie,Re,R),Y=Math.abs(_e?(N[0]-ie[0])/Re[0]:(N-ie)/Re);if(D.currentValue=_e?N.slice():N,D.completionRate=Y,D.durationRate=L,!C){if(me(N,Y,L))return void E();if(q>j)return D.currentValue=_e?xe.slice():xe,D.completionRate=1,D.durationRate=1,he(_e?xe.slice():xe,1,1),le(xe,1,1),void E();he(N,Y,L),g(Ae)}}(x)}),D.cancel},w.util.requestAnimFrame=g,w.util.cancelAnimFrame=function c(){return d.apply(w.window,arguments)},w.runningAnimations=m}(),function(){function y(m,p,l){var u="rgba("+parseInt(m[0]+l*(p[0]-m[0]),10)+","+parseInt(m[1]+l*(p[1]-m[1]),10)+","+parseInt(m[2]+l*(p[2]-m[2]),10);return(u+=","+(m&&p?parseFloat(m[3]+l*(p[3]-m[3])):1))+")"}w.util.animateColor=function f(m,p,l,u){var a=new w.Color(m).getSource(),d=new w.Color(p).getSource(),g=u.onComplete,c=u.onChange;return w.util.animate(w.util.object.extend(u=u||{},{duration:l||500,startValue:a,endValue:d,byValue:d,easing:function(v,C,D,E){return y(C,D,u.colorEasing?u.colorEasing(v,E):1-Math.cos(v/E*(Math.PI/2)))},onComplete:function(v,C,D){if(g)return g(y(d,d,0),C,D)},onChange:function(v,C,D){if(c){if(Array.isArray(v))return c(y(v,v,0),C,D);c(v,C,D)}}}))}}(),function(){function y(I,V,L,N){return I<Math.abs(V)?(I=V,N=L/4):N=0===V&&0===I?L/(2*Math.PI)*Math.asin(1):L/(2*Math.PI)*Math.asin(V/I),{a:I,c:V,p:L,s:N}}function f(I,V,L){return I.a*Math.pow(2,10*(V-=1))*Math.sin((V*L-I.s)*(2*Math.PI)/I.p)}function xe(I,V,L,N){return L-Re(N-I,0,L,N)+V}function Re(I,V,L,N){return(I/=N)<1/2.75?L*(7.5625*I*I)+V:I<2/2.75?L*(7.5625*(I-=1.5/2.75)*I+.75)+V:I<2.5/2.75?L*(7.5625*(I-=2.25/2.75)*I+.9375)+V:L*(7.5625*(I-=2.625/2.75)*I+.984375)+V}w.util.ease={easeInQuad:function(I,V,L,N){return L*(I/=N)*I+V},easeOutQuad:function(I,V,L,N){return-L*(I/=N)*(I-2)+V},easeInOutQuad:function(I,V,L,N){return(I/=N/2)<1?L/2*I*I+V:-L/2*(--I*(I-2)-1)+V},easeInCubic:function(I,V,L,N){return L*(I/=N)*I*I+V},easeOutCubic:function m(I,V,L,N){return L*((I=I/N-1)*I*I+1)+V},easeInOutCubic:function p(I,V,L,N){return(I/=N/2)<1?L/2*I*I*I+V:L/2*((I-=2)*I*I+2)+V},easeInQuart:function l(I,V,L,N){return L*(I/=N)*I*I*I+V},easeOutQuart:function u(I,V,L,N){return-L*((I=I/N-1)*I*I*I-1)+V},easeInOutQuart:function a(I,V,L,N){return(I/=N/2)<1?L/2*I*I*I*I+V:-L/2*((I-=2)*I*I*I-2)+V},easeInQuint:function d(I,V,L,N){return L*(I/=N)*I*I*I*I+V},easeOutQuint:function g(I,V,L,N){return L*((I=I/N-1)*I*I*I*I+1)+V},easeInOutQuint:function c(I,V,L,N){return(I/=N/2)<1?L/2*I*I*I*I*I+V:L/2*((I-=2)*I*I*I*I+2)+V},easeInSine:function v(I,V,L,N){return-L*Math.cos(I/N*(Math.PI/2))+L+V},easeOutSine:function C(I,V,L,N){return L*Math.sin(I/N*(Math.PI/2))+V},easeInOutSine:function D(I,V,L,N){return-L/2*(Math.cos(Math.PI*I/N)-1)+V},easeInExpo:function E(I,V,L,N){return 0===I?V:L*Math.pow(2,10*(I/N-1))+V},easeOutExpo:function M(I,V,L,N){return I===N?V+L:L*(1-Math.pow(2,-10*I/N))+V},easeInOutExpo:function x(I,V,L,N){return 0===I?V:I===N?V+L:(I/=N/2)<1?L/2*Math.pow(2,10*(I-1))+V:L/2*(2-Math.pow(2,-10*--I))+V},easeInCirc:function R(I,V,L,N){return-L*(Math.sqrt(1-(I/=N)*I)-1)+V},easeOutCirc:function j(I,V,L,N){return L*Math.sqrt(1-(I=I/N-1)*I)+V},easeInOutCirc:function q(I,V,L,N){return(I/=N/2)<1?-L/2*(Math.sqrt(1-I*I)-1)+V:L/2*(Math.sqrt(1-(I-=2)*I)+1)+V},easeInElastic:function he(I,V,L,N){var F=0;return 0===I?V:1==(I/=N)?V+L:(F||(F=.3*N),-f(y(L,L,F,1.70158),I,N)+V)},easeOutElastic:function me(I,V,L,N){var F=0;if(0===I)return V;if(1==(I/=N))return V+L;F||(F=.3*N);var U=y(L,L,F,1.70158);return U.a*Math.pow(2,-10*I)*Math.sin((I*N-U.s)*(2*Math.PI)/U.p)+U.c+V},easeInOutElastic:function le(I,V,L,N){var F=0;if(0===I)return V;if(2==(I/=N/2))return V+L;F||(F=N*(.3*1.5));var U=y(L,L,F,1.70158);return I<1?-.5*f(U,I,N)+V:U.a*Math.pow(2,-10*(I-=1))*Math.sin((I*N-U.s)*(2*Math.PI)/U.p)*.5+U.c+V},easeInBack:function De(I,V,L,N,Y){return void 0===Y&&(Y=1.70158),L*(I/=N)*I*((Y+1)*I-Y)+V},easeOutBack:function _e(I,V,L,N,Y){return void 0===Y&&(Y=1.70158),L*((I=I/N-1)*I*((Y+1)*I+Y)+1)+V},easeInOutBack:function ie(I,V,L,N,Y){return void 0===Y&&(Y=1.70158),(I/=N/2)<1?L/2*(I*I*((1+(Y*=1.525))*I-Y))+V:L/2*((I-=2)*I*((1+(Y*=1.525))*I+Y)+2)+V},easeInBounce:xe,easeOutBounce:Re,easeInOutBounce:function Ae(I,V,L,N){return I<N/2?.5*xe(2*I,0,L,N)+V:.5*Re(2*I-N,0,L,N)+.5*L+V}}}(),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.util.object.extend,p=f.util.object.clone,l=f.util.toFixed,u=f.util.parseUnit,a=f.util.multiplyTransformMatrices,C={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},D={stroke:"strokeOpacity",fill:"fillOpacity"},E="font-size",M="clip-path";function x(F){return F in C?C[F]:F}function R(F,O,U,$){var X,re=Array.isArray(O);if("fill"!==F&&"stroke"!==F||"none"!==O){if("strokeUniform"===F)return"non-scaling-stroke"===O;if("strokeDashArray"===F)O="none"===O?null:O.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===F)O=U&&U.transformMatrix?a(U.transformMatrix,f.parseTransformAttribute(O)):f.parseTransformAttribute(O);else if("visible"===F)O="none"!==O&&"hidden"!==O,U&&!1===U.visible&&(O=!1);else if("opacity"===F)O=parseFloat(O),U&&typeof U.opacity<"u"&&(O*=U.opacity);else if("textAnchor"===F)O="start"===O?"left":"end"===O?"right":"center";else if("charSpacing"===F)X=u(O,$)/$*1e3;else if("paintFirst"===F){var ue=O.indexOf("fill"),ge=O.indexOf("stroke");O="fill",(ue>-1&&ge>-1&&ge<ue||-1===ue&&ge>-1)&&(O="stroke")}else{if("href"===F||"xlink:href"===F||"font"===F)return O;if("imageSmoothing"===F)return"optimizeQuality"===O;X=re?O.map(u):u(O,$)}}else O="";return!re&&isNaN(X)?O:X}function j(F){return new RegExp("^("+F.join("|")+")\\b","i")}function he(F,O){var re,X,ue,$=[];for(X=0,ue=O.length;X<ue;X++)re=F.getElementsByTagName(O[X]),$=$.concat(Array.prototype.slice.call(re));return $}function _e(F,O){var U,$=!0;return(U=xe(F,O.pop()))&&O.length&&($=function ie(F,O){for(var U,$=!0;F.parentNode&&1===F.parentNode.nodeType&&O.length;)$&&(U=O.pop()),$=xe(F=F.parentNode,U);return 0===O.length}(F,O)),U&&$&&0===O.length}function xe(F,O){var X,ue,U=F.nodeName,$=F.getAttribute("class"),re=F.getAttribute("id");if(X=new RegExp("^"+U,"i"),O=O.replace(X,""),re&&O.length&&(X=new RegExp("#"+re+"(?![a-zA-Z\\-]+)","i"),O=O.replace(X,"")),$&&O.length)for(ue=($=$.split(" ")).length;ue--;)X=new RegExp("\\."+$[ue]+"(?![a-zA-Z\\-]+)","i"),O=O.replace(X,"");return 0===O.length}function Re(F,O){var U;if(F.getElementById&&(U=F.getElementById(O)),U)return U;var $,re,X,ue=F.getElementsByTagName("*");for(re=0,X=ue.length;re<X;re++)if(O===($=ue[re]).getAttribute("id"))return $}f.svgValidTagNamesRegEx=j(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),f.svgViewBoxElementsRegEx=j(["symbol","image","marker","pattern","view","svg"]),f.svgInvalidAncestorsRegEx=j(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),f.svgValidParentsRegEx=j(["symbol","g","a","svg","clipPath","defs"]),f.cssRules={},f.gradientDefs={},f.clipPaths={},f.parseTransformAttribute=function(){function U(ae,ke,qe){ae[qe]=Math.tan(f.util.degreesToRadians(ke[0]))}var re=f.iMatrix,X=f.reNum,ue=f.commaWsp,te="(?:(?:(matrix)\\s*\\(\\s*("+X+")"+ue+"("+X+")"+ue+"("+X+")"+ue+"("+X+")"+ue+"("+X+")"+ue+"("+X+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+X+")(?:"+ue+"("+X+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+X+")(?:"+ue+"("+X+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+X+")(?:"+ue+"("+X+")"+ue+"("+X+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+X+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+X+")\\s*\\)))",Be=new RegExp("^\\s*(?:(?:"+te+"(?:"+ue+"*"+te+")*)?)\\s*$"),Se=new RegExp(te,"g");return function(ae){var ke=re.concat(),qe=[];if(!ae||ae&&!Be.test(ae))return ke;ae.replace(Se,function(vt){var rt=new RegExp(te).exec(vt).filter(function(xi){return!!xi}),Nt=rt[1],Ot=rt.slice(2).map(parseFloat);switch(Nt){case"translate":!function $(ae,ke){ae[4]=ke[0],2===ke.length&&(ae[5]=ke[1])}(ke,Ot);break;case"rotate":Ot[0]=f.util.degreesToRadians(Ot[0]),function F(ae,ke){var qe=f.util.cos(ke[0]),Ze=f.util.sin(ke[0]),vt=0,rt=0;3===ke.length&&(vt=ke[1],rt=ke[2]),ae[0]=qe,ae[1]=Ze,ae[2]=-Ze,ae[3]=qe,ae[4]=vt-(qe*vt-Ze*rt),ae[5]=rt-(Ze*vt+qe*rt)}(ke,Ot);break;case"scale":!function O(ae,ke){var Ze=2===ke.length?ke[1]:ke[0];ae[0]=ke[0],ae[3]=Ze}(ke,Ot);break;case"skewX":U(ke,Ot,2);break;case"skewY":U(ke,Ot,1);break;case"matrix":ke=Ot}qe.push(ke.concat()),ke=re.concat()});for(var Ze=qe[0];qe.length>1;)qe.shift(),Ze=f.util.multiplyTransformMatrices(Ze,qe[0]);return Ze}}();var I=new RegExp("^\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*$");function V(F){if(!f.svgViewBoxElementsRegEx.test(F.nodeName))return{};var re,X,ue,ge,Ce,J,O=F.getAttribute("viewBox"),U=1,$=1,z=F.getAttribute("width"),K=F.getAttribute("height"),oe=F.getAttribute("x")||0,te=F.getAttribute("y")||0,ce=F.getAttribute("preserveAspectRatio")||"",be=!O||!(O=O.match(I)),Be=!z||!K||"100%"===z||"100%"===K,Se=be&&Be,ae={},ke="",qe=0,Ze=0;if(ae.width=0,ae.height=0,ae.toBeParsed=Se,be&&(oe||te)&&F.parentNode&&"#document"!==F.parentNode.nodeName&&(ke=" translate("+u(oe)+" "+u(te)+") ",Ce=(F.getAttribute("transform")||"")+ke,F.setAttribute("transform",Ce),F.removeAttribute("x"),F.removeAttribute("y")),Se)return ae;if(be)return ae.width=u(z),ae.height=u(K),ae;if(re=-parseFloat(O[1]),X=-parseFloat(O[2]),ue=parseFloat(O[3]),ge=parseFloat(O[4]),ae.minX=re,ae.minY=X,ae.viewBoxWidth=ue,ae.viewBoxHeight=ge,Be?(ae.width=ue,ae.height=ge):(ae.width=u(z),ae.height=u(K),U=ae.width/ue,$=ae.height/ge),"none"!==(ce=f.util.parsePreserveAspectRatioAttribute(ce)).alignX&&("meet"===ce.meetOrSlice&&($=U=U>$?$:U),"slice"===ce.meetOrSlice&&($=U=U>$?U:$),qe=ae.width-ue*U,Ze=ae.height-ge*U,"Mid"===ce.alignX&&(qe/=2),"Mid"===ce.alignY&&(Ze/=2),"Min"===ce.alignX&&(qe=0),"Min"===ce.alignY&&(Ze=0)),1===U&&1===$&&0===re&&0===X&&0===oe&&0===te)return ae;if((oe||te)&&"#document"!==F.parentNode.nodeName&&(ke=" translate("+u(oe)+" "+u(te)+") "),Ce=ke+" matrix("+U+" 0 0 "+$+" "+(re*U+qe)+" "+(X*$+Ze)+") ","svg"===F.nodeName){for(J=F.ownerDocument.createElementNS(f.svgNS,"g");F.firstChild;)J.appendChild(F.firstChild);F.appendChild(J)}else(J=F).removeAttribute("x"),J.removeAttribute("y"),Ce=J.getAttribute("transform")+Ce;return J.setAttribute("transform",Ce),ae}function N(F,O){var $="xlink:href",X=Re(F,O.getAttribute($).slice(1));if(X&&X.getAttribute($)&&N(F,X),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(ge){X&&!O.hasAttribute(ge)&&X.hasAttribute(ge)&&O.setAttribute(ge,X.getAttribute(ge))}),!O.children.length)for(var ue=X.cloneNode(!0);ue.firstChild;)O.appendChild(ue.firstChild);O.removeAttribute($)}f.parseSVGDocument=function(F,O,U,$){if(F){!function Ae(F){for(var O=he(F,["use","svg:use"]),U=0;O.length&&U<O.length;){var $=O[U],re=$.getAttribute("xlink:href")||$.getAttribute("href");if(null===re)return;var oe,te,ce,be,X=re.slice(1),ue=$.getAttribute("x")||0,ge=$.getAttribute("y")||0,Ce=Re(F,X).cloneNode(!0),J=(Ce.getAttribute("transform")||"")+" translate("+ue+", "+ge+")",K=O.length,Be=f.svgNS;if(V(Ce),/^svg$/i.test(Ce.nodeName)){var Se=Ce.ownerDocument.createElementNS(Be,"g");for(te=0,be=(ce=Ce.attributes).length;te<be;te++)oe=ce.item(te),Se.setAttributeNS(Be,oe.nodeName,oe.nodeValue);for(;Ce.firstChild;)Se.appendChild(Ce.firstChild);Ce=Se}for(te=0,be=(ce=$.attributes).length;te<be;te++)"x"!==(oe=ce.item(te)).nodeName&&"y"!==oe.nodeName&&"xlink:href"!==oe.nodeName&&"href"!==oe.nodeName&&("transform"===oe.nodeName?J=oe.nodeValue+" "+J:Ce.setAttribute(oe.nodeName,oe.nodeValue));Ce.setAttribute("transform",J),Ce.setAttribute("instantiated_by_use","1"),Ce.removeAttribute("id"),$.parentNode.replaceChild(Ce,$),O.length===K&&U++}}(F);var X,ue,re=f.Object.__uid++,ge=V(F),Ce=f.util.toArray(F.getElementsByTagName("*"));if(ge.crossOrigin=$&&$.crossOrigin,ge.svgUid=re,0===Ce.length&&f.isLikelyNode){var J=[];for(X=0,ue=(Ce=F.selectNodes('//*[name(.)!="svg"]')).length;X<ue;X++)J[X]=Ce[X];Ce=J}var z=Ce.filter(function(oe){return V(oe),f.svgValidTagNamesRegEx.test(oe.nodeName.replace("svg:",""))&&!function L(F,O){for(;F&&(F=F.parentNode);)if(F.nodeName&&O.test(F.nodeName.replace("svg:",""))&&!F.getAttribute("instantiated_by_use"))return!0;return!1}(oe,f.svgInvalidAncestorsRegEx)});if(!z||z&&!z.length)return void(O&&O([],{}));var K={};Ce.filter(function(oe){return"clipPath"===oe.nodeName.replace("svg:","")}).forEach(function(oe){var te=oe.getAttribute("id");K[te]=f.util.toArray(oe.getElementsByTagName("*")).filter(function(ce){return f.svgValidTagNamesRegEx.test(ce.nodeName.replace("svg:",""))})}),f.gradientDefs[re]=f.getGradientDefs(F),f.cssRules[re]=f.getCSSRules(F),f.clipPaths[re]=K,f.parseElements(z,function(oe,te){O&&(O(oe,ge,te,Ce),delete f.gradientDefs[re],delete f.cssRules[re],delete f.clipPaths[re])},p(ge),U,$)}};var Y=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+f.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+f.reNum+"))?\\s+(.*)");m(f,{parseFontDeclaration:function(F,O){var U=F.match(Y);if(U){var $=U[1],re=U[3],X=U[4],ue=U[5],ge=U[6];$&&(O.fontStyle=$),re&&(O.fontWeight=isNaN(parseFloat(re))?re:parseFloat(re)),X&&(O.fontSize=u(X)),ge&&(O.fontFamily=ge),ue&&(O.lineHeight="normal"===ue?1:ue)}},getGradientDefs:function(F){var $,U=he(F,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),re=0,X={};for(re=U.length;re--;)($=U[re]).getAttribute("xlink:href")&&N(F,$),X[$.getAttribute("id")]=$;return X},parseAttributes:function(F,O,U){if(F){var $,X,ue,re={};typeof U>"u"&&(U=F.getAttribute("svgUid")),F.parentNode&&f.svgValidParentsRegEx.test(F.parentNode.nodeName)&&(re=f.parseAttributes(F.parentNode,O,U));var ge=O.reduce(function(ce,be){return($=F.getAttribute(be))&&(ce[be]=$),ce},{}),Ce=m(function De(F,O){var U={};for(var $ in f.cssRules[O])if(_e(F,$.split(" ")))for(var re in f.cssRules[O][$])U[re]=f.cssRules[O][$][re];return U}(F,U),f.parseStyleAttribute(F));ge=m(ge,Ce),Ce[M]&&F.setAttribute(M,Ce[M]),X=ue=re.fontSize||f.Text.DEFAULT_SVG_FONT_SIZE,ge[E]&&(ge[E]=X=u(ge[E],ue));var J,z,K={};for(var oe in ge)z=R(J=x(oe),ge[oe],re,X),K[J]=z;K&&K.font&&f.parseFontDeclaration(K.font,K);var te=m(re,K);return f.svgValidParentsRegEx.test(F.nodeName)?te:function q(F){for(var O in D)if(!(typeof F[D[O]]>"u"||""===F[O])){if(typeof F[O]>"u"){if(!f.Object.prototype[O])continue;F[O]=f.Object.prototype[O]}if(0!==F[O].indexOf("url(")){var U=new f.Color(F[O]);F[O]=U.setAlpha(l(U.getAlpha()*F[D[O]],2)).toRgba()}}return F}(te)}},parseElements:function(F,O,U,$,re){new f.ElementsParser(F,O,U,$,re).parse()},parseStyleAttribute:function(F){var O={},U=F.getAttribute("style");return U&&("string"==typeof U?function me(F,O){var U,$;F.replace(/;\s*$/,"").split(";").forEach(function(re){var X=re.split(":");U=X[0].trim().toLowerCase(),$=X[1].trim(),O[U]=$})}(U,O):function le(F,O){for(var re in F)typeof F[re]>"u"||(O[re.toLowerCase()]=F[re])}(U,O)),O},parsePointsAttribute:function(F){if(!F)return null;var U,$,O=[];for(U=0,$=(F=(F=F.replace(/,/g," ").trim()).split(/\s+/)).length;U<$;U+=2)O.push({x:parseFloat(F[U]),y:parseFloat(F[U+1])});return O},getCSSRules:function(F){var U,$,O=F.getElementsByTagName("style"),re={};for(U=0,$=O.length;U<$;U++){var ue=O[U].textContent;""!==(ue=ue.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&ue.split("}").filter(function(ge){return ge.trim()}).forEach(function(ge){var Ce=ge.split("{"),J={},K=Ce[1].trim().split(";").filter(function(be){return be.trim()});for(U=0,$=K.length;U<$;U++){var oe=K[U].split(":"),te=oe[0].trim(),ce=oe[1].trim();J[te]=ce}(ge=Ce[0].trim()).split(",").forEach(function(be){""!==(be=be.replace(/^svg/i,"").trim())&&(re[be]?f.util.object.extend(re[be],J):re[be]=f.util.object.clone(J))})})}return re},loadSVGFromURL:function(F,O,U,$){F=F.replace(/^\n\s*/,"").trim(),new f.util.request(F,{method:"get",onComplete:function re(X){var ue=X.responseXML;if(!ue||!ue.documentElement)return O&&O(null),!1;f.parseSVGDocument(ue.documentElement,function(ge,Ce,J,z){O&&O(ge,Ce,J,z)},U,$)}})},loadSVGFromString:function(F,O,U,$){var X=(new f.window.DOMParser).parseFromString(F.trim(),"text/xml");f.parseSVGDocument(X.documentElement,function(ue,ge,Ce,J){O(ue,ge,Ce,J)},U,$)}})}(We),w.ElementsParser=function(y,f,m,p,l,u){this.elements=y,this.callback=f,this.options=m,this.reviver=p,this.svgUid=m&&m.svgUid||0,this.parsingOptions=l,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=u},function(y){y.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},y.createObjects=function(){var f=this;this.elements.forEach(function(m,p){m.setAttribute("svgUid",f.svgUid),f.createObject(m,p)})},y.findTag=function(f){return w[w.util.string.capitalize(f.tagName.replace("svg:",""))]},y.createObject=function(f,m){var p=this.findTag(f);if(p&&p.fromElement)try{p.fromElement(f,this.createCallback(m,f),this.options)}catch(l){w.log(l)}else this.checkIfDone()},y.createCallback=function(f,m){var p=this;return function(l){var u;p.resolveGradient(l,m,"fill"),p.resolveGradient(l,m,"stroke"),l instanceof w.Image&&l._originalElement&&(u=l.parsePreserveAspectRatioAttribute(m)),l._removeTransformMatrix(u),p.resolveClipPath(l,m),p.reviver&&p.reviver(m,l),p.instances[f]=l,p.checkIfDone()}},y.extractPropertyDefinition=function(f,m,p){var l=f[m],u=this.regexUrl;if(u.test(l)){u.lastIndex=0;var a=u.exec(l)[1];return u.lastIndex=0,w[p][this.svgUid][a]}},y.resolveGradient=function(f,m,p){var l=this.extractPropertyDefinition(f,p,"gradientDefs");if(l){var u=m.getAttribute(p+"-opacity"),a=w.Gradient.fromElement(l,f,u,this.options);f.set(p,a)}},y.createClipPathCallback=function(f,m){return function(p){p._removeTransformMatrix(),p.fillRule=p.clipRule,m.push(p)}},y.resolveClipPath=function(f,m){var l,a,d,g,p=this.extractPropertyDefinition(f,"clipPath","clipPaths");if(p){d=[],a=w.util.invertTransform(f.calcTransformMatrix());for(var v=p[0].parentNode,C=m;C.parentNode&&C.getAttribute("clip-path")!==f.clipPath;)C=C.parentNode;C.parentNode.appendChild(v);for(var D=0;D<p.length;D++)this.findTag(l=p[D]).fromElement(l,this.createClipPathCallback(f,d),this.options);p=1===d.length?d[0]:new w.Group(d),g=w.util.multiplyTransformMatrices(a,p.calcTransformMatrix()),p.clipPath&&this.resolveClipPath(p,C);var c=w.util.qrDecompose(g);p.flipX=!1,p.flipY=!1,p.set("scaleX",c.scaleX),p.set("scaleY",c.scaleY),p.angle=c.angle,p.skewX=c.skewX,p.skewY=0,p.setPositionByOrigin({x:c.translateX,y:c.translateY},"center","center"),f.clipPath=p}else delete f.clipPath},y.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(f){return null!=f}),this.callback(this.instances,this.elements))}}(w.ElementsParser.prototype),function(y){"use strict";var f=y.fabric||(y.fabric={});function m(p,l){this.x=p,this.y=l}f.Point?f.warn("fabric.Point is already defined"):(f.Point=m,m.prototype={type:"point",constructor:m,add:function(p){return new m(this.x+p.x,this.y+p.y)},addEquals:function(p){return this.x+=p.x,this.y+=p.y,this},scalarAdd:function(p){return new m(this.x+p,this.y+p)},scalarAddEquals:function(p){return this.x+=p,this.y+=p,this},subtract:function(p){return new m(this.x-p.x,this.y-p.y)},subtractEquals:function(p){return this.x-=p.x,this.y-=p.y,this},scalarSubtract:function(p){return new m(this.x-p,this.y-p)},scalarSubtractEquals:function(p){return this.x-=p,this.y-=p,this},multiply:function(p){return new m(this.x*p,this.y*p)},multiplyEquals:function(p){return this.x*=p,this.y*=p,this},divide:function(p){return new m(this.x/p,this.y/p)},divideEquals:function(p){return this.x/=p,this.y/=p,this},eq:function(p){return this.x===p.x&&this.y===p.y},lt:function(p){return this.x<p.x&&this.y<p.y},lte:function(p){return this.x<=p.x&&this.y<=p.y},gt:function(p){return this.x>p.x&&this.y>p.y},gte:function(p){return this.x>=p.x&&this.y>=p.y},lerp:function(p,l){return typeof l>"u"&&(l=.5),l=Math.max(Math.min(1,l),0),new m(this.x+(p.x-this.x)*l,this.y+(p.y-this.y)*l)},distanceFrom:function(p){var l=this.x-p.x,u=this.y-p.y;return Math.sqrt(l*l+u*u)},midPointFrom:function(p){return this.lerp(p)},min:function(p){return new m(Math.min(this.x,p.x),Math.min(this.y,p.y))},max:function(p){return new m(Math.max(this.x,p.x),Math.max(this.y,p.y))},toString:function(){return this.x+","+this.y},setXY:function(p,l){return this.x=p,this.y=l,this},setX:function(p){return this.x=p,this},setY:function(p){return this.y=p,this},setFromPoint:function(p){return this.x=p.x,this.y=p.y,this},swap:function(p){var l=this.x,u=this.y;this.x=p.x,this.y=p.y,p.x=l,p.y=u},clone:function(){return new m(this.x,this.y)}})}(We),function(y){"use strict";var f=y.fabric||(y.fabric={});function m(p){this.status=p,this.points=[]}f.Intersection?f.warn("fabric.Intersection is already defined"):(f.Intersection=m,f.Intersection.prototype={constructor:m,appendPoint:function(p){return this.points.push(p),this},appendPoints:function(p){return this.points=this.points.concat(p),this}},f.Intersection.intersectLineLine=function(p,l,u,a){var d,g=(a.x-u.x)*(p.y-u.y)-(a.y-u.y)*(p.x-u.x),c=(l.x-p.x)*(p.y-u.y)-(l.y-p.y)*(p.x-u.x),v=(a.y-u.y)*(l.x-p.x)-(a.x-u.x)*(l.y-p.y);if(0!==v){var C=g/v,D=c/v;0<=C&&C<=1&&0<=D&&D<=1?(d=new m("Intersection")).appendPoint(new f.Point(p.x+C*(l.x-p.x),p.y+C*(l.y-p.y))):d=new m}else d=new m(0===g||0===c?"Coincident":"Parallel");return d},f.Intersection.intersectLinePolygon=function(p,l,u){var v,C,a=new m,d=u.length;for(C=0;C<d;C++)v=m.intersectLineLine(p,l,u[C],u[(C+1)%d]),a.appendPoints(v.points);return a.points.length>0&&(a.status="Intersection"),a},f.Intersection.intersectPolygonPolygon=function(p,l){var d,u=new m,a=p.length;for(d=0;d<a;d++){var v=m.intersectLinePolygon(p[d],p[(d+1)%a],l);u.appendPoints(v.points)}return u.points.length>0&&(u.status="Intersection"),u},f.Intersection.intersectPolygonRectangle=function(p,l,u){var a=l.min(u),d=l.max(u),g=new f.Point(d.x,a.y),c=new f.Point(a.x,d.y),v=m.intersectLinePolygon(a,g,p),C=m.intersectLinePolygon(g,d,p),D=m.intersectLinePolygon(d,c,p),E=m.intersectLinePolygon(c,a,p),M=new m;return M.appendPoints(v.points),M.appendPoints(C.points),M.appendPoints(D.points),M.appendPoints(E.points),M.points.length>0&&(M.status="Intersection"),M})}(We),function(y){"use strict";var f=y.fabric||(y.fabric={});function m(l){l?this._tryParsingColor(l):this.setSource([0,0,0,1])}function p(l,u,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?l+6*(u-l)*a:a<.5?u:a<2/3?l+(u-l)*(2/3-a)*6:l}f.Color?f.warn("fabric.Color is already defined."):(f.Color=m,f.Color.prototype={_tryParsingColor:function(l){var u;l in m.colorNameMap&&(l=m.colorNameMap[l]),"transparent"===l&&(u=[255,255,255,0]),u||(u=m.sourceFromHex(l)),u||(u=m.sourceFromRgb(l)),u||(u=m.sourceFromHsl(l)),u||(u=[0,0,0,1]),u&&this.setSource(u)},_rgbToHsl:function(l,u,a){var d,g,c,v=f.util.array.max([l/=255,u/=255,a/=255]),C=f.util.array.min([l,u,a]);if(c=(v+C)/2,v===C)d=g=0;else{var D=v-C;switch(g=c>.5?D/(2-v-C):D/(v+C),v){case l:d=(u-a)/D+(u<a?6:0);break;case u:d=(a-l)/D+2;break;case a:d=(l-u)/D+4}d/=6}return[Math.round(360*d),Math.round(100*g),Math.round(100*c)]},getSource:function(){return this._source},setSource:function(l){this._source=l},toRgb:function(){var l=this.getSource();return"rgb("+l[0]+","+l[1]+","+l[2]+")"},toRgba:function(){var l=this.getSource();return"rgba("+l[0]+","+l[1]+","+l[2]+","+l[3]+")"},toHsl:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsl("+u[0]+","+u[1]+"%,"+u[2]+"%)"},toHsla:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsla("+u[0]+","+u[1]+"%,"+u[2]+"%,"+l[3]+")"},toHex:function(){var u,a,d,l=this.getSource();return u=1===(u=l[0].toString(16)).length?"0"+u:u,a=1===(a=l[1].toString(16)).length?"0"+a:a,d=1===(d=l[2].toString(16)).length?"0"+d:d,u.toUpperCase()+a.toUpperCase()+d.toUpperCase()},toHexa:function(){var u,l=this.getSource();return u=1===(u=(u=Math.round(255*l[3])).toString(16)).length?"0"+u:u,this.toHex()+u.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(l){var u=this.getSource();return u[3]=l,this.setSource(u),this},toGrayscale:function(){var l=this.getSource(),u=parseInt((.3*l[0]+.59*l[1]+.11*l[2]).toFixed(0),10);return this.setSource([u,u,u,l[3]]),this},toBlackWhite:function(l){var u=this.getSource(),a=(.3*u[0]+.59*u[1]+.11*u[2]).toFixed(0),d=u[3];return l=l||127,a=Number(a)<Number(l)?0:255,this.setSource([a,a,a,d]),this},overlayWith:function(l){l instanceof m||(l=new m(l));var v,u=[],a=this.getAlpha(),g=this.getSource(),c=l.getSource();for(v=0;v<3;v++)u.push(Math.round(.5*g[v]+.5*c[v]));return u[3]=a,this.setSource(u),this}},f.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,f.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,f.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,f.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},f.Color.fromRgb=function(l){return m.fromSource(m.sourceFromRgb(l))},f.Color.sourceFromRgb=function(l){var u=l.match(m.reRGBa);if(u){var a=parseInt(u[1],10)/(/%$/.test(u[1])?100:1)*(/%$/.test(u[1])?255:1),d=parseInt(u[2],10)/(/%$/.test(u[2])?100:1)*(/%$/.test(u[2])?255:1),g=parseInt(u[3],10)/(/%$/.test(u[3])?100:1)*(/%$/.test(u[3])?255:1);return[parseInt(a,10),parseInt(d,10),parseInt(g,10),u[4]?parseFloat(u[4]):1]}},f.Color.fromRgba=m.fromRgb,f.Color.fromHsl=function(l){return m.fromSource(m.sourceFromHsl(l))},f.Color.sourceFromHsl=function(l){var u=l.match(m.reHSLa);if(u){var c,v,C,a=(parseFloat(u[1])%360+360)%360/360,d=parseFloat(u[2])/(/%$/.test(u[2])?100:1),g=parseFloat(u[3])/(/%$/.test(u[3])?100:1);if(0===d)c=v=C=g;else{var D=g<=.5?g*(d+1):g+d-g*d,E=2*g-D;c=p(E,D,a+1/3),v=p(E,D,a),C=p(E,D,a-1/3)}return[Math.round(255*c),Math.round(255*v),Math.round(255*C),u[4]?parseFloat(u[4]):1]}},f.Color.fromHsla=m.fromHsl,f.Color.fromHex=function(l){return m.fromSource(m.sourceFromHex(l))},f.Color.sourceFromHex=function(l){if(l.match(m.reHex)){var u=l.slice(l.indexOf("#")+1),a=3===u.length||4===u.length,d=8===u.length||4===u.length,g=a?u.charAt(0)+u.charAt(0):u.substring(0,2),c=a?u.charAt(1)+u.charAt(1):u.substring(2,4),v=a?u.charAt(2)+u.charAt(2):u.substring(4,6),C=d?a?u.charAt(3)+u.charAt(3):u.substring(6,8):"FF";return[parseInt(g,16),parseInt(c,16),parseInt(v,16),parseFloat((parseInt(C,16)/255).toFixed(2))]}},f.Color.fromSource=function(l){var u=new m;return u.setSource(l),u})}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=["e","se","s","sw","w","nw","n","ne","e"],p=["ns","nesw","ew","nwse"],l={},u="left",a="top",d="right",g="bottom",c="center",v={top:g,bottom:a,left:d,right:u,center:c},C=f.util.radiansToDegrees,D=Math.sign||function(J){return(J>0)-(J<0)||+J};function E(J,z){var K=J.angle+C(Math.atan2(z.y,z.x))+360;return Math.round(K%360/45)}function M(J,z){var K=z.transform.target,oe=K.canvas,te=f.util.object.clone(z);te.target=K,oe&&oe.fire("object:"+J,te),K.fire(J,z)}function x(J,z){var K=z.canvas,te=J[K.uniScaleKey];return K.uniformScaling&&!te||!K.uniformScaling&&te}function R(J){return J.originX===c&&J.originY===c}function j(J,z,K){var oe=J.lockScalingX,te=J.lockScalingY;return!!(oe&&te||!z&&(oe||te)&&K||oe&&"x"===z||te&&"y"===z)}function _e(J,z,K,oe){return{e:J,transform:z,pointer:{x:K,y:oe}}}function ie(J){return function(z,K,oe,te){var ce=K.target,be=ce.getCenterPoint(),Be=ce.translateToOriginPoint(be,K.originX,K.originY),Se=J(z,K,oe,te);return ce.setPositionByOrigin(Be,K.originX,K.originY),Se}}function xe(J,z){return function(K,oe,te,ce){var be=z(K,oe,te,ce);return be&&M(J,_e(K,oe,te,ce)),be}}function Re(J,z,K,oe,te){var ce=J.target,be=ce.controls[J.corner],Be=ce.canvas.getZoom(),Se=ce.padding/Be,ae=ce.toLocalPoint(new f.Point(oe,te),z,K);return ae.x>=Se&&(ae.x-=Se),ae.x<=-Se&&(ae.x+=Se),ae.y>=Se&&(ae.y-=Se),ae.y<=Se&&(ae.y+=Se),ae.x-=be.offsetX,ae.y-=be.offsetY,ae}function Ae(J){return J.flipX!==J.flipY}function I(J,z,K,oe,te){if(0!==J[z]){var ce=J._getTransformedDimensions()[oe];J.set(K,te/ce*J[K])}}function V(J,z,K,oe){var ae,te=z.target,ce=te._getTransformedDimensions(0,te.skewY),be=Re(z,z.originX,z.originY,K,oe),Be=Math.abs(2*be.x)-ce.x,Se=te.skewX;Be<2?ae=0:(ae=C(Math.atan2(Be/te.scaleX,ce.y/te.scaleY)),z.originX===u&&z.originY===g&&(ae=-ae),z.originX===d&&z.originY===a&&(ae=-ae),Ae(te)&&(ae=-ae));var ke=Se!==ae;if(ke){var qe=te._getTransformedDimensions().y;te.set("skewX",ae),I(te,"skewY","scaleY","y",qe)}return ke}function L(J,z,K,oe){var ae,te=z.target,ce=te._getTransformedDimensions(te.skewX,0),be=Re(z,z.originX,z.originY,K,oe),Be=Math.abs(2*be.y)-ce.y,Se=te.skewY;Be<2?ae=0:(ae=C(Math.atan2(Be/te.scaleY,ce.x/te.scaleX)),z.originX===u&&z.originY===g&&(ae=-ae),z.originX===d&&z.originY===a&&(ae=-ae),Ae(te)&&(ae=-ae));var ke=Se!==ae;if(ke){var qe=te._getTransformedDimensions().x;te.set("skewY",ae),I(te,"skewX","scaleX","x",qe)}return ke}function O(J,z,K,oe,te){var ae,ke,qe,Ze,Nt,Ot,ce=z.target,be=ce.lockScalingX,Be=ce.lockScalingY,Se=(te=te||{}).by,vt=x(J,ce),rt=j(ce,Se,vt),xi=z.gestureScale;if(rt)return!1;if(xi)ke=z.scaleX*xi,qe=z.scaleY*xi;else{if(ae=Re(z,z.originX,z.originY,K,oe),Nt="y"!==Se?D(ae.x):1,Ot="x"!==Se?D(ae.y):1,z.signX||(z.signX=Nt),z.signY||(z.signY=Ot),ce.lockScalingFlip&&(z.signX!==Nt||z.signY!==Ot))return!1;if(Ze=ce._getTransformedDimensions(),vt&&!Se){var Ai=Math.abs(ae.x)+Math.abs(ae.y),Fn=z.original,Nu=Ai/(Math.abs(Ze.x*Fn.scaleX/ce.scaleX)+Math.abs(Ze.y*Fn.scaleY/ce.scaleY));ke=Fn.scaleX*Nu,qe=Fn.scaleY*Nu}else ke=Math.abs(ae.x*ce.scaleX/Ze.x),qe=Math.abs(ae.y*ce.scaleY/Ze.y);R(z)&&(ke*=2,qe*=2),z.signX!==Nt&&"y"!==Se&&(z.originX=v[z.originX],ke*=-1,z.signX=Nt),z.signY!==Ot&&"x"!==Se&&(z.originY=v[z.originY],qe*=-1,z.signY=Ot)}var Vu=ce.scaleX,Bu=ce.scaleY;return Se?("x"===Se&&ce.set("scaleX",ke),"y"===Se&&ce.set("scaleY",qe)):(!be&&ce.set("scaleX",ke),!Be&&ce.set("scaleY",qe)),Vu!==ce.scaleX||Bu!==ce.scaleY}l.scaleCursorStyleHandler=function q(J,z,K){var te=x(J,K),ce="";if(0!==z.x&&0===z.y?ce="x":0===z.x&&0!==z.y&&(ce="y"),j(K,ce,te))return"not-allowed";var be=E(K,z);return m[be]+"-resize"},l.skewCursorStyleHandler=function he(J,z,K){if(0!==z.x&&K.lockSkewingY||0!==z.y&&K.lockSkewingX)return"not-allowed";var te=E(K,z)%4;return p[te]+"-resize"},l.scaleSkewCursorStyleHandler=function me(J,z,K){return J[K.canvas.altActionKey]?l.skewCursorStyleHandler(J,z,K):l.scaleCursorStyleHandler(J,z,K)},l.rotationWithSnapping=xe("rotating",ie(function F(J,z,K,oe){var te=z,ce=te.target,be=ce.translateToOriginPoint(ce.getCenterPoint(),te.originX,te.originY);if(ce.lockRotation)return!1;var ke,Be=Math.atan2(te.ey-be.y,te.ex-be.x),Se=Math.atan2(oe-be.y,K-be.x),ae=C(Se-Be+te.theta);if(ce.snapAngle>0){var qe=ce.snapAngle,Ze=ce.snapThreshold||qe,vt=Math.ceil(ae/qe)*qe,rt=Math.floor(ae/qe)*qe;Math.abs(ae-rt)<Ze?ae=rt:Math.abs(ae-vt)<Ze&&(ae=vt)}return ae<0&&(ae=360+ae),ke=ce.angle!==(ae%=360),ce.angle=ae,ke})),l.scalingEqually=xe("scaling",ie(function U(J,z,K,oe){return O(J,z,K,oe)})),l.scalingX=xe("scaling",ie(function $(J,z,K,oe){return O(J,z,K,oe,{by:"x"})})),l.scalingY=xe("scaling",ie(function re(J,z,K,oe){return O(J,z,K,oe,{by:"y"})})),l.scalingYOrSkewingX=function X(J,z,K,oe){return J[z.target.canvas.altActionKey]?l.skewHandlerX(J,z,K,oe):l.scalingY(J,z,K,oe)},l.scalingXOrSkewingY=function ue(J,z,K,oe){return J[z.target.canvas.altActionKey]?l.skewHandlerY(J,z,K,oe):l.scalingX(J,z,K,oe)},l.changeWidth=xe("resizing",ie(function ge(J,z,K,oe){var te=z.target,ce=Re(z,z.originX,z.originY,K,oe),be=te.strokeWidth/(te.strokeUniform?te.scaleX:1),Be=R(z)?2:1,Se=te.width,ae=Math.abs(ce.x*Be/te.scaleX)-be;return te.set("width",Math.max(ae,0)),Se!==ae})),l.skewHandlerX=function N(J,z,K,oe){var be,te=z.target,ce=te.skewX,Be=z.originY;return!te.lockSkewingX&&(0===ce?be=Re(z,c,c,K,oe).x>0?u:d:(ce>0&&(be=Be===a?u:d),ce<0&&(be=Be===a?d:u),Ae(te)&&(be=be===u?d:u)),z.originX=be,xe("skewing",ie(V))(J,z,K,oe))},l.skewHandlerY=function Y(J,z,K,oe){var be,te=z.target,ce=te.skewY,Be=z.originX;return!te.lockSkewingY&&(0===ce?be=Re(z,c,c,K,oe).y>0?a:g:(ce>0&&(be=Be===u?a:g),ce<0&&(be=Be===u?g:a),Ae(te)&&(be=be===a?g:a)),z.originY=be,xe("skewing",ie(L))(J,z,K,oe))},l.dragHandler=function Ce(J,z,K,oe){var te=z.target,ce=K-z.offsetX,be=oe-z.offsetY,Be=!te.get("lockMovementX")&&te.left!==ce,Se=!te.get("lockMovementY")&&te.top!==be;return Be&&te.set("left",ce),Se&&te.set("top",be),(Be||Se)&&M("moving",_e(J,z,K,oe)),Be||Se},l.scaleOrSkewActionName=function le(J,z,K){var oe=J[K.canvas.altActionKey];return 0===z.x?oe?"skewX":"scaleY":0===z.y?oe?"skewY":"scaleX":void 0},l.rotationStyleHandler=function De(J,z,K){return K.lockRotation?"not-allowed":z.cursorStyle},l.fireEvent=M,l.wrapWithFixedAnchor=ie,l.wrapWithFireEvent=xe,l.getLocalPoint=Re,f.controlsUtils=l}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.util.degreesToRadians,p=f.controlsUtils;p.renderCircleControl=function l(a,d,g,c,v){c=c||{};var q,C=this.sizeX||c.cornerSize||v.cornerSize,D=this.sizeY||c.cornerSize||v.cornerSize,E=typeof c.transparentCorners<"u"?c.transparentCorners:v.transparentCorners,M=E?"stroke":"fill",x=!E&&(c.cornerStrokeColor||v.cornerStrokeColor),R=d,j=g;a.save(),a.fillStyle=c.cornerColor||v.cornerColor,a.strokeStyle=c.cornerStrokeColor||v.cornerStrokeColor,C>D?(q=C,a.scale(1,D/C),j=g*C/D):D>C?(q=D,a.scale(C/D,1),R=d*D/C):q=C,a.lineWidth=1,a.beginPath(),a.arc(R,j,q/2,0,2*Math.PI,!1),a[M](),x&&a.stroke(),a.restore()},p.renderSquareControl=function u(a,d,g,c,v){c=c||{};var C=this.sizeX||c.cornerSize||v.cornerSize,D=this.sizeY||c.cornerSize||v.cornerSize,E=typeof c.transparentCorners<"u"?c.transparentCorners:v.transparentCorners,M=E?"stroke":"fill",x=!E&&(c.cornerStrokeColor||v.cornerStrokeColor),R=C/2,j=D/2;a.save(),a.fillStyle=c.cornerColor||v.cornerColor,a.strokeStyle=c.cornerStrokeColor||v.cornerStrokeColor,a.lineWidth=1,a.translate(d,g),a.rotate(m(v.angle)),a[M+"Rect"](-R,-j,C,D),x&&a.strokeRect(-R,-j,C,D),a.restore()}}(We),function(y){"use strict";var f=y.fabric||(y.fabric={});f.Control=function m(p){for(var l in p)this[l]=p[l]},f.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(p,l){return l.cursorStyle},getActionName:function(p,l){return l.actionName},getVisibility:function(p,l){var u=p._controlsVisibility;return u&&typeof u[l]<"u"?u[l]:this.visible},setVisibility:function(p){this.visible=p},positionHandler:function(p,l){return f.util.transformPoint({x:this.x*p.x+this.offsetX,y:this.y*p.y+this.offsetY},l)},calcCornerCoords:function(p,l,u,a,d){var g,c,v,C,D=d?this.touchSizeX:this.sizeX,E=d?this.touchSizeY:this.sizeY;if(D&&E&&D!==E){var M=Math.atan2(E,D),x=Math.sqrt(D*D+E*E)/2,R=M-f.util.degreesToRadians(p),j=Math.PI/2-M-f.util.degreesToRadians(p);g=x*f.util.cos(R),c=x*f.util.sin(R),v=x*f.util.cos(j),C=x*f.util.sin(j)}else x=.7071067812*(D&&E?D:l),R=f.util.degreesToRadians(45-p),g=v=x*f.util.cos(R),c=C=x*f.util.sin(R);return{tl:{x:u-C,y:a-v},tr:{x:u+g,y:a-c},bl:{x:u-g,y:a+c},br:{x:u+C,y:a+v}}},render:function(p,l,u,a,d){"circle"===((a=a||{}).cornerStyle||d.cornerStyle)?f.controlsUtils.renderCircleControl.call(this,p,l,u,a,d):f.controlsUtils.renderSquareControl.call(this,p,l,u,a,d)}}}(We),function(){function y(u,a){var c,v,C,D,d=u.getAttribute("style"),g=u.getAttribute("offset")||0;if(g=(g=parseFloat(g)/(/%$/.test(g)?100:1))<0?0:g>1?1:g,d){var E=d.split(/\s*;\s*/);for(""===E[E.length-1]&&E.pop(),D=E.length;D--;){var M=E[D].split(/\s*:\s*/),x=M[0].trim(),R=M[1].trim();"stop-color"===x?c=R:"stop-opacity"===x&&(C=R)}}return c||(c=u.getAttribute("stop-color")||"rgb(0,0,0)"),C||(C=u.getAttribute("stop-opacity")),v=(c=new w.Color(c)).getAlpha(),C=isNaN(parseFloat(C))?1:parseFloat(C),C*=v*a,{offset:g,color:c.toRgb(),opacity:C}}var p=w.util.object.clone;w.Gradient=w.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(u){u||(u={}),u.coords||(u.coords={});var a,d=this;Object.keys(u).forEach(function(g){d[g]=u[g]}),this.id?this.id+="_"+w.Object.__uid++:this.id=w.Object.__uid++,a={x1:u.coords.x1||0,y1:u.coords.y1||0,x2:u.coords.x2||0,y2:u.coords.y2||0},"radial"===this.type&&(a.r1=u.coords.r1||0,a.r2=u.coords.r2||0),this.coords=a,this.colorStops=u.colorStops.slice()},addColorStop:function(u){for(var a in u){var d=new w.Color(u[a]);this.colorStops.push({offset:parseFloat(a),color:d.toRgb(),opacity:d.getAlpha()})}return this},toObject:function(u){var a={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return w.util.populateWithProperties(this,a,u),a},toSVG:function(u,v){var g,c,C,D,d=p(this.coords,!0),E=(v=v||{},p(this.colorStops,!0)),M=d.r1>d.r2,x=this.gradientTransform?this.gradientTransform.concat():w.iMatrix.concat(),R=-this.offsetX,j=-this.offsetY,q=!!v.additionalTransform,he="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(E.sort(function(ie,xe){return ie.offset-xe.offset}),"objectBoundingBox"===he?(R/=u.width,j/=u.height):(R+=u.width/2,j+=u.height/2),"path"===u.type&&"percentage"!==this.gradientUnits&&(R-=u.pathOffset.x,j-=u.pathOffset.y),x[4]-=R,x[5]-=j,D='id="SVGID_'+this.id+'" gradientUnits="'+he+'"',D+=' gradientTransform="'+(q?v.additionalTransform+" ":"")+w.util.matrixToSVG(x)+'" ',"linear"===this.type?C=["<linearGradient ",D,' x1="',d.x1,'" y1="',d.y1,'" x2="',d.x2,'" y2="',d.y2,'">\n']:"radial"===this.type&&(C=["<radialGradient ",D,' cx="',M?d.x1:d.x2,'" cy="',M?d.y1:d.y2,'" r="',M?d.r1:d.r2,'" fx="',M?d.x2:d.x1,'" fy="',M?d.y2:d.y1,'">\n']),"radial"===this.type){if(M)for((E=E.concat()).reverse(),g=0,c=E.length;g<c;g++)E[g].offset=1-E[g].offset;var me=Math.min(d.r1,d.r2);if(me>0){var De=me/Math.max(d.r1,d.r2);for(g=0,c=E.length;g<c;g++)E[g].offset+=De*(1-E[g].offset)}}for(g=0,c=E.length;g<c;g++){var _e=E[g];C.push("<stop ",'offset="',100*_e.offset+"%",'" style="stop-color:',_e.color,typeof _e.opacity<"u"?";stop-opacity: "+_e.opacity:";",'"/>\n')}return C.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),C.join("")},toLive:function(u){var a,g,c,d=w.util.object.clone(this.coords);if(this.type){for("linear"===this.type?a=u.createLinearGradient(d.x1,d.y1,d.x2,d.y2):"radial"===this.type&&(a=u.createRadialGradient(d.x1,d.y1,d.r1,d.x2,d.y2,d.r2)),g=0,c=this.colorStops.length;g<c;g++){var v=this.colorStops[g].color,C=this.colorStops[g].opacity,D=this.colorStops[g].offset;typeof C<"u"&&(v=new w.Color(v).setAlpha(C).toRgba()),a.addColorStop(D,v)}return a}}}),w.util.object.extend(w.Gradient,{fromElement:function(u,a,d,g){var c=parseFloat(d)/(/%$/.test(d)?100:1);c=c<0?0:c>1?1:c,isNaN(c)&&(c=1);var C,x,R,he,v=u.getElementsByTagName("stop"),D="userSpaceOnUse"===u.getAttribute("gradientUnits")?"pixels":"percentage",E=u.getAttribute("gradientTransform")||"",M=[],j=0,q=0;for("linearGradient"===u.nodeName||"LINEARGRADIENT"===u.nodeName?(C="linear",x=function f(u){return{x1:u.getAttribute("x1")||0,y1:u.getAttribute("y1")||0,x2:u.getAttribute("x2")||"100%",y2:u.getAttribute("y2")||0}}(u)):(C="radial",x=function m(u){return{x1:u.getAttribute("fx")||u.getAttribute("cx")||"50%",y1:u.getAttribute("fy")||u.getAttribute("cy")||"50%",r1:0,x2:u.getAttribute("cx")||"50%",y2:u.getAttribute("cy")||"50%",r2:u.getAttribute("r")||"50%"}}(u)),R=v.length;R--;)M.push(y(v[R],c));return he=w.parseTransformAttribute(E),function l(u,a,d,g){var c,v;Object.keys(a).forEach(function(C){"Infinity"===(c=a[C])?v=1:"-Infinity"===c?v=0:(v=parseFloat(a[C],10),"string"==typeof c&&/^(\d+\.\d+)%|(\d+)%$/.test(c)&&(v*=.01,"pixels"===g&&(("x1"===C||"x2"===C||"r2"===C)&&(v*=d.viewBoxWidth||d.width),("y1"===C||"y2"===C)&&(v*=d.viewBoxHeight||d.height)))),a[C]=v})}(0,x,g,D),"pixels"===D&&(j=-a.left,q=-a.top),new w.Gradient({id:u.getAttribute("id"),type:C,coords:x,colorStops:M,gradientUnits:D,gradientTransform:he,offsetX:j,offsetY:q})}})}(),function(){"use strict";var y=w.util.toFixed;w.Pattern=w.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(f,m){if(f||(f={}),this.id=w.Object.__uid++,this.setOptions(f),!f.source||f.source&&"string"!=typeof f.source)m&&m(this);else{var p=this;this.source=w.util.createImage(),w.util.loadImage(f.source,function(l,u){p.source=l,m&&m(p,u)},null,this.crossOrigin)}},toObject:function(f){var p,l,m=w.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?p=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(p=this.source.toDataURL()),l={type:"pattern",source:p,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:y(this.offsetX,m),offsetY:y(this.offsetY,m),patternTransform:this.patternTransform?this.patternTransform.concat():null},w.util.populateWithProperties(this,l,f),l},toSVG:function(f){var m="function"==typeof this.source?this.source():this.source,p=m.width/f.width,l=m.height/f.height,u=this.offsetX/f.width,a=this.offsetY/f.height,d="";return("repeat-x"===this.repeat||"no-repeat"===this.repeat)&&(l=1,a&&(l+=Math.abs(a))),("repeat-y"===this.repeat||"no-repeat"===this.repeat)&&(p=1,u&&(p+=Math.abs(u))),m.src?d=m.src:m.toDataURL&&(d=m.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+u+'" y="'+a+'" width="'+p+'" height="'+l+'">\n<image x="0" y="0" width="'+m.width+'" height="'+m.height+'" xlink:href="'+d+'"></image>\n</pattern>\n'},setOptions:function(f){for(var m in f)this[m]=f[m]},toLive:function(f){var m=this.source;return!m||typeof m.src<"u"&&(!m.complete||0===m.naturalWidth||0===m.naturalHeight)?"":f.createPattern(m,this.repeat)}})}(),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.util.toFixed;f.Shadow?f.warn("fabric.Shadow is already defined."):(f.Shadow=f.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(p){for(var l in"string"==typeof p&&(p=this._parseShadow(p)),p)this[l]=p[l];this.id=f.Object.__uid++},_parseShadow:function(p){var l=p.trim(),u=f.Shadow.reOffsetsAndBlur.exec(l)||[];return{color:(l.replace(f.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(u[1],10)||0,offsetY:parseFloat(u[2],10)||0,blur:parseFloat(u[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(p){var l=40,u=40,a=f.Object.NUM_FRACTION_DIGITS,d=f.util.rotateVector({x:this.offsetX,y:this.offsetY},f.util.degreesToRadians(-p.angle)),c=new f.Color(this.color);return p.width&&p.height&&(l=100*m((Math.abs(d.x)+this.blur)/p.width,a)+20,u=100*m((Math.abs(d.y)+this.blur)/p.height,a)+20),p.flipX&&(d.x*=-1),p.flipY&&(d.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+u+'%" height="'+(100+2*u)+'%" x="-'+l+'%" width="'+(100+2*l)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+m(this.blur?this.blur/2:0,a)+'"></feGaussianBlur>\n\t<feOffset dx="'+m(d.x,a)+'" dy="'+m(d.y,a)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+c.toRgb()+'" flood-opacity="'+c.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var p={},l=f.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(u){this[u]!==l[u]&&(p[u]=this[u])},this),p}}),f.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(We),function(){"use strict";if(w.StaticCanvas)w.warn("fabric.StaticCanvas is already defined.");else{var y=w.util.object.extend,f=w.util.getElementOffset,m=w.util.removeFromArray,p=w.util.toFixed,l=w.util.transformPoint,u=w.util.invertTransform,a=w.util.getNodeCanvas,d=w.util.createCanvasElement,g=new Error("Could not initialize `canvas` element");w.StaticCanvas=w.util.createClass(w.CommonMethods,{initialize:function(c,v){v||(v={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(c,v)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:w.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(c,v){var C=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(c),this._initOptions(v),this.interactive||this._initRetinaScaling(),v.overlayImage&&this.setOverlayImage(v.overlayImage,C),v.backgroundImage&&this.setBackgroundImage(v.backgroundImage,C),v.backgroundColor&&this.setBackgroundColor(v.backgroundColor,C),v.overlayColor&&this.setOverlayColor(v.overlayColor,C),this.calcOffset()},_isRetinaScaling:function(){return w.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,w.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var c=w.devicePixelRatio;this.__initRetinaScaling(c,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(c,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(c,v,C){v.setAttribute("width",this.width*c),v.setAttribute("height",this.height*c),C.scale(c,c)},calcOffset:function(){return this._offset=f(this.lowerCanvasEl),this},setOverlayImage:function(c,v,C){return this.__setBgOverlayImage("overlayImage",c,v,C)},setBackgroundImage:function(c,v,C){return this.__setBgOverlayImage("backgroundImage",c,v,C)},setOverlayColor:function(c,v){return this.__setBgOverlayColor("overlayColor",c,v)},setBackgroundColor:function(c,v){return this.__setBgOverlayColor("backgroundColor",c,v)},__setBgOverlayImage:function(c,v,C,D){return"string"==typeof v?w.util.loadImage(v,function(E,M){if(E){var x=new w.Image(E,D);this[c]=x,x.canvas=this}C&&C(E,M)},this,D&&D.crossOrigin):(D&&v.setOptions(D),this[c]=v,v&&(v.canvas=this),C&&C(v,!1)),this},__setBgOverlayColor:function(c,v,C){return this[c]=v,this._initGradient(v,c),this._initPattern(v,c,C),this},_createCanvasElement:function(){var c=d();if(!c||(c.style||(c.style={}),typeof c.getContext>"u"))throw g;return c},_initOptions:function(c){var v=this.lowerCanvasEl;this._setOptions(c),this.width=this.width||parseInt(v.width,10)||0,this.height=this.height||parseInt(v.height,10)||0,this.lowerCanvasEl.style&&(v.width=this.width,v.height=this.height,v.style.width=this.width+"px",v.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(c){this.lowerCanvasEl=c&&c.getContext?c:w.util.getById(c)||this._createCanvasElement(),w.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(c,v){return this.setDimensions({width:c},v)},setHeight:function(c,v){return this.setDimensions({height:c},v)},setDimensions:function(c,v){var C;for(var D in v=v||{},c)C=c[D],v.cssOnly||(this._setBackstoreDimension(D,c[D]),C+="px",this.hasLostContext=!0),v.backstoreOnly||this._setCssDimension(D,C);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),v.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(c,v){return this.lowerCanvasEl[c]=v,this.upperCanvasEl&&(this.upperCanvasEl[c]=v),this.cacheCanvasEl&&(this.cacheCanvasEl[c]=v),this[c]=v,this},_setCssDimension:function(c,v){return this.lowerCanvasEl.style[c]=v,this.upperCanvasEl&&(this.upperCanvasEl.style[c]=v),this.wrapperEl&&(this.wrapperEl.style[c]=v),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(c){var E,M,x,v=this._activeObject,C=this.backgroundImage,D=this.overlayImage;for(this.viewportTransform=c,M=0,x=this._objects.length;M<x;M++)(E=this._objects[M]).group||E.setCoords(!0);return v&&v.setCoords(),C&&C.setCoords(!0),D&&D.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(c,v){var C=c,D=this.viewportTransform.slice(0);c=l(c,u(this.viewportTransform)),D[0]=v,D[3]=v;var E=l(c,D);return D[4]+=C.x-E.x,D[5]+=C.y-E.y,this.setViewportTransform(D)},setZoom:function(c){return this.zoomToPoint(new w.Point(0,0),c),this},absolutePan:function(c){var v=this.viewportTransform.slice(0);return v[4]=-c.x,v[5]=-c.y,this.setViewportTransform(v)},relativePan:function(c){return this.absolutePan(new w.Point(-c.x-this.viewportTransform[4],-c.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(c){this.stateful&&c.setupState(),c._set("canvas",this),c.setCoords(),this.fire("object:added",{target:c}),c.fire("added")},_onObjectRemoved:function(c){this.fire("object:removed",{target:c}),c.fire("removed"),delete c.canvas},clearContext:function(c){return c.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){return this.renderCanvas(this.contextContainer,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=w.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var c={},v=this.width,C=this.height,D=u(this.viewportTransform);return c.tl=l({x:0,y:0},D),c.br=l({x:v,y:C},D),c.tr=new w.Point(c.br.x,c.tl.y),c.bl=new w.Point(c.tl.x,c.br.y),this.vptCoords=c,c},cancelRequestedRender:function(){this.isRendering&&(w.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(c,v){var C=this.viewportTransform,D=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(c),w.util.setImageSmoothing(c,this.imageSmoothingEnabled),this.fire("before:render",{ctx:c}),this._renderBackground(c),c.save(),c.transform(C[0],C[1],C[2],C[3],C[4],C[5]),this._renderObjects(c,v),c.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(c),D&&(D.canvas=this,D.shouldCache(),D._transformDone=!0,D.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(c)),this._renderOverlay(c),this.controlsAboveOverlay&&this.interactive&&this.drawControls(c),this.fire("after:render",{ctx:c})},drawClipPathOnCanvas:function(c){var v=this.viewportTransform,C=this.clipPath;c.save(),c.transform(v[0],v[1],v[2],v[3],v[4],v[5]),c.globalCompositeOperation="destination-in",C.transform(c),c.scale(1/C.zoomX,1/C.zoomY),c.drawImage(C._cacheCanvas,-C.cacheTranslationX,-C.cacheTranslationY),c.restore()},_renderObjects:function(c,v){var C,D;for(C=0,D=v.length;C<D;++C)v[C]&&v[C].render(c)},_renderBackgroundOrOverlay:function(c,v){var C=this[v+"Color"],D=this[v+"Image"],E=this.viewportTransform,M=this[v+"Vpt"];if(C||D){if(C){c.save(),c.beginPath(),c.moveTo(0,0),c.lineTo(this.width,0),c.lineTo(this.width,this.height),c.lineTo(0,this.height),c.closePath(),c.fillStyle=C.toLive?C.toLive(c,this):C,M&&c.transform(E[0],E[1],E[2],E[3],E[4],E[5]),c.transform(1,0,0,1,C.offsetX||0,C.offsetY||0);var x=C.gradientTransform||C.patternTransform;x&&c.transform(x[0],x[1],x[2],x[3],x[4],x[5]),c.fill(),c.restore()}D&&(c.save(),M&&c.transform(E[0],E[1],E[2],E[3],E[4],E[5]),D.render(c),c.restore())}},_renderBackground:function(c){this._renderBackgroundOrOverlay(c,"background")},_renderOverlay:function(c){this._renderBackgroundOrOverlay(c,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new w.Point(this.width/2,this.height/2)},centerObjectH:function(c){return this._centerObject(c,new w.Point(this.getCenterPoint().x,c.getCenterPoint().y))},centerObjectV:function(c){return this._centerObject(c,new w.Point(c.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(c){var v=this.getCenterPoint();return this._centerObject(c,v)},viewportCenterObject:function(c){var v=this.getVpCenter();return this._centerObject(c,v)},viewportCenterObjectH:function(c){var v=this.getVpCenter();return this._centerObject(c,new w.Point(v.x,c.getCenterPoint().y)),this},viewportCenterObjectV:function(c){var v=this.getVpCenter();return this._centerObject(c,new w.Point(c.getCenterPoint().x,v.y))},getVpCenter:function(){var c=this.getCenterPoint(),v=u(this.viewportTransform);return l(c,v)},_centerObject:function(c,v){return c.setPositionByOrigin(v,"center","center"),c.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(c){return this.toDatalessObject(c)},toObject:function(c){return this._toObjectMethod("toObject",c)},toDatalessObject:function(c){return this._toObjectMethod("toDatalessObject",c)},_toObjectMethod:function(c,v){var C=this.clipPath,D={version:w.version,objects:this._toObjects(c,v)};return C&&!C.excludeFromExport&&(D.clipPath=this._toObject(this.clipPath,c,v)),y(D,this.__serializeBgOverlay(c,v)),w.util.populateWithProperties(this,D,v),D},_toObjects:function(c,v){return this._objects.filter(function(C){return!C.excludeFromExport}).map(function(C){return this._toObject(C,c,v)},this)},_toObject:function(c,v,C){var D;this.includeDefaultValues||(D=c.includeDefaultValues,c.includeDefaultValues=!1);var E=c[v](C);return this.includeDefaultValues||(c.includeDefaultValues=D),E},__serializeBgOverlay:function(c,v){var C={},D=this.backgroundImage,E=this.overlayImage,M=this.backgroundColor,x=this.overlayColor;return M&&M.toObject?M.excludeFromExport||(C.background=M.toObject(v)):M&&(C.background=M),x&&x.toObject?x.excludeFromExport||(C.overlay=x.toObject(v)):x&&(C.overlay=x),D&&!D.excludeFromExport&&(C.backgroundImage=this._toObject(D,c,v)),E&&!E.excludeFromExport&&(C.overlayImage=this._toObject(E,c,v)),C},svgViewportTransformation:!0,toSVG:function(c,v){c||(c={}),c.reviver=v;var C=[];return this._setSVGPreamble(C,c),this._setSVGHeader(C,c),this.clipPath&&C.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(C,"background"),this._setSVGBgOverlayImage(C,"backgroundImage",v),this._setSVGObjects(C,v),this.clipPath&&C.push("</g>\n"),this._setSVGBgOverlayColor(C,"overlay"),this._setSVGBgOverlayImage(C,"overlayImage",v),C.push("</svg>"),C.join("")},_setSVGPreamble:function(c,v){v.suppressPreamble||c.push('<?xml version="1.0" encoding="',v.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(c,v){var E,C=v.width||this.width,D=v.height||this.height,M='viewBox="0 0 '+this.width+" "+this.height+'" ',x=w.Object.NUM_FRACTION_DIGITS;v.viewBox?M='viewBox="'+v.viewBox.x+" "+v.viewBox.y+" "+v.viewBox.width+" "+v.viewBox.height+'" ':this.svgViewportTransformation&&(M='viewBox="'+p(-(E=this.viewportTransform)[4]/E[0],x)+" "+p(-E[5]/E[3],x)+" "+p(this.width/E[0],x)+" "+p(this.height/E[3],x)+'" '),c.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',C,'" ','height="',D,'" ',M,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",w.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(v),"</defs>\n")},createSVGClipPathMarkup:function(c){var v=this.clipPath;return v?(v.clipPathId="CLIPPATH_"+w.Object.__uid++,'<clipPath id="'+v.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(c.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var c=this;return["background","overlay"].map(function(C){var D=c[C+"Color"];if(D&&D.toLive){var E=c[C+"Vpt"],M=c.viewportTransform;return D.toSVG({width:c.width/(E?M[0]:1),height:c.height/(E?M[3]:1)},{additionalTransform:E?w.util.matrixToSVG(M):""})}}).join("")},createSVGFontFacesMarkup:function(){var C,D,E,M,x,j,q,he,c="",v={},me=w.fontPaths,le=[];for(this._objects.forEach(function _e(ie){le.push(ie),ie._objects&&ie._objects.forEach(_e)}),q=0,he=le.length;q<he;q++)if(D=(C=le[q]).fontFamily,-1!==C.type.indexOf("text")&&!v[D]&&me[D]&&(v[D]=!0,C.styles))for(x in E=C.styles)for(j in M=E[x])!v[D=M[j].fontFamily]&&me[D]&&(v[D]=!0);for(var De in v)c+=["\t\t@font-face {\n","\t\t\tfont-family: '",De,"';\n","\t\t\tsrc: url('",me[De],"');\n","\t\t}\n"].join("");return c&&(c=['\t<style type="text/css">',"<![CDATA[\n",c,"]]>","</style>\n"].join("")),c},_setSVGObjects:function(c,v){var C,D,E,M=this._objects;for(D=0,E=M.length;D<E;D++)!(C=M[D]).excludeFromExport&&this._setSVGObject(c,C,v)},_setSVGObject:function(c,v,C){c.push(v.toSVG(C))},_setSVGBgOverlayImage:function(c,v,C){this[v]&&!this[v].excludeFromExport&&this[v].toSVG&&c.push(this[v].toSVG(C))},_setSVGBgOverlayColor:function(c,v){var C=this[v+"Color"],E=this.width,M=this.height;if(C)if(C.toLive){var x=C.repeat,R=w.util.invertTransform(this.viewportTransform),q=this[v+"Vpt"]?w.util.matrixToSVG(R):"";c.push('<rect transform="'+q+" translate(",E/2,",",M/2,')"',' x="',C.offsetX-E/2,'" y="',C.offsetY-M/2,'" ','width="',"repeat-y"===x||"no-repeat"===x?C.source.width:E,'" height="',"repeat-x"===x||"no-repeat"===x?C.source.height:M,'" fill="url(#SVGID_'+C.id+')"',"></rect>\n")}else c.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',C,'"',"></rect>\n")},sendToBack:function(c){if(!c)return this;var C,D,E,v=this._activeObject;if(c===v&&"activeSelection"===c.type)for(C=(E=v._objects).length;C--;)m(this._objects,D=E[C]),this._objects.unshift(D);else m(this._objects,c),this._objects.unshift(c);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(c){if(!c)return this;var C,D,E,v=this._activeObject;if(c===v&&"activeSelection"===c.type)for(E=v._objects,C=0;C<E.length;C++)m(this._objects,D=E[C]),this._objects.push(D);else m(this._objects,c),this._objects.push(c);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(c,v){if(!c)return this;var D,E,M,x,R,C=this._activeObject,j=0;if(c===C&&"activeSelection"===c.type)for(R=C._objects,D=0;D<R.length;D++)(M=this._objects.indexOf(E=R[D]))>0+j&&(x=M-1,m(this._objects,E),this._objects.splice(x,0,E)),j++;else 0!==(M=this._objects.indexOf(c))&&(x=this._findNewLowerIndex(c,M,v),m(this._objects,c),this._objects.splice(x,0,c));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(c,v,C){var D,E;if(C){for(D=v,E=v-1;E>=0;--E)if(c.intersectsWithObject(this._objects[E])||c.isContainedWithinObject(this._objects[E])||this._objects[E].isContainedWithinObject(c)){D=E;break}}else D=v-1;return D},bringForward:function(c,v){if(!c)return this;var D,E,M,x,R,C=this._activeObject,j=0;if(c===C&&"activeSelection"===c.type)for(D=(R=C._objects).length;D--;)(M=this._objects.indexOf(E=R[D]))<this._objects.length-1-j&&(x=M+1,m(this._objects,E),this._objects.splice(x,0,E)),j++;else(M=this._objects.indexOf(c))!==this._objects.length-1&&(x=this._findNewUpperIndex(c,M,v),m(this._objects,c),this._objects.splice(x,0,c));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(c,v,C){var D,E,M;if(C){for(D=v,E=v+1,M=this._objects.length;E<M;++E)if(c.intersectsWithObject(this._objects[E])||c.isContainedWithinObject(this._objects[E])||this._objects[E].isContainedWithinObject(c)){D=E;break}}else D=v+1;return D},moveTo:function(c,v){return m(this._objects,c),this._objects.splice(v,0,c),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(w.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(c){c.dispose&&c.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),w.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),w.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),y(w.StaticCanvas.prototype,w.Observable),y(w.StaticCanvas.prototype,w.Collection),y(w.StaticCanvas.prototype,w.DataURLExporter),y(w.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(c){var v=d();if(!v||!v.getContext)return null;var C=v.getContext("2d");return C&&"setLineDash"===c?typeof C.setLineDash<"u":null}}),w.StaticCanvas.prototype.toJSON=w.StaticCanvas.prototype.toObject,w.isLikelyNode&&(w.StaticCanvas.prototype.createPNGStream=function(){var c=a(this.lowerCanvasEl);return c&&c.createPNGStream()},w.StaticCanvas.prototype.createJPEGStream=function(c){var v=a(this.lowerCanvasEl);return v&&v.createJPEGStream(c)})}}(),w.BaseBrush=w.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(y){y.strokeStyle=this.color,y.lineWidth=this.width,y.lineCap=this.strokeLineCap,y.miterLimit=this.strokeMiterLimit,y.lineJoin=this.strokeLineJoin,y.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(y){var f=this.canvas.viewportTransform;y.save(),y.transform(f[0],f[1],f[2],f[3],f[4],f[5])},_setShadow:function(){if(this.shadow){var y=this.canvas,f=this.shadow,m=y.contextTop,p=y.getZoom();y&&y._isRetinaScaling()&&(p*=w.devicePixelRatio),m.shadowColor=f.color,m.shadowBlur=f.blur*p,m.shadowOffsetX=f.offsetX*p,m.shadowOffsetY=f.offsetY*p}},needsFullRender:function(){return new w.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var y=this.canvas.contextTop;y.shadowColor="",y.shadowBlur=y.shadowOffsetX=y.shadowOffsetY=0},_isOutSideCanvas:function(y){return y.x<0||y.x>this.canvas.getWidth()||y.y<0||y.y>this.canvas.getHeight()}}),w.PencilBrush=w.util.createClass(w.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(y){this.canvas=y,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(y,f,m){var p=f.midPointFrom(m);return y.quadraticCurveTo(f.x,f.y,p.x,p.y),p},onMouseDown:function(y,f){this.canvas._isMainEvent(f.e)&&(this.drawStraightLine=f.e[this.straightLineKey],this._prepareForDrawing(y),this._captureDrawingPath(y),this._render())},onMouseMove:function(y,f){if(this.canvas._isMainEvent(f.e)&&(this.drawStraightLine=f.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(y))&&this._captureDrawingPath(y)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var m=this._points,p=m.length,l=this.canvas.contextTop;this._saveAndTransform(l),this.oldEnd&&(l.beginPath(),l.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(l,m[p-2],m[p-1],!0),l.stroke(),l.restore()}},onMouseUp:function(y){return!this.canvas._isMainEvent(y.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(y){var f=new w.Point(y.x,y.y);this._reset(),this._addPoint(f),this.canvas.contextTop.moveTo(f.x,f.y)},_addPoint:function(y){return!(this._points.length>1&&y.eq(this._points[this._points.length-1])||(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(y),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(y){var f=new w.Point(y.x,y.y);return this._addPoint(f)},_render:function(y){var f,m,p=this._points[0],l=this._points[1];if(this._saveAndTransform(y=y||this.canvas.contextTop),y.beginPath(),2===this._points.length&&p.x===l.x&&p.y===l.y){var u=this.width/1e3;p=new w.Point(p.x,p.y),l=new w.Point(l.x,l.y),p.x-=u,l.x+=u}for(y.moveTo(p.x,p.y),f=1,m=this._points.length;f<m;f++)this._drawSegment(y,p,l),p=this._points[f],l=this._points[f+1];y.lineTo(p.x,p.y),y.stroke(),y.restore()},convertPointsToSVGPath:function(y){return w.util.getSmoothPathFromPoints(y,this.width/1e3)},_isEmptySVGPath:function(y){return"M 0 0 Q 0 0 0 0 L 0 0"===w.util.joinPath(y)},createPath:function(y){var f=new w.Path(y,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,f.shadow=new w.Shadow(this.shadow)),f},decimatePoints:function(y,f){if(y.length<=2)return y;var l,m=this.canvas.getZoom(),p=Math.pow(f/m,2),u=y.length-1,a=y[0],d=[a];for(l=1;l<u-1;l++)Math.pow(a.x-y[l].x,2)+Math.pow(a.y-y[l].y,2)>=p&&d.push(a=y[l]);return d.push(y[u]),d},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var f=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(f))this.canvas.requestRenderAll();else{var m=this.createPath(f);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:m}),this.canvas.add(m),this.canvas.requestRenderAll(),m.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:m})}}}),w.CircleBrush=w.util.createClass(w.BaseBrush,{width:10,initialize:function(y){this.canvas=y,this.points=[]},drawDot:function(y){var f=this.addPoint(y),m=this.canvas.contextTop;this._saveAndTransform(m),this.dot(m,f),m.restore()},dot:function(y,f){y.fillStyle=f.fill,y.beginPath(),y.arc(f.x,f.y,f.radius,0,2*Math.PI,!1),y.closePath(),y.fill()},onMouseDown:function(y){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(y)},_render:function(){var f,m,y=this.canvas.contextTop,p=this.points;for(this._saveAndTransform(y),f=0,m=p.length;f<m;f++)this.dot(y,p[f]);y.restore()},onMouseMove:function(y){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(y)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(y),this._render()):this.drawDot(y))},onMouseUp:function(){var f,m,y=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var p=[];for(f=0,m=this.points.length;f<m;f++){var l=this.points[f],u=new w.Circle({radius:l.radius,left:l.x,top:l.y,originX:"center",originY:"center",fill:l.fill});this.shadow&&(u.shadow=new w.Shadow(this.shadow)),p.push(u)}var a=new w.Group(p);a.canvas=this.canvas,this.canvas.fire("before:path:created",{path:a}),this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=y,this.canvas.requestRenderAll()},addPoint:function(y){var f=new w.Point(y.x,y.y),m=w.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,p=new w.Color(this.color).setAlpha(w.util.getRandomInt(0,100)/100).toRgba();return f.radius=m,f.fill=p,this.points.push(f),f}}),w.SprayBrush=w.util.createClass(w.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(y){this.canvas=y,this.sprayChunks=[]},onMouseDown:function(y){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(y),this.render(this.sprayChunkPoints)},onMouseMove:function(y){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(y)||(this.addSprayChunk(y),this.render(this.sprayChunkPoints))},onMouseUp:function(){var y=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var f=[],m=0,p=this.sprayChunks.length;m<p;m++)for(var l=this.sprayChunks[m],u=0,a=l.length;u<a;u++){var d=new w.Rect({width:l[u].width,height:l[u].width,left:l[u].x+1,top:l[u].y+1,originX:"center",originY:"center",fill:this.color});f.push(d)}this.optimizeOverlapping&&(f=this._getOptimizedRects(f));var g=new w.Group(f);this.shadow&&g.set("shadow",new w.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:g}),this.canvas.add(g),this.canvas.fire("path:created",{path:g}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=y,this.canvas.requestRenderAll()},_getOptimizedRects:function(y){var m,p,l,f={};for(p=0,l=y.length;p<l;p++)f[m=y[p].left+""+y[p].top]||(f[m]=y[p]);var u=[];for(m in f)u.push(f[m]);return u},render:function(y){var m,p,f=this.canvas.contextTop;for(f.fillStyle=this.color,this._saveAndTransform(f),m=0,p=y.length;m<p;m++){var l=y[m];typeof l.opacity<"u"&&(f.globalAlpha=l.opacity),f.fillRect(l.x,l.y,l.width,l.width)}f.restore()},_render:function(){var f,m,y=this.canvas.contextTop;for(y.fillStyle=this.color,this._saveAndTransform(y),f=0,m=this.sprayChunks.length;f<m;f++)this.render(this.sprayChunks[f]);y.restore()},addSprayChunk:function(y){this.sprayChunkPoints=[];var f,m,p,u,l=this.width/2;for(u=0;u<this.density;u++){f=w.util.getRandomInt(y.x-l,y.x+l),m=w.util.getRandomInt(y.y-l,y.y+l),p=this.dotWidthVariance?w.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var a=new w.Point(f,m);a.width=p,this.randomOpacity&&(a.opacity=w.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),w.PatternBrush=w.util.createClass(w.PencilBrush,{getPatternSrc:function(){var m=w.util.createCanvasElement(),p=m.getContext("2d");return m.width=m.height=25,p.fillStyle=this.color,p.beginPath(),p.arc(10,10,10,0,2*Math.PI,!1),p.closePath(),p.fill(),m},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(y){return y.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(y){this.callSuper("_setBrushStyles",y),y.strokeStyle=this.getPattern(y)},createPath:function(y){var f=this.callSuper("createPath",y),m=f._getLeftTopCoords().scalarAdd(f.strokeWidth/2);return f.stroke=new w.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-m.x,offsetY:-m.y}),f}}),function(){var y=w.util.getPointer,f=w.util.degreesToRadians,m=w.util.isTouchEvent;for(var p in w.Canvas=w.util.createClass(w.StaticCanvas,{initialize:function(l,u){u||(u={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,u),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=w.PencilBrush&&new w.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var u,a,d,l=this.getActiveObjects();if(l.length>0&&!this.preserveObjectStacking){a=[],d=[];for(var g=0,c=this._objects.length;g<c;g++)-1===l.indexOf(u=this._objects[g])?a.push(u):d.push(u);l.length>1&&(this._activeObject._objects=d),a.push.apply(a,d)}else a=this._objects;return a},renderAll:function(){return this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),this.renderCanvas(this.contextContainer,this._chooseObjectsToRender()),this},renderTopLayer:function(l){l.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(l),this.contextTopDirty=!0),l.restore()},renderTop:function(){var l=this.contextTop;return this.clearContext(l),this.renderTopLayer(l),this.fire("after:render"),this},_normalizePointer:function(l,u){var a=l.calcTransformMatrix(),d=w.util.invertTransform(a),g=this.restorePointerVpt(u);return w.util.transformPoint(g,d)},isTargetTransparent:function(l,u,a){if(l.shouldCache()&&l._cacheCanvas&&l!==this._activeObject){var d=this._normalizePointer(l,{x:u,y:a}),g=Math.max(l.cacheTranslationX+d.x*l.zoomX,0),c=Math.max(l.cacheTranslationY+d.y*l.zoomY,0);return w.util.isTransparent(l._cacheContext,Math.round(g),Math.round(c),this.targetFindTolerance)}var v=this.contextCache,C=l.selectionBackgroundColor,D=this.viewportTransform;return l.selectionBackgroundColor="",this.clearContext(v),v.save(),v.transform(D[0],D[1],D[2],D[3],D[4],D[5]),l.render(v),v.restore(),l.selectionBackgroundColor=C,w.util.isTransparent(v,u,a,this.targetFindTolerance)},_isSelectionKeyPressed:function(l){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(a){return!0===l[a]}):l[this.selectionKey]},_shouldClearSelection:function(l,u){var a=this.getActiveObjects(),d=this._activeObject;return!u||u&&d&&a.length>1&&-1===a.indexOf(u)&&d!==u&&!this._isSelectionKeyPressed(l)||u&&!u.evented||u&&!u.selectable&&d&&d!==u},_shouldCenterTransform:function(l,u,a){var d;if(l)return"scale"===u||"scaleX"===u||"scaleY"===u||"resizing"===u?d=this.centeredScaling||l.centeredScaling:"rotate"===u&&(d=this.centeredRotation||l.centeredRotation),d?!a:a},_getOriginFromCorner:function(l,u){var a={x:l.originX,y:l.originY};return"ml"===u||"tl"===u||"bl"===u?a.x="right":("mr"===u||"tr"===u||"br"===u)&&(a.x="left"),"tl"===u||"mt"===u||"tr"===u?a.y="bottom":("bl"===u||"mb"===u||"br"===u)&&(a.y="top"),a},_getActionFromCorner:function(l,u,a,d){if(!u||!l)return"drag";var g=d.controls[u];return g.getActionName(a,g,d)},_setupCurrentTransform:function(l,u,a){if(u){var d=this.getPointer(l),g=u.__corner,c=u.controls[g],v=a&&g?c.getActionHandler(l,u,c):w.controlsUtils.dragHandler,C=this._getActionFromCorner(a,g,l,u),D=this._getOriginFromCorner(u,g),E=l[this.centeredKey],M={target:u,action:C,actionHandler:v,corner:g,scaleX:u.scaleX,scaleY:u.scaleY,skewX:u.skewX,skewY:u.skewY,offsetX:d.x-u.left,offsetY:d.y-u.top,originX:D.x,originY:D.y,ex:d.x,ey:d.y,lastX:d.x,lastY:d.y,theta:f(u.angle),width:u.width*u.scaleX,shiftKey:l.shiftKey,altKey:E,original:w.util.saveObjectTransform(u)};this._shouldCenterTransform(u,C,E)&&(M.originX="center",M.originY="center"),M.original.originX=D.x,M.original.originY=D.y,this._currentTransform=M,this._beforeTransform(l)}},setCursor:function(l){this.upperCanvasEl.style.cursor=l},_drawSelection:function(l){var u=this._groupSelector,a=new w.Point(u.ex,u.ey),d=w.util.transformPoint(a,this.viewportTransform),g=new w.Point(u.ex+u.left,u.ey+u.top),c=w.util.transformPoint(g,this.viewportTransform),v=Math.min(d.x,c.x),C=Math.min(d.y,c.y),D=Math.max(d.x,c.x),E=Math.max(d.y,c.y),M=this.selectionLineWidth/2;this.selectionColor&&(l.fillStyle=this.selectionColor,l.fillRect(v,C,D-v,E-C)),this.selectionLineWidth&&this.selectionBorderColor&&(l.lineWidth=this.selectionLineWidth,l.strokeStyle=this.selectionBorderColor,v+=M,C+=M,D-=M,E-=M,w.Object.prototype._setLineDash.call(this,l,this.selectionDashArray),l.strokeRect(v,C,D-v,E-C))},findTarget:function(l,u){if(!this.skipTargetFind){var v,C,d=this.getPointer(l,!0),g=this._activeObject,c=this.getActiveObjects(),D=m(l),E=c.length>1&&!u||1===c.length;if(this.targets=[],E&&g._findTargetCorner(d,D)||c.length>1&&!u&&g===this._searchPossibleTargets([g],d))return g;if(1===c.length&&g===this._searchPossibleTargets([g],d)){if(!this.preserveObjectStacking)return g;v=g,C=this.targets,this.targets=[]}var M=this._searchPossibleTargets(this._objects,d);return l[this.altSelectionKey]&&M&&v&&M!==v&&(M=v,this.targets=C),M}},_checkTarget:function(l,u,a){if(u&&u.visible&&u.evented&&u.containsPoint(l)){if(!this.perPixelTargetFind&&!u.perPixelTargetFind||u.isEditing)return!0;if(!this.isTargetTransparent(u,a.x,a.y))return!0}},_searchPossibleTargets:function(l,u){for(var a,g,d=l.length;d--;){var c=l[d],v=c.group?this._normalizePointer(c.group,u):u;if(this._checkTarget(v,c,u)){(a=l[d]).subTargetCheck&&a instanceof w.Group&&(g=this._searchPossibleTargets(a._objects,u))&&this.targets.push(g);break}}return a},restorePointerVpt:function(l){return w.util.transformPoint(l,w.util.invertTransform(this.viewportTransform))},getPointer:function(l,u){if(this._absolutePointer&&!u)return this._absolutePointer;if(this._pointer&&u)return this._pointer;var C,a=y(l),d=this.upperCanvasEl,g=d.getBoundingClientRect(),c=g.width||0,v=g.height||0;(!c||!v)&&("top"in g&&"bottom"in g&&(v=Math.abs(g.top-g.bottom)),"right"in g&&"left"in g&&(c=Math.abs(g.right-g.left))),this.calcOffset(),a.x=a.x-this._offset.left,a.y=a.y-this._offset.top,u||(a=this.restorePointerVpt(a));var D=this.getRetinaScaling();return 1!==D&&(a.x/=D,a.y/=D),{x:a.x*(C=0===c||0===v?{width:1,height:1}:{width:d.width/c,height:d.height/v}).width,y:a.y*C.height}},_createUpperCanvas:function(){var l=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),u=this.lowerCanvasEl,a=this.upperCanvasEl;a?a.className="":(a=this._createCanvasElement(),this.upperCanvasEl=a),w.util.addClass(a,"upper-canvas "+l),this.wrapperEl.appendChild(a),this._copyCanvasStyle(u,a),this._applyCanvasStyle(a),this.contextTop=a.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=w.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),w.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),w.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(l){var u=this.width||l.width,a=this.height||l.height;w.util.setStyle(l,{position:"absolute",width:u+"px",height:a+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),l.width=u,l.height=a,w.util.makeElementUnselectable(l)},_copyCanvasStyle:function(l,u){u.style.cssText=l.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var l=this._activeObject;return l?"activeSelection"===l.type&&l._objects?l._objects.slice(0):[l]:[]},_onObjectRemoved:function(l){l===this._activeObject&&(this.fire("before:selection:cleared",{target:l}),this._discardActiveObject(),this.fire("selection:cleared",{target:l}),l.fire("deselected")),l===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",l)},_fireSelectionEvents:function(l,u){var a=!1,d=this.getActiveObjects(),g=[],c=[];l.forEach(function(v){-1===d.indexOf(v)&&(a=!0,v.fire("deselected",{e:u,target:v}),c.push(v))}),d.forEach(function(v){-1===l.indexOf(v)&&(a=!0,v.fire("selected",{e:u,target:v}),g.push(v))}),l.length>0&&d.length>0?a&&this.fire("selection:updated",{e:u,selected:g,deselected:c}):d.length>0?this.fire("selection:created",{e:u,selected:g}):l.length>0&&this.fire("selection:cleared",{e:u,deselected:c})},setActiveObject:function(l,u){var a=this.getActiveObjects();return this._setActiveObject(l,u),this._fireSelectionEvents(a,u),this},_setActiveObject:function(l,u){return!(this._activeObject===l||!this._discardActiveObject(u,l)||l.onSelect({e:u})||(this._activeObject=l,0))},_discardActiveObject:function(l,u){var a=this._activeObject;if(a){if(a.onDeselect({e:l,object:u}))return!1;this._activeObject=null}return!0},discardActiveObject:function(l){var u=this.getActiveObjects(),a=this.getActiveObject();return u.length&&this.fire("before:selection:cleared",{target:a,e:l}),this._discardActiveObject(l),this._fireSelectionEvents(u,l),this},dispose:function(){var l=this.wrapperEl;return this.removeListeners(),l.removeChild(this.upperCanvasEl),l.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(u){w.util.cleanUpJsdomNode(this[u]),this[u]=void 0}.bind(this)),l.parentNode&&l.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,w.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(l){var u=this._activeObject;u&&u._renderControls(l)},_toObject:function(l,u,a){var d=this._realizeGroupTransformOnObject(l),g=this.callSuper("_toObject",l,u,a);return this._unwindGroupTransformOnObject(l,d),g},_realizeGroupTransformOnObject:function(l){if(l.group&&"activeSelection"===l.group.type&&this._activeObject===l.group){var a={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(d){a[d]=l[d]}),w.util.addTransformToObject(l,this._activeObject.calcOwnMatrix()),a}return null},_unwindGroupTransformOnObject:function(l,u){u&&l.set(u)},_setSVGObject:function(l,u,a){var d=this._realizeGroupTransformOnObject(u);this.callSuper("_setSVGObject",l,u,a),this._unwindGroupTransformOnObject(u,d)},setViewportTransform:function(l){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),w.StaticCanvas.prototype.setViewportTransform.call(this,l)}}),w.StaticCanvas)"prototype"!==p&&(w.Canvas[p]=w.StaticCanvas[p])}(),function(){var y=w.util.addListener,f=w.util.removeListener,u={passive:!1};function a(d,g){return d.button&&d.button===g-1}w.util.object.extend(w.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(y,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(d,g){var c=this.upperCanvasEl,v=this._getEventPrefix();d(w.window,"resize",this._onResize),d(c,v+"down",this._onMouseDown),d(c,v+"move",this._onMouseMove,u),d(c,v+"out",this._onMouseOut),d(c,v+"enter",this._onMouseEnter),d(c,"wheel",this._onMouseWheel),d(c,"contextmenu",this._onContextMenu),d(c,"dblclick",this._onDoubleClick),d(c,"dragover",this._onDragOver),d(c,"dragenter",this._onDragEnter),d(c,"dragleave",this._onDragLeave),d(c,"drop",this._onDrop),this.enablePointerEvents||d(c,"touchstart",this._onTouchStart,u),typeof eventjs<"u"&&g in eventjs&&(eventjs[g](c,"gesture",this._onGesture),eventjs[g](c,"drag",this._onDrag),eventjs[g](c,"orientation",this._onOrientationChange),eventjs[g](c,"shake",this._onShake),eventjs[g](c,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(f,"remove");var d=this._getEventPrefix();f(w.document,d+"up",this._onMouseUp),f(w.document,"touchend",this._onTouchEnd,u),f(w.document,d+"move",this._onMouseMove,u),f(w.document,"touchmove",this._onMouseMove,u)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(d,g){this.__onTransformGesture&&this.__onTransformGesture(d,g)},_onDrag:function(d,g){this.__onDrag&&this.__onDrag(d,g)},_onMouseWheel:function(d){this.__onMouseWheel(d)},_onMouseOut:function(d){var g=this._hoveredTarget;this.fire("mouse:out",{target:g,e:d}),this._hoveredTarget=null,g&&g.fire("mouseout",{e:d});var c=this;this._hoveredTargets.forEach(function(v){c.fire("mouse:out",{target:g,e:d}),v&&g.fire("mouseout",{e:d})}),this._hoveredTargets=[]},_onMouseEnter:function(d){!this._currentTransform&&!this.findTarget(d)&&(this.fire("mouse:over",{target:null,e:d}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(d,g){this.__onOrientationChange&&this.__onOrientationChange(d,g)},_onShake:function(d,g){this.__onShake&&this.__onShake(d,g)},_onLongPress:function(d,g){this.__onLongPress&&this.__onLongPress(d,g)},_onDragOver:function(d){d.preventDefault();var g=this._simpleEventHandler("dragover",d);this._fireEnterLeaveEvents(g,d)},_onDrop:function(d){return this._simpleEventHandler("drop:before",d),this._simpleEventHandler("drop",d)},_onContextMenu:function(d){return this.stopContextMenu&&(d.stopPropagation(),d.preventDefault()),!1},_onDoubleClick:function(d){this._cacheTransformEventData(d),this._handleEvent(d,"dblclick"),this._resetTransformEventData(d)},getPointerId:function(d){var g=d.changedTouches;return g?g[0]&&g[0].identifier:this.enablePointerEvents?d.pointerId:-1},_isMainEvent:function(d){return!0===d.isPrimary||!1!==d.isPrimary&&("touchend"===d.type&&0===d.touches.length||!d.changedTouches||d.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(d){d.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(d)),this.__onMouseDown(d),this._resetTransformEventData();var g=this.upperCanvasEl,c=this._getEventPrefix();y(w.document,"touchend",this._onTouchEnd,u),y(w.document,"touchmove",this._onMouseMove,u),f(g,c+"down",this._onMouseDown)},_onMouseDown:function(d){this.__onMouseDown(d),this._resetTransformEventData();var g=this.upperCanvasEl,c=this._getEventPrefix();f(g,c+"move",this._onMouseMove,u),y(w.document,c+"up",this._onMouseUp),y(w.document,c+"move",this._onMouseMove,u)},_onTouchEnd:function(d){if(!(d.touches.length>0)){this.__onMouseUp(d),this._resetTransformEventData(),this.mainTouchId=null;var g=this._getEventPrefix();f(w.document,"touchend",this._onTouchEnd,u),f(w.document,"touchmove",this._onMouseMove,u);var c=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){y(c.upperCanvasEl,g+"down",c._onMouseDown),c._willAddMouseDown=0},400)}},_onMouseUp:function(d){this.__onMouseUp(d),this._resetTransformEventData();var g=this.upperCanvasEl,c=this._getEventPrefix();this._isMainEvent(d)&&(f(w.document,c+"up",this._onMouseUp),f(w.document,c+"move",this._onMouseMove,u),y(g,c+"move",this._onMouseMove,u))},_onMouseMove:function(d){!this.allowTouchScrolling&&d.preventDefault&&d.preventDefault(),this.__onMouseMove(d)},_onResize:function(){this.calcOffset()},_shouldRender:function(d){var g=this._activeObject;return!!(!!g!=!!d||g&&d&&g!==d)},__onMouseUp:function(d){var g,c=this._currentTransform,v=this._groupSelector,C=!1,D=!v||0===v.left&&0===v.top;if(this._cacheTransformEventData(d),g=this._target,this._handleEvent(d,"up:before"),a(d,3))this.fireRightClick&&this._handleEvent(d,"up",3,D);else{if(a(d,2))return this.fireMiddleClick&&this._handleEvent(d,"up",2,D),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(d);else if(this._isMainEvent(d)){if(c&&(this._finalizeCurrentTransform(d),C=c.actionPerformed),!D){var E=g===this._activeObject;this._maybeGroupObjects(d),C||(C=this._shouldRender(g)||!E&&g===this._activeObject)}var M,x;if(g){if(M=g._findTargetCorner(this.getPointer(d,!0),w.util.isTouchEvent(d)),g.selectable&&g!==this._activeObject&&"up"===g.activeOn)this.setActiveObject(g,d),C=!0;else{var R=g.controls[M],j=R&&R.getMouseUpHandler(d,g,R);j&&j(d,c,(x=this.getPointer(d)).x,x.y)}g.isMoving=!1}if(c&&(c.target!==g||c.corner!==M)){var q=c.target&&c.target.controls[c.corner],he=q&&q.getMouseUpHandler(d,g,R);x=x||this.getPointer(d),he&&he(d,c,x.x,x.y)}this._setCursorFromEvent(d,g),this._handleEvent(d,"up",1,D),this._groupSelector=null,this._currentTransform=null,g&&(g.__corner=0),C?this.requestRenderAll():D||this.renderTop()}}},_simpleEventHandler:function(d,g){var c=this.findTarget(g),v=this.targets,C={e:g,target:c,subTargets:v};if(this.fire(d,C),c&&c.fire(d,C),!v)return c;for(var D=0;D<v.length;D++)v[D].fire(d,C);return c},_handleEvent:function(d,g,c,v){var C=this._target,D=this.targets||[],E={e:d,target:C,subTargets:D,button:c||1,isClick:v||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===g&&(E.currentTarget=this.findTarget(d),E.currentSubTargets=this.targets),this.fire("mouse:"+g,E),C&&C.fire("mouse"+g,E);for(var M=0;M<D.length;M++)D[M].fire("mouse"+g,E)},_finalizeCurrentTransform:function(d){var g=this._currentTransform,c=g.target,v={e:d,target:c,transform:g,action:g.action};c._scaling&&(c._scaling=!1),c.setCoords(),(g.actionPerformed||this.stateful&&c.hasStateChanged())&&this._fire("modified",v)},_onMouseDownInDrawingMode:function(d){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(d).requestRenderAll();var g=this.getPointer(d);this.freeDrawingBrush.onMouseDown(g,{e:d,pointer:g}),this._handleEvent(d,"down")},_onMouseMoveInDrawingMode:function(d){if(this._isCurrentlyDrawing){var g=this.getPointer(d);this.freeDrawingBrush.onMouseMove(g,{e:d,pointer:g})}this.setCursor(this.freeDrawingCursor),this._handleEvent(d,"move")},_onMouseUpInDrawingMode:function(d){var g=this.getPointer(d);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:d,pointer:g}),this._handleEvent(d,"up")},__onMouseDown:function(d){this._cacheTransformEventData(d),this._handleEvent(d,"down:before");var g=this._target;if(a(d,3))this.fireRightClick&&this._handleEvent(d,"down",3);else if(a(d,2))this.fireMiddleClick&&this._handleEvent(d,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(d);else if(this._isMainEvent(d)&&!this._currentTransform){this._previousPointer=c=this._pointer;var v=this._shouldRender(g),C=this._shouldGroup(d,g);if(this._shouldClearSelection(d,g)?this.discardActiveObject(d):C&&(this._handleGrouping(d,g),g=this._activeObject),this.selection&&(!g||!g.selectable&&!g.isEditing&&g!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),g){var D=g===this._activeObject;g.selectable&&"down"===g.activeOn&&this.setActiveObject(g,d);var E=g._findTargetCorner(this.getPointer(d,!0),w.util.isTouchEvent(d));if(g.__corner=E,g===this._activeObject&&(E||!C)){this._setupCurrentTransform(d,g,D);var M=g.controls[E],c=this.getPointer(d),x=M&&M.getMouseDownHandler(d,g,M);x&&x(d,this._currentTransform,c.x,c.y)}}this._handleEvent(d,"down"),(v||C)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(d){this._resetTransformEventData(),this._pointer=this.getPointer(d,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(d)||null},_beforeTransform:function(d){var g=this._currentTransform;this.stateful&&g.target.saveState(),this.fire("before:transform",{e:d,transform:g})},__onMouseMove:function(d){var g,c;if(this._handleEvent(d,"move:before"),this._cacheTransformEventData(d),this.isDrawingMode)this._onMouseMoveInDrawingMode(d);else if(this._isMainEvent(d)){var v=this._groupSelector;v?(v.left=(c=this._absolutePointer).x-v.ex,v.top=c.y-v.ey,this.renderTop()):this._currentTransform?this._transformObject(d):(g=this.findTarget(d)||null,this._setCursorFromEvent(d,g),this._fireOverOutEvents(g,d)),this._handleEvent(d,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(d,g){var c=this._hoveredTarget,v=this._hoveredTargets,C=this.targets,D=Math.max(v.length,C.length);this.fireSyntheticInOutEvents(d,g,{oldTarget:c,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var E=0;E<D;E++)this.fireSyntheticInOutEvents(C[E],g,{oldTarget:v[E],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=d,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(d,g){var c=this._draggedoverTarget,v=this._hoveredTargets,C=this.targets,D=Math.max(v.length,C.length);this.fireSyntheticInOutEvents(d,g,{oldTarget:c,evtOut:"dragleave",evtIn:"dragenter"});for(var E=0;E<D;E++)this.fireSyntheticInOutEvents(C[E],g,{oldTarget:v[E],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=d},fireSyntheticInOutEvents:function(d,g,c){var v,C,M,D=c.oldTarget,x=D!==d,R=c.canvasEvtIn,j=c.canvasEvtOut;x&&(v={e:g,target:d,previousTarget:D},C={e:g,target:D,nextTarget:d}),M=d&&x,D&&x&&(j&&this.fire(j,C),D.fire(c.evtOut,C)),M&&(R&&this.fire(R,v),d.fire(c.evtIn,v))},__onMouseWheel:function(d){this._cacheTransformEventData(d),this._handleEvent(d,"wheel"),this._resetTransformEventData()},_transformObject:function(d){var g=this.getPointer(d),c=this._currentTransform;c.reset=!1,c.shiftKey=d.shiftKey,c.altKey=d[this.centeredKey],this._performTransformAction(d,c,g),c.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(d,g,c){var D=g.action,E=!1,M=g.actionHandler;M&&(E=M(d,g,c.x,c.y)),"drag"===D&&E&&(g.target.isMoving=!0,this.setCursor(g.target.moveCursor||this.moveCursor)),g.actionPerformed=g.actionPerformed||E},_fire:w.controlsUtils.fireEvent,_setCursorFromEvent:function(d,g){if(!g)return this.setCursor(this.defaultCursor),!1;var c=g.hoverCursor||this.hoverCursor,v=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,C=(!v||!v.contains(g))&&g._findTargetCorner(this.getPointer(d,!0));C?this.setCursor(this.getCornerCursor(C,g,d)):(g.subTargetCheck&&this.targets.concat().reverse().map(function(D){c=D.hoverCursor||c}),this.setCursor(c))},getCornerCursor:function(d,g,c){var v=g.controls[d];return v.cursorStyleHandler(c,v,g)}})}(),function(){var y=Math.min,f=Math.max;w.util.object.extend(w.Canvas.prototype,{_shouldGroup:function(m,p){var l=this._activeObject;return l&&this._isSelectionKeyPressed(m)&&p&&p.selectable&&this.selection&&(l!==p||"activeSelection"===l.type)&&!p.onSelect({e:m})},_handleGrouping:function(m,p){var l=this._activeObject;l.__corner||p===l&&(!(p=this.findTarget(m,!0))||!p.selectable)||(l&&"activeSelection"===l.type?this._updateActiveSelection(p,m):this._createActiveSelection(p,m))},_updateActiveSelection:function(m,p){var l=this._activeObject,u=l._objects.slice(0);l.contains(m)?(l.removeWithUpdate(m),this._hoveredTarget=m,this._hoveredTargets=this.targets.concat(),1===l.size()&&this._setActiveObject(l.item(0),p)):(l.addWithUpdate(m),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(u,p)},_createActiveSelection:function(m,p){var l=this.getActiveObjects(),u=this._createGroup(m);this._hoveredTarget=u,this._setActiveObject(u,p),this._fireSelectionEvents(l,p)},_createGroup:function(m){var p=this._objects,u=p.indexOf(this._activeObject)<p.indexOf(m)?[this._activeObject,m]:[m,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new w.ActiveSelection(u,{canvas:this})},_groupSelectedObjects:function(m){var l,p=this._collectObjects(m);1===p.length?this.setActiveObject(p[0],m):p.length>1&&(l=new w.ActiveSelection(p.reverse(),{canvas:this}),this.setActiveObject(l,m))},_collectObjects:function(m){for(var l,p=[],u=this._groupSelector.ex,a=this._groupSelector.ey,d=u+this._groupSelector.left,g=a+this._groupSelector.top,c=new w.Point(y(u,d),y(a,g)),v=new w.Point(f(u,d),f(a,g)),C=!this.selectionFullyContained,D=u===d&&a===g,E=this._objects.length;E--&&!((l=this._objects[E])&&l.selectable&&l.visible&&(C&&l.intersectsWithRect(c,v,!0)||l.isContainedWithinRect(c,v,!0)||C&&l.containsPoint(c,null,!0)||C&&l.containsPoint(v,null,!0))&&(p.push(l),D)););return p.length>1&&(p=p.filter(function(M){return!M.onSelect({e:m})})),p},_maybeGroupObjects:function(m){this.selection&&this._groupSelector&&this._groupSelectedObjects(m),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),w.util.object.extend(w.StaticCanvas.prototype,{toDataURL:function(y){y||(y={});var f=y.format||"png",m=y.quality||1,p=(y.multiplier||1)*(y.enableRetinaScaling?this.getRetinaScaling():1),l=this.toCanvasElement(p,y);return w.util.toDataURL(l,f,m)},toCanvasElement:function(y,f){var m=((f=f||{}).width||this.width)*(y=y||1),p=(f.height||this.height)*y,l=this.getZoom(),u=this.width,a=this.height,d=l*y,g=this.viewportTransform,C=this.interactive,D=[d,0,0,d,(g[4]-(f.left||0))*y,(g[5]-(f.top||0))*y],E=this.enableRetinaScaling,M=w.util.createCanvasElement(),x=this.contextTop;return M.width=m,M.height=p,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=D,this.width=m,this.height=p,this.calcViewportBoundaries(),this.renderCanvas(M.getContext("2d"),this._objects),this.viewportTransform=g,this.width=u,this.height=a,this.calcViewportBoundaries(),this.interactive=C,this.enableRetinaScaling=E,this.contextTop=x,M}}),w.util.object.extend(w.StaticCanvas.prototype,{loadFromJSON:function(y,f,m){if(y){var p="string"==typeof y?JSON.parse(y):w.util.object.clone(y),l=this,u=p.clipPath,a=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete p.clipPath,this._enlivenObjects(p.objects,function(d){l.clear(),l._setBgOverlay(p,function(){u?l._enlivenObjects([u],function(g){l.clipPath=g[0],l.__setupCanvas.call(l,p,d,a,f)}):l.__setupCanvas.call(l,p,d,a,f)})},m),this}},__setupCanvas:function(y,f,m,p){var l=this;f.forEach(function(u,a){l.insertAt(u,a)}),this.renderOnAddRemove=m,delete y.objects,delete y.backgroundImage,delete y.overlayImage,delete y.background,delete y.overlay,this._setOptions(y),this.renderAll(),p&&p()},_setBgOverlay:function(y,f){var m={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(y.backgroundImage||y.overlayImage||y.background||y.overlay){var p=function(){m.backgroundImage&&m.overlayImage&&m.backgroundColor&&m.overlayColor&&f&&f()};this.__setBgOverlay("backgroundImage",y.backgroundImage,m,p),this.__setBgOverlay("overlayImage",y.overlayImage,m,p),this.__setBgOverlay("backgroundColor",y.background,m,p),this.__setBgOverlay("overlayColor",y.overlay,m,p)}else f&&f()},__setBgOverlay:function(y,f,m,p){var l=this;if(!f)return m[y]=!0,void(p&&p());"backgroundImage"===y||"overlayImage"===y?w.util.enlivenObjects([f],function(u){l[y]=u[0],m[y]=!0,p&&p()}):this["set"+w.util.string.capitalize(y,!0)](f,function(){m[y]=!0,p&&p()})},_enlivenObjects:function(y,f,m){y&&0!==y.length?w.util.enlivenObjects(y,function(p){f&&f(p)},null,m):f&&f([])},_toDataURL:function(y,f){this.clone(function(m){f(m.toDataURL(y))})},_toDataURLWithMultiplier:function(y,f,m){this.clone(function(p){m(p.toDataURLWithMultiplier(y,f))})},clone:function(y,f){var m=JSON.stringify(this.toJSON(f));this.cloneWithoutData(function(p){p.loadFromJSON(m,function(){y&&y(p)})})},cloneWithoutData:function(y){var f=w.util.createCanvasElement();f.width=this.width,f.height=this.height;var m=new w.Canvas(f);this.backgroundImage?(m.setBackgroundImage(this.backgroundImage.src,function(){m.renderAll(),y&&y(m)}),m.backgroundImageOpacity=this.backgroundImageOpacity,m.backgroundImageStretch=this.backgroundImageStretch):y&&y(m)}}),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.util.object.extend,p=f.util.object.clone,l=f.util.toFixed,u=f.util.string.capitalize,a=f.util.degreesToRadians;f.Object||(f.Object=f.util.createClass(f.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!f.isLikelyNode,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(c){c&&this.setOptions(c)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=f.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(c){var v=f.perfLimitSizeTotal,C=c.width,D=c.height,E=f.maxCacheSideLimit,M=f.minCacheSideLimit;if(C<=E&&D<=E&&C*D<=v)return C<M&&(c.width=M),D<M&&(c.height=M),c;var R=f.util.limitDimsByArea(C/D,v),j=f.util.capValue,q=j(M,R.x,E),he=j(M,R.y,E);return C>q&&(c.zoomX/=C/q,c.width=q,c.capped=!0),D>he&&(c.zoomY/=D/he,c.height=he,c.capped=!0),c},_getCacheCanvasDimensions:function(){var c=this.getTotalObjectScaling(),v=this._getTransformedDimensions(0,0),C=v.x*c.scaleX/this.scaleX,D=v.y*c.scaleY/this.scaleY;return{width:C+2,height:D+2,zoomX:c.scaleX,zoomY:c.scaleY,x:C,y:D}},_updateCacheCanvas:function(){var c=this.canvas;if(this.noScaleCache&&c&&c._currentTransform){var C=c._currentTransform.action;if(this===c._currentTransform.target&&C.slice&&"scale"===C.slice(0,5))return!1}var j,q,D=this._cacheCanvas,E=this._limitCacheSize(this._getCacheCanvasDimensions()),M=f.minCacheSideLimit,x=E.width,R=E.height,he=E.zoomX,me=E.zoomY,le=x!==this.cacheWidth||R!==this.cacheHeight,_e=le||this.zoomX!==he||this.zoomY!==me,ie=0,xe=0,Re=!1;if(le){var Ae=this._cacheCanvas.width,I=this._cacheCanvas.height,V=x>Ae||R>I;Re=V||(x<.9*Ae||R<.9*I)&&Ae>M&&I>M,V&&!E.capped&&(x>M||R>M)&&(ie=.1*x,xe=.1*R)}return this instanceof f.Text&&this.path&&(_e=!0,Re=!0,ie+=this.getHeightOfLine(0)*this.zoomX,xe+=this.getHeightOfLine(0)*this.zoomY),!!_e&&(Re?(D.width=Math.ceil(x+ie),D.height=Math.ceil(R+xe)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,D.width,D.height)),j=E.x/2,q=E.y/2,this.cacheTranslationX=Math.round(D.width/2-j)+j,this.cacheTranslationY=Math.round(D.height/2-q)+q,this.cacheWidth=x,this.cacheHeight=R,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(he,me),this.zoomX=he,this.zoomY=me,!0)},setOptions:function(c){this._setOptions(c),this._initGradient(c.fill,"fill"),this._initGradient(c.stroke,"stroke"),this._initPattern(c.fill,"fill"),this._initPattern(c.stroke,"stroke")},transform:function(c){var C=this.calcTransformMatrix(!(this.group&&!this.group._transformDone||this.group&&this.canvas&&c===this.canvas.contextTop));c.transform(C[0],C[1],C[2],C[3],C[4],C[5])},toObject:function(c){var v=f.Object.NUM_FRACTION_DIGITS,C={type:this.type,version:f.version,originX:this.originX,originY:this.originY,left:l(this.left,v),top:l(this.top,v),width:l(this.width,v),height:l(this.height,v),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:l(this.strokeWidth,v),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:l(this.strokeMiterLimit,v),scaleX:l(this.scaleX,v),scaleY:l(this.scaleY,v),angle:l(this.angle,v),flipX:this.flipX,flipY:this.flipY,opacity:l(this.opacity,v),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:l(this.skewX,v),skewY:l(this.skewY,v)};return this.clipPath&&!this.clipPath.excludeFromExport&&(C.clipPath=this.clipPath.toObject(c),C.clipPath.inverted=this.clipPath.inverted,C.clipPath.absolutePositioned=this.clipPath.absolutePositioned),f.util.populateWithProperties(this,C,c),this.includeDefaultValues||(C=this._removeDefaultValues(C)),C},toDatalessObject:function(c){return this.toObject(c)},_removeDefaultValues:function(c){var v=f.util.getKlass(c.type).prototype;return v.stateProperties.forEach(function(D){"left"===D||"top"===D||(c[D]===v[D]&&delete c[D],Array.isArray(c[D])&&Array.isArray(v[D])&&0===c[D].length&&0===v[D].length&&delete c[D])}),c},toString:function(){return"#<fabric."+u(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var c=f.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(c.scaleX),scaleY:Math.abs(c.scaleY)}},getTotalObjectScaling:function(){var c=this.getObjectScaling(),v=c.scaleX,C=c.scaleY;if(this.canvas){var D=this.canvas.getZoom(),E=this.canvas.getRetinaScaling();v*=D*E,C*=D*E}return{scaleX:v,scaleY:C}},getObjectOpacity:function(){var c=this.opacity;return this.group&&(c*=this.group.getObjectOpacity()),c},_set:function(c,v){var D=this[c]!==v,E=!1;return("scaleX"===c||"scaleY"===c)&&(v=this._constrainScale(v)),"scaleX"===c&&v<0?(this.flipX=!this.flipX,v*=-1):"scaleY"===c&&v<0?(this.flipY=!this.flipY,v*=-1):"shadow"!==c||!v||v instanceof f.Shadow?"dirty"===c&&this.group&&this.group.set("dirty",v):v=new f.Shadow(v),this[c]=v,D&&(E=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(c)>-1?(this.dirty=!0,E&&this.group.set("dirty",!0)):E&&this.stateProperties.indexOf(c)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:f.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(c){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(c.save(),this._setupCompositeOperation(c),this.drawSelectionBackground(c),this.transform(c),this._setOpacity(c),this._setShadow(c,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(c)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(c),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),c.restore())},renderCache:function(c){c=c||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,c.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!!("stroke"===this.paintFirst&&this.hasFill()&&this.hasStroke()&&"object"==typeof this.shadow||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(c,v){if(c.save(),c.globalCompositeOperation=v.inverted?"destination-out":"destination-in",v.absolutePositioned){var C=f.util.invertTransform(this.calcTransformMatrix());c.transform(C[0],C[1],C[2],C[3],C[4],C[5])}v.transform(c),c.scale(1/v.zoomX,1/v.zoomY),c.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),c.restore()},drawObject:function(c,v){var C=this.fill,D=this.stroke;v?(this.fill="black",this.stroke="",this._setClippingProperties(c)):this._renderBackground(c),this._render(c),this._drawClipPath(c,this.clipPath),this.fill=C,this.stroke=D},_drawClipPath:function(c,v){v&&(v.canvas=this.canvas,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCache(c,v))},drawCacheOnCanvas:function(c){c.scale(1/this.zoomX,1/this.zoomY),c.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(c){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!c&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!c){var v=this.cacheWidth/this.zoomX,C=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-C/2,v,C)}return!0}return!1},_renderBackground:function(c){if(this.backgroundColor){var v=this._getNonTransformedDimensions();c.fillStyle=this.backgroundColor,c.fillRect(-v.x/2,-v.y/2,v.x,v.y),this._removeShadow(c)}},_setOpacity:function(c){this.group&&!this.group._transformDone?c.globalAlpha=this.getObjectOpacity():c.globalAlpha*=this.opacity},_setStrokeStyles:function(c,v){var C=v.stroke;C&&(c.lineWidth=v.strokeWidth,c.lineCap=v.strokeLineCap,c.lineDashOffset=v.strokeDashOffset,c.lineJoin=v.strokeLineJoin,c.miterLimit=v.strokeMiterLimit,C.toLive?"percentage"===C.gradientUnits||C.gradientTransform||C.patternTransform?this._applyPatternForTransformedGradient(c,C):(c.strokeStyle=C.toLive(c,this),this._applyPatternGradientTransform(c,C)):c.strokeStyle=v.stroke)},_setFillStyles:function(c,v){var C=v.fill;C&&(C.toLive?(c.fillStyle=C.toLive(c,this),this._applyPatternGradientTransform(c,v.fill)):c.fillStyle=C)},_setClippingProperties:function(c){c.globalAlpha=1,c.strokeStyle="transparent",c.fillStyle="#000000"},_setLineDash:function(c,v){!v||0===v.length||(1&v.length&&v.push.apply(v,v),c.setLineDash(v))},_renderControls:function(c,v){var E,M,x,C=this.getViewportTransform(),D=this.calcTransformMatrix();M=typeof(v=v||{}).hasBorders<"u"?v.hasBorders:this.hasBorders,x=typeof v.hasControls<"u"?v.hasControls:this.hasControls,D=f.util.multiplyTransformMatrices(C,D),E=f.util.qrDecompose(D),c.save(),c.translate(E.translateX,E.translateY),c.lineWidth=1*this.borderScaleFactor,this.group||(c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(E.angle-=180),c.rotate(a(this.group?E.angle:this.angle)),v.forActiveSelection||this.group?M&&this.drawBordersInGroup(c,E,v):M&&this.drawBorders(c,v),x&&this.drawControls(c,v),c.restore()},_setShadow:function(c){if(this.shadow){var D,v=this.shadow,C=this.canvas,E=C&&C.viewportTransform[0]||1,M=C&&C.viewportTransform[3]||1;D=v.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),C&&C._isRetinaScaling()&&(E*=f.devicePixelRatio,M*=f.devicePixelRatio),c.shadowColor=v.color,c.shadowBlur=v.blur*f.browserShadowBlurConstant*(E+M)*(D.scaleX+D.scaleY)/4,c.shadowOffsetX=v.offsetX*E*D.scaleX,c.shadowOffsetY=v.offsetY*M*D.scaleY}},_removeShadow:function(c){this.shadow&&(c.shadowColor="",c.shadowBlur=c.shadowOffsetX=c.shadowOffsetY=0)},_applyPatternGradientTransform:function(c,v){if(!v||!v.toLive)return{offsetX:0,offsetY:0};var C=v.gradientTransform||v.patternTransform,D=-this.width/2+v.offsetX||0,E=-this.height/2+v.offsetY||0;return"percentage"===v.gradientUnits?c.transform(this.width,0,0,this.height,D,E):c.transform(1,0,0,1,D,E),C&&c.transform(C[0],C[1],C[2],C[3],C[4],C[5]),{offsetX:D,offsetY:E}},_renderPaintInOrder:function(c){"stroke"===this.paintFirst?(this._renderStroke(c),this._renderFill(c)):(this._renderFill(c),this._renderStroke(c))},_render:function(){},_renderFill:function(c){this.fill&&(c.save(),this._setFillStyles(c,this),"evenodd"===this.fillRule?c.fill("evenodd"):c.fill(),c.restore())},_renderStroke:function(c){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(c),c.save(),this.strokeUniform&&this.group){var v=this.getObjectScaling();c.scale(1/v.scaleX,1/v.scaleY)}else this.strokeUniform&&c.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(c,this.strokeDashArray),this._setStrokeStyles(c,this),c.stroke(),c.restore()}},_applyPatternForTransformedGradient:function(c,v){var E,C=this._limitCacheSize(this._getCacheCanvasDimensions()),D=f.util.createCanvasElement(),M=this.canvas.getRetinaScaling(),x=C.x/this.scaleX/M,R=C.y/this.scaleY/M;D.width=x,D.height=R,(E=D.getContext("2d")).beginPath(),E.moveTo(0,0),E.lineTo(x,0),E.lineTo(x,R),E.lineTo(0,R),E.closePath(),E.translate(x/2,R/2),E.scale(C.zoomX/this.scaleX/M,C.zoomY/this.scaleY/M),this._applyPatternGradientTransform(E,v),E.fillStyle=v.toLive(c),E.fill(),c.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),c.scale(M*this.scaleX/C.zoomX,M*this.scaleY/C.zoomY),c.strokeStyle=E.createPattern(D,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var c=f.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",c.scaleX),this.set("scaleY",c.scaleY),this.angle=c.angle,this.skewX=c.skewX,this.skewY=0}},_removeTransformMatrix:function(c){var v=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),v=f.util.transformPoint(v,this.transformMatrix)),this.transformMatrix=null,c&&(this.scaleX*=c.scaleX,this.scaleY*=c.scaleY,this.cropX=c.cropX,this.cropY=c.cropY,v.x+=c.offsetLeft,v.y+=c.offsetTop,this.width=c.width,this.height=c.height),this.setPositionByOrigin(v,"center","center")},clone:function(c,v){var C=this.toObject(v);this.constructor.fromObject?this.constructor.fromObject(C,c):f.Object._fromObject("Object",C,c)},cloneAsImage:function(c,v){var C=this.toCanvasElement(v);return c&&c(new f.Image(C)),this},toCanvasElement:function(c){c||(c={});var v=f.util,C=v.saveObjectTransform(this),D=this.group,E=this.shadow,M=Math.abs,x=(c.multiplier||1)*(c.enableRetinaScaling?f.devicePixelRatio:1);delete this.group,c.withoutTransform&&v.resetObjectTransform(this),c.withoutShadow&&(this.shadow=null);var he,le,_e,R=f.util.createCanvasElement(),j=this.getBoundingRect(!0,!0),q=this.shadow,me={x:0,y:0};q&&(le=q.blur,he=q.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),me.x=2*Math.round(M(q.offsetX)+le)*M(he.scaleX),me.y=2*Math.round(M(q.offsetY)+le)*M(he.scaleY)),_e=j.height+me.y,R.width=Math.ceil(j.width+me.x),R.height=Math.ceil(_e);var ie=new f.StaticCanvas(R,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===c.format&&(ie.backgroundColor="#fff"),this.setPositionByOrigin(new f.Point(ie.width/2,ie.height/2),"center","center");var xe=this.canvas;ie.add(this);var Re=ie.toCanvasElement(x||1,c);return this.shadow=E,this.set("canvas",xe),D&&(this.group=D),this.set(C).setCoords(),ie._objects=[],ie.dispose(),ie=null,Re},toDataURL:function(c){return c||(c={}),f.util.toDataURL(this.toCanvasElement(c),c.format||"png",c.quality||1)},isType:function(c){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===c},complexity:function(){return 1},toJSON:function(c){return this.toObject(c)},rotate:function(c){var v=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return v&&this._setOriginToCenter(),this.set("angle",c),v&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(c,v){v=v||this.canvas.getPointer(c);var C=new f.Point(v.x,v.y),D=this._getLeftTopCoords();return this.angle&&(C=f.util.rotatePoint(C,D,a(-this.angle))),{x:C.x-D.x,y:C.y-D.y}},_setupCompositeOperation:function(c){this.globalCompositeOperation&&(c.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){f.runningAnimations&&f.runningAnimations.cancelByTarget(this)}}),f.util.createAccessors&&f.util.createAccessors(f.Object),m(f.Object.prototype,f.Observable),f.Object.NUM_FRACTION_DIGITS=2,f.Object.ENLIVEN_PROPS=["clipPath"],f.Object._fromObject=function(c,v,C,D){var E=f[c];v=p(v,!0),f.util.enlivenPatterns([v.fill,v.stroke],function(M){typeof M[0]<"u"&&(v.fill=M[0]),typeof M[1]<"u"&&(v.stroke=M[1]),f.util.enlivenObjectEnlivables(v,v,function(){var x=D?new E(v[D],v):new E(v);C&&C(x)})})},f.Object.__uid=0)}(We),function(){var y=w.util.degreesToRadians,f={left:-.5,center:0,right:.5},m={top:-.5,center:0,bottom:.5};w.util.object.extend(w.Object.prototype,{translateToGivenOrigin:function(p,l,u,a,d){var v,C,D,g=p.x,c=p.y;return"string"==typeof l?l=f[l]:l-=.5,"string"==typeof a?a=f[a]:a-=.5,"string"==typeof u?u=m[u]:u-=.5,"string"==typeof d?d=m[d]:d-=.5,C=d-u,((v=a-l)||C)&&(D=this._getTransformedDimensions(),g=p.x+v*D.x,c=p.y+C*D.y),new w.Point(g,c)},translateToCenterPoint:function(p,l,u){var a=this.translateToGivenOrigin(p,l,u,"center","center");return this.angle?w.util.rotatePoint(a,p,y(this.angle)):a},translateToOriginPoint:function(p,l,u){var a=this.translateToGivenOrigin(p,"center","center",l,u);return this.angle?w.util.rotatePoint(a,p,y(this.angle)):a},getCenterPoint:function(){var p=new w.Point(this.left,this.top);return this.translateToCenterPoint(p,this.originX,this.originY)},getPointByOrigin:function(p,l){var u=this.getCenterPoint();return this.translateToOriginPoint(u,p,l)},toLocalPoint:function(p,l,u){var d,g,a=this.getCenterPoint();return d=typeof l<"u"&&typeof u<"u"?this.translateToGivenOrigin(a,"center","center",l,u):new w.Point(this.left,this.top),g=new w.Point(p.x,p.y),this.angle&&(g=w.util.rotatePoint(g,a,-y(this.angle))),g.subtractEquals(d)},setPositionByOrigin:function(p,l,u){var a=this.translateToCenterPoint(p,l,u),d=this.translateToOriginPoint(a,this.originX,this.originY);this.set("left",d.x),this.set("top",d.y)},adjustPosition:function(p){var g,c,l=y(this.angle),u=this.getScaledWidth(),a=w.util.cos(l)*u,d=w.util.sin(l)*u;this.left+=a*((c="string"==typeof p?f[p]:p-.5)-(g="string"==typeof this.originX?f[this.originX]:this.originX-.5)),this.top+=d*(c-g),this.setCoords(),this.originX=p},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var p=this.getCenterPoint();this.originX="center",this.originY="center",this.left=p.x,this.top=p.y},_resetOrigin:function(){var p=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=p.x,this.top=p.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var f=w.util,m=f.degreesToRadians,p=f.multiplyTransformMatrices,l=f.transformPoint;f.object.extend(w.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(u,a){return a?u?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),u?this.aCoords:this.lineCoords)},getCoords:function(u,a){return function y(u){return[new w.Point(u.tl.x,u.tl.y),new w.Point(u.tr.x,u.tr.y),new w.Point(u.br.x,u.br.y),new w.Point(u.bl.x,u.bl.y)]}(this._getCoords(u,a))},intersectsWithRect:function(u,a,d,g){var c=this.getCoords(d,g);return"Intersection"===w.Intersection.intersectPolygonRectangle(c,u,a).status},intersectsWithObject:function(u,a,d){return"Intersection"===w.Intersection.intersectPolygonPolygon(this.getCoords(a,d),u.getCoords(a,d)).status||u.isContainedWithinObject(this,a,d)||this.isContainedWithinObject(u,a,d)},isContainedWithinObject:function(u,a,d){for(var g=this.getCoords(a,d),v=0,C=u._getImageLines(a?u.aCoords:u.lineCoords);v<4;v++)if(!u.containsPoint(g[v],C))return!1;return!0},isContainedWithinRect:function(u,a,d,g){var c=this.getBoundingRect(d,g);return c.left>=u.x&&c.left+c.width<=a.x&&c.top>=u.y&&c.top+c.height<=a.y},containsPoint:function(u,v,d,g){var c=this._getCoords(d,g),C=(v=v||this._getImageLines(c),this._findCrossPoints(u,v));return 0!==C&&C%2==1},isOnScreen:function(u){if(!this.canvas)return!1;var a=this.canvas.vptCoords.tl,d=this.canvas.vptCoords.br;return!(!this.getCoords(!0,u).some(function(c){return c.x<=d.x&&c.x>=a.x&&c.y<=d.y&&c.y>=a.y})&&!this.intersectsWithRect(a,d,!0,u))||this._containsCenterOfCanvas(a,d,u)},_containsCenterOfCanvas:function(u,a,d){return!!this.containsPoint({x:(u.x+a.x)/2,y:(u.y+a.y)/2},null,!0,d)},isPartiallyOnScreen:function(u){if(!this.canvas)return!1;var a=this.canvas.vptCoords.tl,d=this.canvas.vptCoords.br;return!!this.intersectsWithRect(a,d,!0,u)||this.getCoords(!0,u).every(function(c){return(c.x>=d.x||c.x<=a.x)&&(c.y>=d.y||c.y<=a.y)})&&this._containsCenterOfCanvas(a,d,u)},_getImageLines:function(u){return{topline:{o:u.tl,d:u.tr},rightline:{o:u.tr,d:u.br},bottomline:{o:u.br,d:u.bl},leftline:{o:u.bl,d:u.tl}}},_findCrossPoints:function(u,a){var g,c,v,C,E,D=0;for(var M in a)if(!((E=a[M]).o.y<u.y&&E.d.y<u.y||E.o.y>=u.y&&E.d.y>=u.y||(E.o.x===E.d.x&&E.o.x>=u.x?C=E.o.x:(g=(E.d.y-E.o.y)/(E.d.x-E.o.x),c=u.y-0*u.x,v=E.o.y-g*E.o.x,C=-(c-v)/(0-g)),C>=u.x&&(D+=1),2!==D)))break;return D},getBoundingRect:function(u,a){var d=this.getCoords(u,a);return f.makeBoundingBoxFromPoints(d)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(u){return Math.abs(u)<this.minScaleLimit?u<0?-this.minScaleLimit:this.minScaleLimit:0===u?1e-4:u},scale:function(u){return this._set("scaleX",u),this._set("scaleY",u),this.setCoords()},scaleToWidth:function(u,a){var d=this.getBoundingRect(a).width/this.getScaledWidth();return this.scale(u/this.width/d)},scaleToHeight:function(u,a){var d=this.getBoundingRect(a).height/this.getScaledHeight();return this.scale(u/this.height/d)},calcLineCoords:function(){var u=this.getViewportTransform(),a=this.padding,d=m(this.angle),v=f.cos(d)*a,C=f.sin(d)*a,D=v+C,E=v-C,M=this.calcACoords(),x={tl:l(M.tl,u),tr:l(M.tr,u),bl:l(M.bl,u),br:l(M.br,u)};return a&&(x.tl.x-=E,x.tl.y-=D,x.tr.x+=D,x.tr.y-=E,x.bl.x-=D,x.bl.y+=E,x.br.x+=E,x.br.y+=D),x},calcOCoords:function(){var u=this._calcRotateMatrix(),a=this._calcTranslateMatrix(),d=this.getViewportTransform(),g=p(d,a),c=p(g,u),v=(c=p(c,[1/d[0],0,0,1/d[3],0,0]),this._calculateCurrentDimensions()),C={};return this.forEachControl(function(D,E,M){C[E]=D.positionHandler(v,c,M)}),C},calcACoords:function(){var u=this._calcRotateMatrix(),a=this._calcTranslateMatrix(),d=p(a,u),g=this._getTransformedDimensions(),c=g.x/2,v=g.y/2;return{tl:l({x:-c,y:-v},d),tr:l({x:c,y:-v},d),bl:l({x:-c,y:v},d),br:l({x:c,y:v},d)}},setCoords:function(u){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),u||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return f.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var u=this.getCenterPoint();return[1,0,0,1,u.x,u.y]},transformMatrixKey:function(u){var a="_",d="";return!u&&this.group&&(d=this.group.transformMatrixKey(u)+a),d+this.top+a+this.left+a+this.scaleX+a+this.scaleY+a+this.skewX+a+this.skewY+a+this.angle+a+this.originX+a+this.originY+a+this.width+a+this.height+a+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(u){var a=this.calcOwnMatrix();if(u||!this.group)return a;var d=this.transformMatrixKey(u),g=this.matrixCache||(this.matrixCache={});return g.key===d?g.value:(this.group&&(a=p(this.group.calcTransformMatrix(!1),a)),g.key=d,g.value=a,a)},calcOwnMatrix:function(){var u=this.transformMatrixKey(!0),a=this.ownMatrixCache||(this.ownMatrixCache={});if(a.key===u)return a.value;var d=this._calcTranslateMatrix(),g={angle:this.angle,translateX:d[4],translateY:d[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return a.key=u,a.value=f.composeMatrix(g),a.value},_getNonTransformedDimensions:function(){var u=this.strokeWidth;return{x:this.width+u,y:this.height+u}},_getTransformedDimensions:function(u,a){typeof u>"u"&&(u=this.skewX),typeof a>"u"&&(a=this.skewY);var d,g,c,v=0===u&&0===a;if(this.strokeUniform?(g=this.width,c=this.height):(g=(d=this._getNonTransformedDimensions()).x,c=d.y),v)return this._finalizeDimensions(g*this.scaleX,c*this.scaleY);var C=f.sizeAfterTransform(g,c,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:u,skewY:a});return this._finalizeDimensions(C.x,C.y)},_finalizeDimensions:function(u,a){return this.strokeUniform?{x:u+this.strokeWidth,y:a+this.strokeWidth}:{x:u,y:a}},_calculateCurrentDimensions:function(){var u=this.getViewportTransform(),a=this._getTransformedDimensions();return l(a,u,!0).scalarAdd(2*this.padding)}})}(),w.util.object.extend(w.Object.prototype,{sendToBack:function(){return this.group?w.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?w.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(y){return this.group?w.StaticCanvas.prototype.sendBackwards.call(this.group,this,y):this.canvas&&this.canvas.sendBackwards(this,y),this},bringForward:function(y){return this.group?w.StaticCanvas.prototype.bringForward.call(this.group,this,y):this.canvas&&this.canvas.bringForward(this,y),this},moveTo:function(y){return this.group&&"activeSelection"!==this.group.type?w.StaticCanvas.prototype.moveTo.call(this.group,this,y):this.canvas&&this.canvas.moveTo(this,y),this}}),function(){function y(m,p){if(p){if(p.toLive)return m+": url(#SVGID_"+p.id+"); ";var l=new w.Color(p),u=m+": "+l.toRgb()+"; ",a=l.getAlpha();return 1!==a&&(u+=m+"-opacity: "+a.toString()+"; "),u}return m+": none; "}var f=w.util.toFixed;w.util.object.extend(w.Object.prototype,{getSvgStyles:function(m){var p=this.fillRule?this.fillRule:"nonzero",l=this.strokeWidth?this.strokeWidth:"0",u=this.strokeDashArray?this.strokeDashArray.join(" "):"none",a=this.strokeDashOffset?this.strokeDashOffset:"0",d=this.strokeLineCap?this.strokeLineCap:"butt",g=this.strokeLineJoin?this.strokeLineJoin:"miter",c=this.strokeMiterLimit?this.strokeMiterLimit:"4",v=typeof this.opacity<"u"?this.opacity:"1",C=this.visible?"":" visibility: hidden;",D=m?"":this.getSvgFilter(),E=y("fill",this.fill);return[y("stroke",this.stroke),"stroke-width: ",l,"; ","stroke-dasharray: ",u,"; ","stroke-linecap: ",d,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",g,"; ","stroke-miterlimit: ",c,"; ",E,"fill-rule: ",p,"; ","opacity: ",v,";",D,C].join("")},getSvgSpanStyles:function(m,p){var l="; ",a=m.fontFamily?"font-family: "+(-1===m.fontFamily.indexOf("'")&&-1===m.fontFamily.indexOf('"')?"'"+m.fontFamily+"'":m.fontFamily)+l:"",u=m.strokeWidth?"stroke-width: "+m.strokeWidth+l:"",d=m.fontSize?"font-size: "+m.fontSize+"px"+l:"",g=m.fontStyle?"font-style: "+m.fontStyle+l:"",c=m.fontWeight?"font-weight: "+m.fontWeight+l:"",v=m.fill?y("fill",m.fill):"",C=m.stroke?y("stroke",m.stroke):"",D=this.getSvgTextDecoration(m);return D&&(D="text-decoration: "+D+l),[C,u,a,d,g,c,D,v,m.deltaY?"baseline-shift: "+-m.deltaY+"; ":"",p?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(m){return["overline","underline","line-through"].filter(function(p){return m[p.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(m,p){var l=m?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+w.util.matrixToSVG(l)+(p||"")+'" '},_setSVGBg:function(m){if(this.backgroundColor){var p=w.Object.NUM_FRACTION_DIGITS;m.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',f(-this.width/2,p),'" y="',f(-this.height/2,p),'" width="',f(this.width,p),'" height="',f(this.height,p),'"></rect>\n')}},toSVG:function(m){return this._createBaseSVGMarkup(this._toSVG(m),{reviver:m})},toClipPathSVG:function(m){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(m),{reviver:m})},_createBaseClipPathSVGMarkup:function(m,p){var l=(p=p||{}).reviver,a=[this.getSvgTransform(!0,p.additionalTransform||""),this.getSvgCommons()].join(""),d=m.indexOf("COMMON_PARTS");return m[d]=a,l?l(m.join("")):m.join("")},_createBaseSVGMarkup:function(m,p){var M,R,l=(p=p||{}).noStyle,u=p.reviver,a=l?"":'style="'+this.getSvgStyles()+'" ',d=p.withShadow?'style="'+this.getSvgFilter()+'" ':"",g=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",v=g&&g.absolutePositioned,C=this.stroke,D=this.fill,E=this.shadow,x=[],j=m.indexOf("COMMON_PARTS"),q=p.additionalTransform;return g&&(g.clipPathId="CLIPPATH_"+w.Object.__uid++,R='<clipPath id="'+g.clipPathId+'" >\n'+g.toClipPathSVG(u)+"</clipPath>\n"),v&&x.push("<g ",d,this.getSvgCommons()," >\n"),x.push("<g ",this.getSvgTransform(!1),v?"":d+this.getSvgCommons()," >\n"),M=[a,c,l?"":this.addPaintOrder()," ",q?'transform="'+q+'" ':""].join(""),m[j]=M,D&&D.toLive&&x.push(D.toSVG(this)),C&&C.toLive&&x.push(C.toSVG(this)),E&&x.push(E.toSVG(this)),g&&x.push(R),x.push(m.join("")),x.push("</g>\n"),v&&x.push("</g>\n"),u?u(x.join("")):x.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var y=w.util.object.extend,f="stateProperties";function m(l,u,a){var d={};a.forEach(function(c){d[c]=l[c]}),y(l[u],d,!0)}function p(l,u,a){if(l===u)return!0;if(Array.isArray(l)){if(!Array.isArray(u)||l.length!==u.length)return!1;for(var d=0,g=l.length;d<g;d++)if(!p(l[d],u[d]))return!1;return!0}if(l&&"object"==typeof l){var v,c=Object.keys(l);if(!u||"object"!=typeof u||!a&&c.length!==Object.keys(u).length)return!1;for(d=0,g=c.length;d<g;d++)if("canvas"!==(v=c[d])&&"group"!==v&&!p(l[v],u[v]))return!1;return!0}}w.util.object.extend(w.Object.prototype,{hasStateChanged:function(l){var u="_"+(l=l||f);return Object.keys(this[u]).length<this[l].length||!p(this[u],this,!0)},saveState:function(l){var u=l&&l.propertySet||f,a="_"+u;return this[a]?(m(this,a,this[u]),l&&l.stateProperties&&m(this,a,l.stateProperties),this):this.setupState(l)},setupState:function(l){var u=(l=l||{}).propertySet||f;return l.propertySet=u,this["_"+u]={},this.saveState(l),this}})}(),function(){var y=w.util.degreesToRadians;w.util.object.extend(w.Object.prototype,{_findTargetCorner:function(f,m){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var u,a,c,p=f.x,l=f.y,d=Object.keys(this.oCoords),g=d.length-1;for(this.__corner=0;g>=0;g--)if(this.isControlVisible(c=d[g])&&(a=this._getImageLines(m?this.oCoords[c].touchCorner:this.oCoords[c].corner),0!==(u=this._findCrossPoints({x:p,y:l},a))&&u%2==1))return this.__corner=c,c;return!1},forEachControl:function(f){for(var m in this.controls)f(this.controls[m],m,this)},_setCornerCoords:function(){var f=this.oCoords;for(var m in f){var p=this.controls[m];f[m].corner=p.calcCornerCoords(this.angle,this.cornerSize,f[m].x,f[m].y,!1),f[m].touchCorner=p.calcCornerCoords(this.angle,this.touchCornerSize,f[m].x,f[m].y,!0)}},drawSelectionBackground:function(f){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;f.save();var m=this.getCenterPoint(),p=this._calculateCurrentDimensions(),l=this.canvas.viewportTransform;return f.translate(m.x,m.y),f.scale(1/l[0],1/l[3]),f.rotate(y(this.angle)),f.fillStyle=this.selectionBackgroundColor,f.fillRect(-p.x/2,-p.y/2,p.x,p.y),f.restore(),this},drawBorders:function(f,m){m=m||{};var p=this._calculateCurrentDimensions(),l=this.borderScaleFactor,u=p.x+l,a=p.y+l,d=typeof m.hasControls<"u"?m.hasControls:this.hasControls,g=!1;return f.save(),f.strokeStyle=m.borderColor||this.borderColor,this._setLineDash(f,m.borderDashArray||this.borderDashArray),f.strokeRect(-u/2,-a/2,u,a),d&&(f.beginPath(),this.forEachControl(function(c,v,C){c.withConnection&&c.getVisibility(C,v)&&(g=!0,f.moveTo(c.x*u,c.y*a),f.lineTo(c.x*u+c.offsetX,c.y*a+c.offsetY))}),g&&f.stroke()),f.restore(),this},drawBordersInGroup:function(f,m,p){p=p||{};var l=w.util.sizeAfterTransform(this.width,this.height,m),u=this.strokeWidth,a=this.strokeUniform,d=this.borderScaleFactor,g=l.x+u*(a?this.canvas.getZoom():m.scaleX)+d,c=l.y+u*(a?this.canvas.getZoom():m.scaleY)+d;return f.save(),this._setLineDash(f,p.borderDashArray||this.borderDashArray),f.strokeStyle=p.borderColor||this.borderColor,f.strokeRect(-g/2,-c/2,g,c),f.restore(),this},drawControls:function(f,m){m=m||{},f.save();var l,u,p=this.canvas.getRetinaScaling();return f.setTransform(p,0,0,p,0,0),f.strokeStyle=f.fillStyle=m.cornerColor||this.cornerColor,this.transparentCorners||(f.strokeStyle=m.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(f,m.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(l=this.group.calcTransformMatrix()),this.forEachControl(function(a,d,g){u=g.oCoords[d],a.getVisibility(g,d)&&(l&&(u=w.util.transformPoint(u,l)),a.render(f,u.x,u.y,m,g))}),f.restore(),this},isControlVisible:function(f){return this.controls[f]&&this.controls[f].getVisibility(this,f)},setControlVisible:function(f,m){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[f]=m,this},setControlsVisibility:function(f){for(var m in f||(f={}),f)this.setControlVisible(m,f[m]);return this},onDeselect:function(){},onSelect:function(){}})}(),w.util.object.extend(w.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(y,f){var m=function(){},p=(f=f||{}).onComplete||m,l=f.onChange||m,u=this;return w.util.animate({target:this,startValue:y.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(a){y.set("left",a),u.requestRenderAll(),l()},onComplete:function(){y.setCoords(),p()}})},fxCenterObjectV:function(y,f){var m=function(){},p=(f=f||{}).onComplete||m,l=f.onChange||m,u=this;return w.util.animate({target:this,startValue:y.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(a){y.set("top",a),u.requestRenderAll(),l()},onComplete:function(){y.setCoords(),p()}})},fxRemove:function(y,f){var m=function(){},p=(f=f||{}).onComplete||m,l=f.onChange||m,u=this;return w.util.animate({target:this,startValue:y.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(a){y.set("opacity",a),u.requestRenderAll(),l()},onComplete:function(){u.remove(y),p()}})}}),w.util.object.extend(w.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var f,y=[],p=[];for(f in arguments[0])y.push(f);for(var l=0,u=y.length;l<u;l++)p.push(this._animate(f=y[l],arguments[0][f],arguments[1],l!==u-1));return p}return this._animate.apply(this,arguments)},_animate:function(y,f,m,p){var u,l=this;f=f.toString(),m=m?w.util.object.clone(m):{},~y.indexOf(".")&&(u=y.split("."));var a=l.colorProperties.indexOf(y)>-1||u&&l.colorProperties.indexOf(u[1])>-1,d=u?this.get(u[0])[u[1]]:this.get(y);"from"in m||(m.from=d),a||(f=~f.indexOf("=")?d+parseFloat(f.replace("=","")):parseFloat(f));var g={target:this,startValue:m.from,endValue:f,byValue:m.by,easing:m.easing,duration:m.duration,abort:m.abort&&function(c,v,C){return m.abort.call(l,c,v,C)},onChange:function(c,v,C){u?l[u[0]][u[1]]=c:l.set(y,c),!p&&m.onChange&&m.onChange(c,v,C)},onComplete:function(c,v,C){p||(l.setCoords(),m.onComplete&&m.onComplete(c,v,C))}};return a?w.util.animateColor(g.startValue,g.endValue,g.duration,g):w.util.animate(g)}}),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.util.object.extend,p=f.util.object.clone,l={x1:1,x2:1,y1:1,y2:1};function u(a,d){var g=a.origin,c=a.axis1,v=a.axis2,C=a.dimension,D=d.nearest,E=d.center,M=d.farthest;return function(){switch(this.get(g)){case D:return Math.min(this.get(c),this.get(v));case E:return Math.min(this.get(c),this.get(v))+.5*this.get(C);case M:return Math.max(this.get(c),this.get(v))}}}f.Line?f.warn("fabric.Line is already defined"):(f.Line=f.util.createClass(f.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:f.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(a,d){a||(a=[0,0,0,0]),this.callSuper("initialize",d),this.set("x1",a[0]),this.set("y1",a[1]),this.set("x2",a[2]),this.set("y2",a[3]),this._setWidthHeight(d)},_setWidthHeight:function(a){a||(a={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in a?a.left:this._getLeftToOriginX(),this.top="top"in a?a.top:this._getTopToOriginY()},_set:function(a,d){return this.callSuper("_set",a,d),typeof l[a]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:u({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:u({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(a){a.beginPath();var d=this.calcLinePoints();a.moveTo(d.x1,d.y1),a.lineTo(d.x2,d.y2),a.lineWidth=this.strokeWidth;var g=a.strokeStyle;a.strokeStyle=this.stroke||a.fillStyle,this.stroke&&this._renderStroke(a),a.strokeStyle=g},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(a){return m(this.callSuper("toObject",a),this.calcLinePoints())},_getNonTransformedDimensions:function(){var a=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(a.y-=this.strokeWidth),0===this.height&&(a.x-=this.strokeWidth)),a},calcLinePoints:function(){var a=this.x1<=this.x2?-1:1,d=this.y1<=this.y2?-1:1;return{x1:a*this.width*.5,x2:a*this.width*-.5,y1:d*this.height*.5,y2:d*this.height*-.5}},_toSVG:function(){var a=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',a.x1,'" y1="',a.y1,'" x2="',a.x2,'" y2="',a.y2,'" />\n']}}),f.Line.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),f.Line.fromElement=function(a,d,g){g=g||{};var c=f.parseAttributes(a,f.Line.ATTRIBUTE_NAMES);d(new f.Line([c.x1||0,c.y1||0,c.x2||0,c.y2||0],m(c,g)))},f.Line.fromObject=function(a,d){var c=p(a,!0);c.points=[a.x1,a.y1,a.x2,a.y2],f.Object._fromObject("Line",c,function g(v){delete v.points,d&&d(v)},"points")})}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.util.degreesToRadians;f.Circle?f.warn("fabric.Circle is already defined."):(f.Circle=f.util.createClass(f.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:f.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(l,u){return this.callSuper("_set",l,u),"radius"===l&&this.setRadius(u),this},toObject:function(l){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(l))},_toSVG:function(){var l,d=(this.endAngle-this.startAngle)%360;if(0===d)l=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var g=m(this.startAngle),c=m(this.endAngle),v=this.radius;l=['<path d="M '+f.util.cos(g)*v+" "+f.util.sin(g)*v," A "+v+" "+v," 0 ",+(d>180?"1":"0")+" 1"," "+f.util.cos(c)*v+" "+f.util.sin(c)*v,'" ',"COMMON_PARTS"," />\n"]}return l},_render:function(l){l.beginPath(),l.arc(0,0,this.radius,m(this.startAngle),m(this.endAngle),!1),this._renderPaintInOrder(l)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(l){return this.radius=l,this.set("width",2*l).set("height",2*l)}}),f.Circle.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),f.Circle.fromElement=function(l,u){var a=f.parseAttributes(l,f.Circle.ATTRIBUTE_NAMES);if(!function p(l){return"radius"in l&&l.radius>=0}(a))throw new Error("value of `r` attribute is required and can not be negative");a.left=(a.left||0)-a.radius,a.top=(a.top||0)-a.radius,u(new f.Circle(a))},f.Circle.fromObject=function(l,u){f.Object._fromObject("Circle",l,u)})}(We),function(y){"use strict";var f=y.fabric||(y.fabric={});f.Triangle?f.warn("fabric.Triangle is already defined"):(f.Triangle=f.util.createClass(f.Object,{type:"triangle",width:100,height:100,_render:function(m){var p=this.width/2,l=this.height/2;m.beginPath(),m.moveTo(-p,l),m.lineTo(0,-l),m.lineTo(p,l),m.closePath(),this._renderPaintInOrder(m)},_toSVG:function(){var m=this.width/2,p=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-m+" "+p,"0 "+-p,m+" "+p].join(","),'" />']}}),f.Triangle.fromObject=function(m,p){return f.Object._fromObject("Triangle",m,p)})}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=2*Math.PI;f.Ellipse?f.warn("fabric.Ellipse is already defined."):(f.Ellipse=f.util.createClass(f.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:f.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(p){this.callSuper("initialize",p),this.set("rx",p&&p.rx||0),this.set("ry",p&&p.ry||0)},_set:function(p,l){switch(this.callSuper("_set",p,l),p){case"rx":this.rx=l,this.set("width",2*l);break;case"ry":this.ry=l,this.set("height",2*l)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(p){return this.callSuper("toObject",["rx","ry"].concat(p))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(p){p.beginPath(),p.save(),p.transform(1,0,0,this.ry/this.rx,0,0),p.arc(0,0,this.rx,0,m,!1),p.restore(),this._renderPaintInOrder(p)}}),f.Ellipse.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),f.Ellipse.fromElement=function(p,l){var u=f.parseAttributes(p,f.Ellipse.ATTRIBUTE_NAMES);u.left=(u.left||0)-u.rx,u.top=(u.top||0)-u.ry,l(new f.Ellipse(u))},f.Ellipse.fromObject=function(p,l){f.Object._fromObject("Ellipse",p,l)})}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.util.object.extend;f.Rect?f.warn("fabric.Rect is already defined"):(f.Rect=f.util.createClass(f.Object,{stateProperties:f.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:f.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(p){this.callSuper("initialize",p),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(p){var l=this.rx?Math.min(this.rx,this.width/2):0,u=this.ry?Math.min(this.ry,this.height/2):0,a=this.width,d=this.height,g=-this.width/2,c=-this.height/2,v=0!==l||0!==u,C=.4477152502;p.beginPath(),p.moveTo(g+l,c),p.lineTo(g+a-l,c),v&&p.bezierCurveTo(g+a-C*l,c,g+a,c+C*u,g+a,c+u),p.lineTo(g+a,c+d-u),v&&p.bezierCurveTo(g+a,c+d-C*u,g+a-C*l,c+d,g+a-l,c+d),p.lineTo(g+l,c+d),v&&p.bezierCurveTo(g+C*l,c+d,g,c+d-C*u,g,c+d-u),p.lineTo(g,c+u),v&&p.bezierCurveTo(g,c+C*u,g+C*l,c,g+l,c),p.closePath(),this._renderPaintInOrder(p)},toObject:function(p){return this.callSuper("toObject",["rx","ry"].concat(p))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),f.Rect.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),f.Rect.fromElement=function(p,l,u){if(!p)return l(null);u=u||{};var a=f.parseAttributes(p,f.Rect.ATTRIBUTE_NAMES);a.left=a.left||0,a.top=a.top||0,a.height=a.height||0,a.width=a.width||0;var d=new f.Rect(m(u?f.util.object.clone(u):{},a));d.visible=d.visible&&d.width>0&&d.height>0,l(d)},f.Rect.fromObject=function(p,l){return f.Object._fromObject("Rect",p,l)})}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.util.object.extend,p=f.util.array.min,l=f.util.array.max,u=f.util.toFixed,a=f.util.projectStrokeOnPoints;f.Polyline?f.warn("fabric.Polyline is already defined"):(f.Polyline=f.util.createClass(f.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:f.Object.prototype.cacheProperties.concat("points"),initialize:function(d,g){g=g||{},this.points=d||[],this.callSuper("initialize",g),this._setPositionDimensions(g)},_projectStrokeOnPoints:function(){return a(this.points,this,!0)},_setPositionDimensions:function(d){var c,g=this._calcDimensions(d),v=this.exactBoundingBox?this.strokeWidth:0;this.width=g.width-v,this.height=g.height-v,d.fromSVG||(c=this.translateToGivenOrigin({x:g.left-this.strokeWidth/2+v/2,y:g.top-this.strokeWidth/2+v/2},"left","top",this.originX,this.originY)),typeof d.left>"u"&&(this.left=d.fromSVG?g.left:c.x),typeof d.top>"u"&&(this.top=d.fromSVG?g.top:c.y),this.pathOffset={x:g.left+this.width/2+v/2,y:g.top+this.height/2+v/2}},_calcDimensions:function(){var d=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,g=p(d,"x")||0,c=p(d,"y")||0;return{left:g,top:c,width:(l(d,"x")||0)-g,height:(l(d,"y")||0)-c}},toObject:function(d){return m(this.callSuper("toObject",d),{points:this.points.concat()})},_toSVG:function(){for(var d=[],g=this.pathOffset.x,c=this.pathOffset.y,v=f.Object.NUM_FRACTION_DIGITS,C=0,D=this.points.length;C<D;C++)d.push(u(this.points[C].x-g,v),",",u(this.points[C].y-c,v)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',d.join(""),'" />\n']},commonRender:function(d){var g,c=this.points.length,v=this.pathOffset.x,C=this.pathOffset.y;if(!c||isNaN(this.points[c-1].y))return!1;d.beginPath(),d.moveTo(this.points[0].x-v,this.points[0].y-C);for(var D=0;D<c;D++)d.lineTo((g=this.points[D]).x-v,g.y-C);return!0},_render:function(d){this.commonRender(d)&&this._renderPaintInOrder(d)},complexity:function(){return this.get("points").length}}),f.Polyline.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(),f.Polyline.fromElementGenerator=function(d){return function(g,c,v){if(!g)return c(null);v||(v={});var C=f.parsePointsAttribute(g.getAttribute("points")),D=f.parseAttributes(g,f[d].ATTRIBUTE_NAMES);D.fromSVG=!0,c(new f[d](C,m(D,v)))}},f.Polyline.fromElement=f.Polyline.fromElementGenerator("Polyline"),f.Polyline.fromObject=function(d,g){return f.Object._fromObject("Polyline",d,g,"points")})}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.util.projectStrokeOnPoints;f.Polygon?f.warn("fabric.Polygon is already defined"):(f.Polygon=f.util.createClass(f.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return m(this.points,this)},_render:function(p){this.commonRender(p)&&(p.closePath(),this._renderPaintInOrder(p))}}),f.Polygon.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(),f.Polygon.fromElement=f.Polyline.fromElementGenerator("Polygon"),f.Polygon.fromObject=function(p,l){f.Object._fromObject("Polygon",p,l,"points")})}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.util.array.min,p=f.util.array.max,l=f.util.object.extend,u=f.util.object.clone,a=f.util.toFixed;f.Path?f.warn("fabric.Path is already defined"):(f.Path=f.util.createClass(f.Object,{type:"path",path:null,cacheProperties:f.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:f.Object.prototype.stateProperties.concat("path"),initialize:function(d,g){delete(g=u(g||{})).path,this.callSuper("initialize",g),this._setPath(d||[],g)},_setPath:function(d,g){this.path=f.util.makePathSimpler(Array.isArray(d)?d:f.util.parsePath(d)),f.Polyline.prototype._setPositionDimensions.call(this,g||{})},_renderPathCommands:function(d){var g,c=0,v=0,C=0,D=0,x=-this.pathOffset.x,R=-this.pathOffset.y;d.beginPath();for(var j=0,q=this.path.length;j<q;++j)switch(g=this.path[j],g[0]){case"L":d.lineTo((C=g[1])+x,(D=g[2])+R);break;case"M":c=C=g[1],v=D=g[2],d.moveTo(C+x,D+R);break;case"C":d.bezierCurveTo(g[1]+x,g[2]+R,g[3]+x,g[4]+R,(C=g[5])+x,(D=g[6])+R);break;case"Q":d.quadraticCurveTo(g[1]+x,g[2]+R,g[3]+x,g[4]+R),C=g[3],D=g[4];break;case"z":case"Z":C=c,D=v,d.closePath()}},_render:function(d){this._renderPathCommands(d),this._renderPaintInOrder(d)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(d){return l(this.callSuper("toObject",d),{path:this.path.map(function(g){return g.slice()})})},toDatalessObject:function(d){var g=this.toObject(["sourcePath"].concat(d));return g.sourcePath&&delete g.path,g},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',f.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var d=f.Object.NUM_FRACTION_DIGITS;return" translate("+a(-this.pathOffset.x,d)+", "+a(-this.pathOffset.y,d)+")"},toClipPathSVG:function(d){var g=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:d,additionalTransform:g})},toSVG:function(d){var g=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:d,additionalTransform:g})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var c,M,d=[],g=[],v=0,C=0,D=0,E=0,x=0,R=this.path.length;x<R;++x){switch((c=this.path[x])[0]){case"L":D=c[1],E=c[2],M=[];break;case"M":v=D=c[1],C=E=c[2],M=[];break;case"C":M=f.util.getBoundsOfCurve(D,E,c[1],c[2],c[3],c[4],c[5],c[6]),D=c[5],E=c[6];break;case"Q":M=f.util.getBoundsOfCurve(D,E,c[1],c[2],c[1],c[2],c[3],c[4]),D=c[3],E=c[4];break;case"z":case"Z":D=v,E=C}M.forEach(function(_e){d.push(_e.x),g.push(_e.y)}),d.push(D),g.push(E)}var j=m(d)||0,q=m(g)||0;return{left:j,top:q,width:(p(d)||0)-j,height:(p(g)||0)-q}}}),f.Path.fromObject=function(d,g){"string"==typeof d.sourcePath?f.loadSVGFromURL(d.sourcePath,function(v){var C=v[0];C.setOptions(d),d.clipPath?f.util.enlivenObjects([d.clipPath],function(D){C.clipPath=D[0],g&&g(C)}):g&&g(C)}):f.Object._fromObject("Path",d,g,"path")},f.Path.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(["d"]),f.Path.fromElement=function(d,g,c){var v=f.parseAttributes(d,f.Path.ATTRIBUTE_NAMES);v.fromSVG=!0,g(new f.Path(v.d,l(v,c)))})}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.util.array.min,p=f.util.array.max;f.Group||(f.Group=f.util.createClass(f.Object,f.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(l,u,a){u=u||{},this._objects=[],a&&this.callSuper("initialize",u),this._objects=l||[];for(var d=this._objects.length;d--;)this._objects[d].group=this;if(a)this._updateObjectsACoords();else{var g=u&&u.centerPoint;void 0!==u.originX&&(this.originX=u.originX),void 0!==u.originY&&(this.originY=u.originY),g||this._calcBounds(),this._updateObjectsCoords(g),delete u.centerPoint,this.callSuper("initialize",u)}this.setCoords()},_updateObjectsACoords:function(){for(var u=this._objects.length;u--;)this._objects[u].setCoords(!0)},_updateObjectsCoords:function(u){u=u||this.getCenterPoint();for(var a=this._objects.length;a--;)this._updateObjectCoords(this._objects[a],u)},_updateObjectCoords:function(l,u){l.set({left:l.left-u.x,top:l.top-u.y}),l.group=this,l.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(l){var u=!!this.group;return this._restoreObjectsState(),f.util.resetObjectTransform(this),l&&(u&&f.util.removeTransformFromObject(l,this.group.calcTransformMatrix()),this._objects.push(l),l.group=this,l._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,u?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(l){return this._restoreObjectsState(),f.util.resetObjectTransform(this),this.remove(l),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(l){this.dirty=!0,l.group=this,l._set("canvas",this.canvas)},_onObjectRemoved:function(l){this.dirty=!0,delete l.group},_set:function(l,u){var a=this._objects.length;if(this.useSetOnGroup)for(;a--;)this._objects[a].setOnGroup(l,u);if("canvas"===l)for(;a--;)this._objects[a]._set(l,u);f.Object.prototype._set.call(this,l,u)},toObject:function(l){var u=this.includeDefaultValues,a=this._objects.filter(function(g){return!g.excludeFromExport}).map(function(g){var c=g.includeDefaultValues;g.includeDefaultValues=u;var v=g.toObject(l);return g.includeDefaultValues=c,v}),d=f.Object.prototype.toObject.call(this,l);return d.objects=a,d},toDatalessObject:function(l){var u,a=this.sourcePath;if(a)u=a;else{var d=this.includeDefaultValues;u=this._objects.map(function(c){var v=c.includeDefaultValues;c.includeDefaultValues=d;var C=c.toDatalessObject(l);return c.includeDefaultValues=v,C})}var g=f.Object.prototype.toDatalessObject.call(this,l);return g.objects=u,g},render:function(l){this._transformDone=!0,this.callSuper("render",l),this._transformDone=!1},shouldCache:function(){var l=f.Object.prototype.shouldCache.call(this);if(l)for(var u=0,a=this._objects.length;u<a;u++)if(this._objects[u].willDrawShadow())return this.ownCaching=!1,!1;return l},willDrawShadow:function(){if(f.Object.prototype.willDrawShadow.call(this))return!0;for(var l=0,u=this._objects.length;l<u;l++)if(this._objects[l].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(l){for(var u=0,a=this._objects.length;u<a;u++)this._objects[u].render(l);this._drawClipPath(l,this.clipPath)},isCacheDirty:function(l){if(this.callSuper("isCacheDirty",l))return!0;if(!this.statefullCache)return!1;for(var u=0,a=this._objects.length;u<a;u++)if(this._objects[u].isCacheDirty(!0)){if(this._cacheCanvas){var d=this.cacheWidth/this.zoomX,g=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-d/2,-g/2,d,g)}return!0}return!1},_restoreObjectsState:function(){var l=this.calcOwnMatrix();return this._objects.forEach(function(u){f.util.addTransformToObject(u,l),delete u.group,u.setCoords()}),this},destroy:function(){return this._objects.forEach(function(l){l.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var l=this._objects,u=this.canvas;this._objects=[];var a=this.toObject();delete a.objects;var d=new f.ActiveSelection([]);return d.set(a),d.type="activeSelection",u.remove(this),l.forEach(function(g){g.group=d,g.dirty=!0,u.add(g)}),d.canvas=u,d._objects=l,u._activeObject=d,d.setCoords(),d}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(u){u.setCoords(!0)}),this},_calcBounds:function(l){for(var d,g,c,E,u=[],a=[],v=["tr","br","bl","tl"],C=0,D=this._objects.length,M=v.length;C<D;++C){for(c=(d=this._objects[C]).calcACoords(),E=0;E<M;E++)u.push(c[g=v[E]].x),a.push(c[g].y);d.aCoords=c}this._getBounds(u,a,l)},_getBounds:function(l,u,a){var d=new f.Point(m(l),m(u)),g=new f.Point(p(l),p(u)),c=d.y||0,v=d.x||0,D=g.y-d.y||0;this.width=g.x-d.x||0,this.height=D,a||this.setPositionByOrigin({x:v,y:c},"left","top")},_toSVG:function(l){for(var u=["<g ","COMMON_PARTS"," >\n"],a=0,d=this._objects.length;a<d;a++)u.push("\t\t",this._objects[a].toSVG(l));return u.push("</g>\n"),u},getSvgStyles:function(){var u=this.visible?"":" visibility: hidden;";return[typeof this.opacity<"u"&&1!==this.opacity?"opacity: "+this.opacity+";":"",this.getSvgFilter(),u].join("")},toClipPathSVG:function(l){for(var u=[],a=0,d=this._objects.length;a<d;a++)u.push("\t",this._objects[a].toClipPathSVG(l));return this._createBaseClipPathSVGMarkup(u,{reviver:l})}}),f.Group.fromObject=function(l,u){var a=l.objects,d=f.util.object.clone(l,!0);delete d.objects,"string"!=typeof a?f.util.enlivenObjects(a,function(g){f.util.enlivenObjectEnlivables(l,d,function(){u&&u(new f.Group(g,d,!0))})}):f.loadSVGFromURL(a,function(g){var c=f.util.groupSVGElements(g,l,a),v=d.clipPath;delete d.clipPath,c.set(d),v?f.util.enlivenObjects([v],function(C){c.clipPath=C[0],u&&u(c)}):u&&u(c)})})}(We),function(y){"use strict";var f=y.fabric||(y.fabric={});f.ActiveSelection||(f.ActiveSelection=f.util.createClass(f.Group,{type:"activeSelection",initialize:function(m,p){p=p||{},this._objects=m||[];for(var l=this._objects.length;l--;)this._objects[l].group=this;p.originX&&(this.originX=p.originX),p.originY&&(this.originY=p.originY),this._calcBounds(),this._updateObjectsCoords(),f.Object.prototype.initialize.call(this,p),this.setCoords()},toGroup:function(){var m=this._objects.concat();this._objects=[];var p=f.Object.prototype.toObject.call(this),l=new f.Group([]);if(delete p.type,l.set(p),m.forEach(function(a){a.canvas.remove(a),a.group=l}),l._objects=m,!this.canvas)return l;var u=this.canvas;return u.add(l),u._activeObject=l,l.setCoords(),l},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(m,p,l){m.save(),m.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",m,p),typeof(l=l||{}).hasControls>"u"&&(l.hasControls=!1),l.forActiveSelection=!0;for(var u=0,a=this._objects.length;u<a;u++)this._objects[u]._renderControls(m,l);m.restore()}}),f.ActiveSelection.fromObject=function(m,p){f.util.enlivenObjects(m.objects,function(l){delete m.objects,p&&p(new f.ActiveSelection(l,m,!0))})})}(We),function(y){"use strict";var f=w.util.object.extend;y.fabric||(y.fabric={}),y.fabric.Image?w.warn("fabric.Image is already defined."):(w.Image=w.util.createClass(w.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:w.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:w.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(m,p){p||(p={}),this.filters=[],this.cacheKey="texture"+w.Object.__uid++,this.callSuper("initialize",p),this._initElement(m,p)},getElement:function(){return this._element||{}},setElement:function(m,p){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=m,this._originalElement=m,this._initConfig(p),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(m){var p=w.filterBackend;p&&p.evictCachesForKey&&p.evictCachesForKey(m)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(m){w.util.cleanUpJsdomNode(this[m]),this[m]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var m=this.getElement();return{width:m.naturalWidth||m.width,height:m.naturalHeight||m.height}},_stroke:function(m){if(this.stroke&&0!==this.strokeWidth){var p=this.width/2,l=this.height/2;m.beginPath(),m.moveTo(-p,-l),m.lineTo(p,-l),m.lineTo(p,l),m.lineTo(-p,l),m.lineTo(-p,-l),m.closePath()}},toObject:function(m){var p=[];this.filters.forEach(function(u){u&&p.push(u.toObject())});var l=f(this.callSuper("toObject",["cropX","cropY"].concat(m)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:p});return this.resizeFilter&&(l.resizeFilter=this.resizeFilter.toObject()),l},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var l,m=[],p=[],u=this._element,a=-this.width/2,d=-this.height/2,g="",c="";if(!u)return[];if(this.hasCrop()){var v=w.Object.__uid++;m.push('<clipPath id="imageCrop_'+v+'">\n','\t<rect x="'+a+'" y="'+d+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),g=' clip-path="url(#imageCrop_'+v+')" '}if(this.imageSmoothing||(c='" image-rendering="optimizeSpeed'),p.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',a-this.cropX,'" y="',d-this.cropY,'" width="',u.width||u.naturalWidth,'" height="',u.height||u.height,c,'"',g,"></image>\n"),this.stroke||this.strokeDashArray){var C=this.fill;this.fill=null,l=["\t<rect ",'x="',a,'" y="',d,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=C}return"fill"!==this.paintFirst?m.concat(l,p):m.concat(p,l)},getSrc:function(m){var p=m?this._element:this._originalElement;return p?p.toDataURL?p.toDataURL():this.srcFromAttribute?p.getAttribute("src"):p.src:this.src||""},setSrc:function(m,p,l){return w.util.loadImage(m,function(u,a){this.setElement(u,l),this._setWidthHeight(),p&&p(this,a)},this,l&&l.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var m=this.resizeFilter,p=this.minimumScaleTrigger,l=this.getTotalObjectScaling(),u=l.scaleX,a=l.scaleY,d=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!m||u>p&&a>p)return this._element=d,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=u,void(this._lastScaleY=a);w.filterBackend||(w.filterBackend=w.initFilterBackend());var g=w.util.createCanvasElement(),c=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,v=d.width,C=d.height;g.width=v,g.height=C,this._element=g,this._lastScaleX=m.scaleX=u,this._lastScaleY=m.scaleY=a,w.filterBackend.applyFilters([m],d,v,C,this._element,c),this._filterScalingX=g.width/this._originalElement.width,this._filterScalingY=g.height/this._originalElement.height},applyFilters:function(m){if(m=(m=m||this.filters||[]).filter(function(d){return d&&!d.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===m.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var p=this._originalElement,l=p.naturalWidth||p.width,u=p.naturalHeight||p.height;if(this._element===this._originalElement){var a=w.util.createCanvasElement();a.width=l,a.height=u,this._element=a,this._filteredEl=a}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,l,u),this._lastScaleX=1,this._lastScaleY=1;return w.filterBackend||(w.filterBackend=w.initFilterBackend()),w.filterBackend.applyFilters(m,this._originalElement,l,u,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(m){w.util.setImageSmoothing(m,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(m),this._renderPaintInOrder(m)},drawCacheOnCanvas:function(m){w.util.setImageSmoothing(m,this.imageSmoothing),w.Object.prototype.drawCacheOnCanvas.call(this,m)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(m){var p=this._element;if(p){var l=this._filterScalingX,u=this._filterScalingY,a=this.width,d=this.height,g=Math.min,c=Math.max,v=c(this.cropX,0),C=c(this.cropY,0),D=p.naturalWidth||p.width,E=p.naturalHeight||p.height,M=v*l,x=C*u,R=g(a*l,D-M),j=g(d*u,E-x),q=-a/2,he=-d/2,me=g(a,D/l-v),le=g(d,E/u-C);p&&m.drawImage(p,M,x,R,j,q,he,me,le)}},_needsResize:function(){var m=this.getTotalObjectScaling();return m.scaleX!==this._lastScaleX||m.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(m,p){this.setElement(w.util.getById(m),p),w.util.addClass(this.getElement(),w.Image.CSS_CANVAS)},_initConfig:function(m){m||(m={}),this.setOptions(m),this._setWidthHeight(m)},_initFilters:function(m,p){m&&m.length?w.util.enlivenObjects(m,function(l){p&&p(l)},"fabric.Image.filters"):p&&p()},_setWidthHeight:function(m){m||(m={});var p=this.getElement();this.width=m.width||p.naturalWidth||p.width||0,this.height=m.height||p.naturalHeight||p.height||0},parsePreserveAspectRatioAttribute:function(){var C,m=w.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),p=this._element.width,l=this._element.height,u=1,a=1,d=0,g=0,c=0,v=0,D=this.width,E=this.height,M={width:D,height:E};return!m||"none"===m.alignX&&"none"===m.alignY?(u=D/p,a=E/l):("meet"===m.meetOrSlice&&(C=(D-p*(u=a=w.util.findScaleToFit(this._element,M)))/2,"Min"===m.alignX&&(d=-C),"Max"===m.alignX&&(d=C),C=(E-l*a)/2,"Min"===m.alignY&&(g=-C),"Max"===m.alignY&&(g=C)),"slice"===m.meetOrSlice&&(C=p-D/(u=a=w.util.findScaleToCover(this._element,M)),"Mid"===m.alignX&&(c=C/2),"Max"===m.alignX&&(c=C),C=l-E/a,"Mid"===m.alignY&&(v=C/2),"Max"===m.alignY&&(v=C),p=D/u,l=E/a)),{width:p,height:l,scaleX:u,scaleY:a,offsetLeft:d,offsetTop:g,cropX:c,cropY:v}}}),w.Image.CSS_CANVAS="canvas-img",w.Image.prototype.getSvgSrc=w.Image.prototype.getSrc,w.Image.fromObject=function(m,p){var l=w.util.object.clone(m);w.util.loadImage(l.src,function(u,a){a?p&&p(null,!0):w.Image.prototype._initFilters.call(l,l.filters,function(d){l.filters=d||[],w.Image.prototype._initFilters.call(l,[l.resizeFilter],function(g){l.resizeFilter=g[0],w.util.enlivenObjectEnlivables(l,l,function(){var c=new w.Image(u,l);p(c,!1)})})})},null,l.crossOrigin)},w.Image.fromURL=function(m,p,l){w.util.loadImage(m,function(u,a){p&&p(new w.Image(u,l),a)},null,l&&l.crossOrigin)},w.Image.ATTRIBUTE_NAMES=w.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),w.Image.fromElement=function(m,p,l){var u=w.parseAttributes(m,w.Image.ATTRIBUTE_NAMES);w.Image.fromURL(u["xlink:href"],p,f(l?w.util.object.clone(l):{},u))})}(We),w.util.object.extend(w.Object.prototype,{_getAngleValueForStraighten:function(){var y=this.angle%360;return y>0?90*Math.round((y-1)/90):90*Math.round(y/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(y){var f=function(){},m=(y=y||{}).onComplete||f,p=y.onChange||f,l=this;return w.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(u){l.rotate(u),p()},onComplete:function(){l.setCoords(),m()}})}}),w.util.object.extend(w.StaticCanvas.prototype,{straightenObject:function(y){return y.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(y){return y.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";function y(m,p){var l="precision "+p+" float;\nvoid main(){}",u=m.createShader(m.FRAGMENT_SHADER);return m.shaderSource(u,l),m.compileShader(u),!!m.getShaderParameter(u,m.COMPILE_STATUS)}function f(m){m&&m.tileSize&&(this.tileSize=m.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}w.isWebglSupported=function(m){if(w.isLikelyNode)return!1;m=m||w.WebglFilterBackend.prototype.tileSize;var p=document.createElement("canvas"),l=p.getContext("webgl")||p.getContext("experimental-webgl"),u=!1;if(l){w.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),u=w.maxTextureSize>=m;for(var a=["highp","mediump","lowp"],d=0;d<3;d++)if(y(l,a[d])){w.webGlPrecision=a[d];break}}return this.isSupported=u,u},w.WebglFilterBackend=f,f.prototype={tileSize:2048,resources:{},setupGLContext:function(m,p){this.dispose(),this.createWebGLCanvas(m,p),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(m,p)},chooseFastestCopyGLTo2DMethod:function(m,p){var u,l=typeof window.performance<"u";try{new ImageData(1,1),u=!0}catch{u=!1}var a=typeof ArrayBuffer<"u",d=typeof Uint8ClampedArray<"u";if(l&&u&&a&&d){var g=w.util.createCanvasElement(),c=new ArrayBuffer(m*p*4);if(w.forceGLPutImageData)return this.imageBuffer=c,void(this.copyGLTo2D=di);var C,D,v={imageBuffer:c,destinationWidth:m,destinationHeight:p,targetCanvas:g};g.width=m,g.height=p,C=window.performance.now(),tr.call(v,this.gl,v),D=window.performance.now()-C,C=window.performance.now(),di.call(v,this.gl,v),D>window.performance.now()-C?(this.imageBuffer=c,this.copyGLTo2D=di):this.copyGLTo2D=tr}},createWebGLCanvas:function(m,p){var l=w.util.createCanvasElement();l.width=m,l.height=p;var u={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},a=l.getContext("webgl",u);a||(a=l.getContext("experimental-webgl",u)),a&&(a.clearColor(0,0,0,0),this.canvas=l,this.gl=a)},applyFilters:function(m,p,l,u,a,d){var c,g=this.gl;d&&(c=this.getCachedTexture(d,p));var v={originalWidth:p.width||p.originalWidth,originalHeight:p.height||p.originalHeight,sourceWidth:l,sourceHeight:u,destinationWidth:l,destinationHeight:u,context:g,sourceTexture:this.createTexture(g,l,u,!c&&p),targetTexture:this.createTexture(g,l,u),originalTexture:c||this.createTexture(g,l,u,!c&&p),passes:m.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:a},C=g.createFramebuffer();return g.bindFramebuffer(g.FRAMEBUFFER,C),m.forEach(function(D){D&&D.applyTo(v)}),function er(y){var f=y.targetCanvas,l=y.destinationWidth,u=y.destinationHeight;(f.width!==l||f.height!==u)&&(f.width=l,f.height=u)}(v),this.copyGLTo2D(g,v),g.bindTexture(g.TEXTURE_2D,null),g.deleteTexture(v.sourceTexture),g.deleteTexture(v.targetTexture),g.deleteFramebuffer(C),a.getContext("2d").setTransform(1,0,0,1,0,0),v},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(m,p,l,u,a){var d=m.createTexture();return m.bindTexture(m.TEXTURE_2D,d),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,a||m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,a||m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),u?m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,u):m.texImage2D(m.TEXTURE_2D,0,m.RGBA,p,l,0,m.RGBA,m.UNSIGNED_BYTE,null),d},getCachedTexture:function(m,p){if(this.textureCache[m])return this.textureCache[m];var l=this.createTexture(this.gl,p.width,p.height,p);return this.textureCache[m]=l,l},evictCachesForKey:function(m){this.textureCache[m]&&(this.gl.deleteTexture(this.textureCache[m]),delete this.textureCache[m])},copyGLTo2D:tr,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var m=this.gl,p={renderer:"",vendor:""};if(!m)return p;var l=m.getExtension("WEBGL_debug_renderer_info");if(l){var u=m.getParameter(l.UNMASKED_RENDERER_WEBGL),a=m.getParameter(l.UNMASKED_VENDOR_WEBGL);u&&(p.renderer=u.toLowerCase()),a&&(p.vendor=a.toLowerCase())}return this.gpuInfo=p,p}}}(),function(){"use strict";var y=function(){};function f(){}w.Canvas2dFilterBackend=f,f.prototype={evictCachesForKey:y,dispose:y,clearWebGLCaches:y,resources:{},applyFilters:function(m,p,l,u,a){var d=a.getContext("2d");d.drawImage(p,0,0,l,u);var v={sourceWidth:l,sourceHeight:u,imageData:d.getImageData(0,0,l,u),originalEl:p,originalImageData:d.getImageData(0,0,l,u),canvasEl:a,ctx:d,filterBackend:this};return m.forEach(function(C){C.applyTo(v)}),(v.imageData.width!==l||v.imageData.height!==u)&&(a.width=v.imageData.width,a.height=v.imageData.height),d.putImageData(v.imageData,0,0),v}}}(),w.Image=w.Image||{},w.Image.filters=w.Image.filters||{},w.Image.filters.BaseFilter=w.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(y){y&&this.setOptions(y)},setOptions:function(y){for(var f in y)this[f]=y[f]},createProgram:function(y,f,m){f=f||this.fragmentSource,m=m||this.vertexSource,"highp"!==w.webGlPrecision&&(f=f.replace(/precision highp float/g,"precision "+w.webGlPrecision+" float"));var p=y.createShader(y.VERTEX_SHADER);if(y.shaderSource(p,m),y.compileShader(p),!y.getShaderParameter(p,y.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+y.getShaderInfoLog(p));var l=y.createShader(y.FRAGMENT_SHADER);if(y.shaderSource(l,f),y.compileShader(l),!y.getShaderParameter(l,y.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+y.getShaderInfoLog(l));var u=y.createProgram();if(y.attachShader(u,p),y.attachShader(u,l),y.linkProgram(u),!y.getProgramParameter(u,y.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+y.getProgramInfoLog(u));var a=this.getAttributeLocations(y,u),d=this.getUniformLocations(y,u)||{};return d.uStepW=y.getUniformLocation(u,"uStepW"),d.uStepH=y.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:a,uniformLocations:d}},getAttributeLocations:function(y,f){return{aPosition:y.getAttribLocation(f,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(y,f,m){var p=f.aPosition,l=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,l),y.enableVertexAttribArray(p),y.vertexAttribPointer(p,2,y.FLOAT,!1,0,0),y.bufferData(y.ARRAY_BUFFER,m,y.STATIC_DRAW)},_setupFrameBuffer:function(y){var m,p,f=y.context;y.passes>1?(p=y.destinationHeight,(y.sourceWidth!==(m=y.destinationWidth)||y.sourceHeight!==p)&&(f.deleteTexture(y.targetTexture),y.targetTexture=y.filterBackend.createTexture(f,m,p)),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,y.targetTexture,0)):(f.bindFramebuffer(f.FRAMEBUFFER,null),f.finish())},_swapTextures:function(y){y.passes--,y.pass++;var f=y.targetTexture;y.targetTexture=y.sourceTexture,y.sourceTexture=f},isNeutralState:function(){var y=this.mainParameter,f=w.Image.filters[this.type].prototype;if(y){if(Array.isArray(f[y])){for(var m=f[y].length;m--;)if(this[y][m]!==f[y][m])return!1;return!0}return f[y]===this[y]}return!1},applyTo:function(y){y.webgl?(this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y)):this.applyTo2d(y)},retrieveShader:function(y){return y.programCache.hasOwnProperty(this.type)||(y.programCache[this.type]=this.createProgram(y.context)),y.programCache[this.type]},applyToWebGL:function(y){var f=y.context,m=this.retrieveShader(y);f.bindTexture(f.TEXTURE_2D,0===y.pass&&y.originalTexture?y.originalTexture:y.sourceTexture),f.useProgram(m.program),this.sendAttributeData(f,m.attributeLocations,y.aPosition),f.uniform1f(m.uniformLocations.uStepW,1/y.sourceWidth),f.uniform1f(m.uniformLocations.uStepH,1/y.sourceHeight),this.sendUniformData(f,m.uniformLocations),f.viewport(0,0,y.destinationWidth,y.destinationHeight),f.drawArrays(f.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(y,f,m){y.activeTexture(m),y.bindTexture(y.TEXTURE_2D,f),y.activeTexture(y.TEXTURE0)},unbindAdditionalTexture:function(y,f){y.activeTexture(f),y.bindTexture(y.TEXTURE_2D,null),y.activeTexture(y.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(y){this[this.mainParameter]=y},sendUniformData:function(){},createHelpLayer:function(y){if(!y.helpLayer){var f=document.createElement("canvas");f.width=y.sourceWidth,f.height=y.sourceHeight,y.helpLayer=f}},toObject:function(){var y={type:this.type},f=this.mainParameter;return f&&(y[f]=this[f]),y},toJSON:function(){return this.toObject()}}),w.Image.filters.BaseFilter.fromObject=function(y,f){var m=new w.Image.filters[y.type](y);return f&&f(m),m},function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.Image.filters;m.ColorMatrix=(0,f.util.createClass)(m.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(l){this.callSuper("initialize",l),this.matrix=this.matrix.slice(0)},applyTo2d:function(l){var c,v,C,D,E,a=l.imageData.data,d=a.length,g=this.matrix,M=this.colorsOnly;for(E=0;E<d;E+=4)c=a[E],v=a[E+1],C=a[E+2],M?(a[E]=c*g[0]+v*g[1]+C*g[2]+255*g[4],a[E+1]=c*g[5]+v*g[6]+C*g[7]+255*g[9],a[E+2]=c*g[10]+v*g[11]+C*g[12]+255*g[14]):(a[E]=c*g[0]+v*g[1]+C*g[2]+(D=a[E+3])*g[3]+255*g[4],a[E+1]=c*g[5]+v*g[6]+C*g[7]+D*g[8]+255*g[9],a[E+2]=c*g[10]+v*g[11]+C*g[12]+D*g[13]+255*g[14],a[E+3]=c*g[15]+v*g[16]+C*g[17]+D*g[18]+255*g[19])},getUniformLocations:function(l,u){return{uColorMatrix:l.getUniformLocation(u,"uColorMatrix"),uConstants:l.getUniformLocation(u,"uConstants")}},sendUniformData:function(l,u){var a=this.matrix,g=[a[4],a[9],a[14],a[19]];l.uniformMatrix4fv(u.uColorMatrix,!1,[a[0],a[1],a[2],a[3],a[5],a[6],a[7],a[8],a[10],a[11],a[12],a[13],a[15],a[16],a[17],a[18]]),l.uniform4fv(u.uConstants,g)}}),f.Image.filters.ColorMatrix.fromObject=f.Image.filters.BaseFilter.fromObject}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.Image.filters;m.Brightness=(0,f.util.createClass)(m.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(l){if(0!==this.brightness){var d,a=l.imageData.data,g=a.length,c=Math.round(255*this.brightness);for(d=0;d<g;d+=4)a[d]=a[d]+c,a[d+1]=a[d+1]+c,a[d+2]=a[d+2]+c}},getUniformLocations:function(l,u){return{uBrightness:l.getUniformLocation(u,"uBrightness")}},sendUniformData:function(l,u){l.uniform1f(u.uBrightness,this.brightness)}}),f.Image.filters.Brightness.fromObject=f.Image.filters.BaseFilter.fromObject}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.util.object.extend,p=f.Image.filters;p.Convolute=(0,f.util.createClass)(p.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(u){var a=Math.sqrt(this.matrix.length),d=this.type+"_"+a+"_"+(this.opaque?1:0),g=this.fragmentSource[d];return u.programCache.hasOwnProperty(d)||(u.programCache[d]=this.createProgram(u.context,g)),u.programCache[d]},applyTo2d:function(u){var R,j,q,he,me,le,De,_e,ie,xe,Re,Ae,I,a=u.imageData,d=a.data,g=this.matrix,c=Math.round(Math.sqrt(g.length)),v=Math.floor(c/2),C=a.width,D=a.height,E=u.ctx.createImageData(C,D),M=E.data,x=this.opaque?1:0;for(Re=0;Re<D;Re++)for(xe=0;xe<C;xe++){for(me=4*(Re*C+xe),R=0,j=0,q=0,he=0,I=0;I<c;I++)for(Ae=0;Ae<c;Ae++)le=xe+Ae-v,!((De=Re+I-v)<0||De>=D||le<0||le>=C)&&(R+=d[_e=4*(De*C+le)]*(ie=g[I*c+Ae]),j+=d[_e+1]*ie,q+=d[_e+2]*ie,x||(he+=d[_e+3]*ie));M[me]=R,M[me+1]=j,M[me+2]=q,M[me+3]=x?d[me+3]:he}u.imageData=E},getUniformLocations:function(u,a){return{uMatrix:u.getUniformLocation(a,"uMatrix"),uOpaque:u.getUniformLocation(a,"uOpaque"),uHalfSize:u.getUniformLocation(a,"uHalfSize"),uSize:u.getUniformLocation(a,"uSize")}},sendUniformData:function(u,a){u.uniform1fv(a.uMatrix,this.matrix)},toObject:function(){return m(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),f.Image.filters.Convolute.fromObject=f.Image.filters.BaseFilter.fromObject}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.Image.filters;m.Grayscale=(0,f.util.createClass)(m.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(l){var d,c,a=l.imageData.data,g=a.length,v=this.mode;for(d=0;d<g;d+=4)"average"===v?c=(a[d]+a[d+1]+a[d+2])/3:"lightness"===v?c=(Math.min(a[d],a[d+1],a[d+2])+Math.max(a[d],a[d+1],a[d+2]))/2:"luminosity"===v&&(c=.21*a[d]+.72*a[d+1]+.07*a[d+2]),a[d]=c,a[d+1]=c,a[d+2]=c},retrieveShader:function(l){var u=this.type+"_"+this.mode;return l.programCache.hasOwnProperty(u)||(l.programCache[u]=this.createProgram(l.context,this.fragmentSource[this.mode])),l.programCache[u]},getUniformLocations:function(l,u){return{uMode:l.getUniformLocation(u,"uMode")}},sendUniformData:function(l,u){l.uniform1i(u.uMode,1)},isNeutralState:function(){return!1}}),f.Image.filters.Grayscale.fromObject=f.Image.filters.BaseFilter.fromObject}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.Image.filters;m.Invert=(0,f.util.createClass)(m.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(l){var d,a=l.imageData.data,g=a.length;for(d=0;d<g;d+=4)a[d]=255-a[d],a[d+1]=255-a[d+1],a[d+2]=255-a[d+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(l,u){return{uInvert:l.getUniformLocation(u,"uInvert")}},sendUniformData:function(l,u){l.uniform1i(u.uInvert,this.invert)}}),f.Image.filters.Invert.fromObject=f.Image.filters.BaseFilter.fromObject}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.util.object.extend,p=f.Image.filters;p.Noise=(0,f.util.createClass)(p.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(u){if(0!==this.noise){var g,c,C,d=u.imageData.data,v=this.noise;for(g=0,c=d.length;g<c;g+=4)C=(.5-Math.random())*v,d[g]+=C,d[g+1]+=C,d[g+2]+=C}},getUniformLocations:function(u,a){return{uNoise:u.getUniformLocation(a,"uNoise"),uSeed:u.getUniformLocation(a,"uSeed")}},sendUniformData:function(u,a){u.uniform1f(a.uNoise,this.noise/255),u.uniform1f(a.uSeed,Math.random())},toObject:function(){return m(this.callSuper("toObject"),{noise:this.noise})}}),f.Image.filters.Noise.fromObject=f.Image.filters.BaseFilter.fromObject}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.Image.filters;m.Pixelate=(0,f.util.createClass)(m.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(l){var c,v,C,D,E,M,x,R,j,q,he,u=l.imageData,a=u.data,d=u.height,g=u.width;for(v=0;v<d;v+=this.blocksize)for(C=0;C<g;C+=this.blocksize)for(D=a[c=4*v*g+4*C],E=a[c+1],M=a[c+2],x=a[c+3],q=Math.min(v+this.blocksize,d),he=Math.min(C+this.blocksize,g),R=v;R<q;R++)for(j=C;j<he;j++)a[c=4*R*g+4*j]=D,a[c+1]=E,a[c+2]=M,a[c+3]=x},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(l,u){return{uBlocksize:l.getUniformLocation(u,"uBlocksize"),uStepW:l.getUniformLocation(u,"uStepW"),uStepH:l.getUniformLocation(u,"uStepH")}},sendUniformData:function(l,u){l.uniform1f(u.uBlocksize,this.blocksize)}}),f.Image.filters.Pixelate.fromObject=f.Image.filters.BaseFilter.fromObject}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.util.object.extend,p=f.Image.filters;p.RemoveColor=(0,f.util.createClass)(p.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(u){var g,v,C,D,d=u.imageData.data,c=255*this.distance,E=new f.Color(this.color).getSource(),M=[E[0]-c,E[1]-c,E[2]-c],x=[E[0]+c,E[1]+c,E[2]+c];for(g=0;g<d.length;g+=4)C=d[g+1],D=d[g+2],(v=d[g])>M[0]&&C>M[1]&&D>M[2]&&v<x[0]&&C<x[1]&&D<x[2]&&(d[g+3]=0)},getUniformLocations:function(u,a){return{uLow:u.getUniformLocation(a,"uLow"),uHigh:u.getUniformLocation(a,"uHigh")}},sendUniformData:function(u,a){var d=new f.Color(this.color).getSource(),g=parseFloat(this.distance),v=[d[0]/255+g,d[1]/255+g,d[2]/255+g,1];u.uniform4fv(a.uLow,[0+d[0]/255-g,0+d[1]/255-g,0+d[2]/255-g,1]),u.uniform4fv(a.uHigh,v)},toObject:function(){return m(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),f.Image.filters.RemoveColor.fromObject=f.Image.filters.BaseFilter.fromObject}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.Image.filters,p=f.util.createClass,l={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var u in l)m[u]=p(m.ColorMatrix,{type:u,matrix:l[u],mainParameter:!1,colorsOnly:!0}),f.Image.filters[u].fromObject=f.Image.filters.BaseFilter.fromObject}(We),function(y){"use strict";var f=y.fabric,m=f.Image.filters;m.BlendColor=(0,f.util.createClass)(m.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(l){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[l]+"}\n}"},retrieveShader:function(l){var a,u=this.type+"_"+this.mode;return l.programCache.hasOwnProperty(u)||(a=this.buildSource(this.mode),l.programCache[u]=this.createProgram(l.context,a)),l.programCache[u]},applyTo2d:function(l){var g,c,v,C,D,E,M,a=l.imageData.data,d=a.length,x=1-this.alpha;g=(M=new f.Color(this.color).getSource())[0]*this.alpha,c=M[1]*this.alpha,v=M[2]*this.alpha;for(var R=0;R<d;R+=4)switch(C=a[R],D=a[R+1],E=a[R+2],this.mode){case"multiply":a[R]=C*g/255,a[R+1]=D*c/255,a[R+2]=E*v/255;break;case"screen":a[R]=255-(255-C)*(255-g)/255,a[R+1]=255-(255-D)*(255-c)/255,a[R+2]=255-(255-E)*(255-v)/255;break;case"add":a[R]=C+g,a[R+1]=D+c,a[R+2]=E+v;break;case"diff":case"difference":a[R]=Math.abs(C-g),a[R+1]=Math.abs(D-c),a[R+2]=Math.abs(E-v);break;case"subtract":a[R]=C-g,a[R+1]=D-c,a[R+2]=E-v;break;case"darken":a[R]=Math.min(C,g),a[R+1]=Math.min(D,c),a[R+2]=Math.min(E,v);break;case"lighten":a[R]=Math.max(C,g),a[R+1]=Math.max(D,c),a[R+2]=Math.max(E,v);break;case"overlay":a[R]=g<128?2*C*g/255:255-2*(255-C)*(255-g)/255,a[R+1]=c<128?2*D*c/255:255-2*(255-D)*(255-c)/255,a[R+2]=v<128?2*E*v/255:255-2*(255-E)*(255-v)/255;break;case"exclusion":a[R]=g+C-2*g*C/255,a[R+1]=c+D-2*c*D/255,a[R+2]=v+E-2*v*E/255;break;case"tint":a[R]=g+C*x,a[R+1]=c+D*x,a[R+2]=v+E*x}},getUniformLocations:function(l,u){return{uColor:l.getUniformLocation(u,"uColor")}},sendUniformData:function(l,u){var a=new f.Color(this.color).getSource();a[0]=this.alpha*a[0]/255,a[1]=this.alpha*a[1]/255,a[2]=this.alpha*a[2]/255,a[3]=this.alpha,l.uniform4fv(u.uColor,a)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),f.Image.filters.BlendColor.fromObject=f.Image.filters.BaseFilter.fromObject}(We),function(y){"use strict";var f=y.fabric,m=f.Image.filters;m.BlendImage=(0,f.util.createClass)(m.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(l){var u=this.type+"_"+this.mode,a=this.fragmentSource[this.mode];return l.programCache.hasOwnProperty(u)||(l.programCache[u]=this.createProgram(l.context,a)),l.programCache[u]},applyToWebGL:function(l){var u=l.context,a=this.createTexture(l.filterBackend,this.image);this.bindAdditionalTexture(u,a,u.TEXTURE1),this.callSuper("applyToWebGL",l),this.unbindAdditionalTexture(u,u.TEXTURE1)},createTexture:function(l,u){return l.getCachedTexture(u.cacheKey,u._element)},calculateMatrix:function(){var l=this.image;return[1/l.scaleX,0,0,0,1/l.scaleY,0,-l.left/l._element.width,-l.top/l._element.height,1]},applyTo2d:function(l){var C,D,E,M,x,R,j,q,he,me,De,u=l.imageData,a=l.filterBackend.resources,d=u.data,g=d.length,c=u.width,v=u.height,le=this.image;a.blendImage||(a.blendImage=f.util.createCanvasElement()),me=(he=a.blendImage).getContext("2d"),he.width!==c||he.height!==v?(he.width=c,he.height=v):me.clearRect(0,0,c,v),me.setTransform(le.scaleX,0,0,le.scaleY,le.left,le.top),me.drawImage(le._element,0,0,c,v),De=me.getImageData(0,0,c,v).data;for(var _e=0;_e<g;_e+=4)switch(x=d[_e],R=d[_e+1],j=d[_e+2],q=d[_e+3],C=De[_e],D=De[_e+1],E=De[_e+2],M=De[_e+3],this.mode){case"multiply":d[_e]=x*C/255,d[_e+1]=R*D/255,d[_e+2]=j*E/255,d[_e+3]=q*M/255;break;case"mask":d[_e+3]=M}},getUniformLocations:function(l,u){return{uTransformMatrix:l.getUniformLocation(u,"uTransformMatrix"),uImage:l.getUniformLocation(u,"uImage")}},sendUniformData:function(l,u){var a=this.calculateMatrix();l.uniform1i(u.uImage,1),l.uniformMatrix3fv(u.uTransformMatrix,!1,a)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),f.Image.filters.BlendImage.fromObject=function(l,u){f.Image.fromObject(l.image,function(a){var d=f.util.object.clone(l);d.image=a,u(new f.Image.filters.BlendImage(d))})}}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=Math.pow,p=Math.floor,l=Math.sqrt,u=Math.abs,a=Math.round,d=Math.sin,g=Math.ceil,c=f.Image.filters;c.Resize=(0,f.util.createClass)(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(C,D){return{uDelta:C.getUniformLocation(D,"uDelta"),uTaps:C.getUniformLocation(D,"uTaps")}},sendUniformData:function(C,D){C.uniform2fv(D.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),C.uniform1fv(D.uTaps,this.taps)},retrieveShader:function(C){var D=this.getFilterWindow(),E=this.type+"_"+D;if(!C.programCache.hasOwnProperty(E)){var M=this.generateShader(D);C.programCache[E]=this.createProgram(C.context,M)}return C.programCache[E]},getFilterWindow:function(){return Math.ceil(this.lanczosLobes/this.tempScale)},getTaps:function(){for(var C=this.lanczosCreate(this.lanczosLobes),D=this.tempScale,E=this.getFilterWindow(),M=new Array(E),x=1;x<=E;x++)M[x-1]=C(x*D);return M},generateShader:function(M){for(var D=new Array(M),E=this.fragmentSourceTOP,x=1;x<=M;x++)D[x-1]=x+".0 * uDelta";return E+="uniform float uTaps["+M+"];\n",E+="void main() {\n",E+="  vec4 color = texture2D(uTexture, vTexCoord);\n",E+="  float sum = 1.0;\n",D.forEach(function(R,j){E+="  color += texture2D(uTexture, vTexCoord + "+R+") * uTaps["+j+"];\n",E+="  color += texture2D(uTexture, vTexCoord - "+R+") * uTaps["+j+"];\n",E+="  sum += 2.0 * uTaps["+j+"];\n"}),E+="  gl_FragColor = color / sum;\n",E+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(C){C.webgl?(C.passes++,this.width=C.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=C.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),C.destinationWidth=this.dW,this._setupFrameBuffer(C),this.applyToWebGL(C),this._swapTextures(C),C.sourceWidth=C.destinationWidth,this.height=C.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),C.destinationHeight=this.dH,this._setupFrameBuffer(C),this.applyToWebGL(C),this._swapTextures(C),C.sourceHeight=C.destinationHeight):this.applyTo2d(C)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(C){return function(D){if(D>=C||D<=-C)return 0;if(D<1.1920929e-7&&D>-1.1920929e-7)return 1;var E=(D*=Math.PI)/C;return d(D)/D*d(E)/E}},applyTo2d:function(C){var D=C.imageData,E=this.scaleX,M=this.scaleY;this.rcpScaleX=1/E,this.rcpScaleY=1/M;var he,x=D.width,R=D.height,j=a(x*E),q=a(R*M);"sliceHack"===this.resizeType?he=this.sliceByTwo(C,x,R,j,q):"hermite"===this.resizeType?he=this.hermiteFastResize(C,x,R,j,q):"bilinear"===this.resizeType?he=this.bilinearFiltering(C,x,R,j,q):"lanczos"===this.resizeType&&(he=this.lanczosResize(C,x,R,j,q)),C.imageData=he},sliceByTwo:function(C,D,E,M,x){var _e,ie,R=C.imageData,j=.5,q=!1,he=!1,me=D*j,le=E*j,De=f.filterBackend.resources,xe=0,Re=0,Ae=D,I=0;for(De.sliceByTwo||(De.sliceByTwo=document.createElement("canvas")),((_e=De.sliceByTwo).width<1.5*D||_e.height<E)&&(_e.width=1.5*D,_e.height=E),(ie=_e.getContext("2d")).clearRect(0,0,1.5*D,E),ie.putImageData(R,0,0),M=p(M),x=p(x);!q||!he;)D=me,E=le,M<p(me*j)?me=p(me*j):(me=M,q=!0),x<p(le*j)?le=p(le*j):(le=x,he=!0),ie.drawImage(_e,xe,Re,D,E,Ae,I,me,le),xe=Ae,Re=I,I+=le;return ie.getImageData(xe,Re,M,x)},lanczosResize:function(C,D,E,M,x){var j=C.imageData.data,q=C.ctx.createImageData(M,x),he=q.data,me=this.lanczosCreate(this.lanczosLobes),le=this.rcpScaleX,De=this.rcpScaleY,_e=2/this.rcpScaleX,ie=2/this.rcpScaleY,xe=g(le*this.lanczosLobes/2),Re=g(De*this.lanczosLobes/2),Ae={},I={},V={};return function R(L){var N,Y,F,O,U,$,re,X,ue,ge,Ce;for(I.x=(L+.5)*le,V.x=p(I.x),N=0;N<x;N++){for(I.y=(N+.5)*De,V.y=p(I.y),U=0,$=0,re=0,X=0,ue=0,Y=V.x-xe;Y<=V.x+xe;Y++)if(!(Y<0||Y>=D)){ge=p(1e3*u(Y-I.x)),Ae[ge]||(Ae[ge]={});for(var J=V.y-Re;J<=V.y+Re;J++)J<0||J>=E||(Ce=p(1e3*u(J-I.y)),Ae[ge][Ce]||(Ae[ge][Ce]=me(l(m(ge*_e,2)+m(Ce*ie,2))/1e3)),(F=Ae[ge][Ce])>0&&(U+=F,$+=F*j[O=4*(J*D+Y)],re+=F*j[O+1],X+=F*j[O+2],ue+=F*j[O+3]))}he[O=4*(N*M+L)]=$/U,he[O+1]=re/U,he[O+2]=X/U,he[O+3]=ue/U}return++L<M?R(L):q}(0)},bilinearFiltering:function(C,D,E,M,x){var me,le,De,_e,ie,xe,Re,V,I=0,L=this.rcpScaleX,N=this.rcpScaleY,Y=4*(D-1),O=C.imageData.data,U=C.ctx.createImageData(M,x),$=U.data;for(De=0;De<x;De++)for(_e=0;_e<M;_e++)for(ie=L*_e-(me=p(L*_e)),xe=N*De-(le=p(N*De)),V=4*(le*D+me),Re=0;Re<4;Re++)$[I++]=O[V+Re]*(1-ie)*(1-xe)+O[V+4+Re]*ie*(1-xe)+O[V+Y+Re]*xe*(1-ie)+O[V+Y+4+Re]*ie*xe;return U},hermiteFastResize:function(C,D,E,M,x){for(var R=this.rcpScaleX,j=this.rcpScaleY,q=g(R/2),he=g(j/2),le=C.imageData.data,De=C.ctx.createImageData(M,x),_e=De.data,ie=0;ie<x;ie++)for(var xe=0;xe<M;xe++){for(var Re=4*(xe+ie*M),Ae=0,I=0,V=0,L=0,N=0,Y=0,F=0,O=(ie+.5)*j,U=p(ie*j);U<(ie+1)*j;U++)for(var $=u(O-(U+.5))/he,re=(xe+.5)*R,X=$*$,ue=p(xe*R);ue<(xe+1)*R;ue++){var ge=u(re-(ue+.5))/q,Ce=l(X+ge*ge);Ce>1&&Ce<-1||(Ae=2*Ce*Ce*Ce-3*Ce*Ce+1)>0&&(F+=Ae*le[3+(ge=4*(ue+U*D))],V+=Ae,le[ge+3]<255&&(Ae=Ae*le[ge+3]/250),L+=Ae*le[ge],N+=Ae*le[ge+1],Y+=Ae*le[ge+2],I+=Ae)}_e[Re]=L/I,_e[Re+1]=N/I,_e[Re+2]=Y/I,_e[Re+3]=F/V}return De},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),f.Image.filters.Resize.fromObject=f.Image.filters.BaseFilter.fromObject}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.Image.filters;m.Contrast=(0,f.util.createClass)(m.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(l){if(0!==this.contrast){var a,d=l.imageData.data,g=d.length,c=Math.floor(255*this.contrast),v=259*(c+255)/(255*(259-c));for(a=0;a<g;a+=4)d[a]=v*(d[a]-128)+128,d[a+1]=v*(d[a+1]-128)+128,d[a+2]=v*(d[a+2]-128)+128}},getUniformLocations:function(l,u){return{uContrast:l.getUniformLocation(u,"uContrast")}},sendUniformData:function(l,u){l.uniform1f(u.uContrast,this.contrast)}}),f.Image.filters.Contrast.fromObject=f.Image.filters.BaseFilter.fromObject}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.Image.filters;m.Saturation=(0,f.util.createClass)(m.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(l){if(0!==this.saturation){var c,v,a=l.imageData.data,d=a.length,g=-this.saturation;for(c=0;c<d;c+=4)v=Math.max(a[c],a[c+1],a[c+2]),a[c]+=v!==a[c]?(v-a[c])*g:0,a[c+1]+=v!==a[c+1]?(v-a[c+1])*g:0,a[c+2]+=v!==a[c+2]?(v-a[c+2])*g:0}},getUniformLocations:function(l,u){return{uSaturation:l.getUniformLocation(u,"uSaturation")}},sendUniformData:function(l,u){l.uniform1f(u.uSaturation,-this.saturation)}}),f.Image.filters.Saturation.fromObject=f.Image.filters.BaseFilter.fromObject}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.Image.filters;m.Vibrance=(0,f.util.createClass)(m.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(l){if(0!==this.vibrance){var c,v,D,a=l.imageData.data,d=a.length,g=-this.vibrance;for(c=0;c<d;c+=4)v=Math.max(a[c],a[c+1],a[c+2]),D=2*Math.abs(v-(a[c]+a[c+1]+a[c+2])/3)/255*g,a[c]+=v!==a[c]?(v-a[c])*D:0,a[c+1]+=v!==a[c+1]?(v-a[c+1])*D:0,a[c+2]+=v!==a[c+2]?(v-a[c+2])*D:0}},getUniformLocations:function(l,u){return{uVibrance:l.getUniformLocation(u,"uVibrance")}},sendUniformData:function(l,u){l.uniform1f(u.uVibrance,-this.vibrance)}}),f.Image.filters.Vibrance.fromObject=f.Image.filters.BaseFilter.fromObject}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.Image.filters;m.Blur=(0,f.util.createClass)(m.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(l){l.webgl?(this.aspectRatio=l.sourceWidth/l.sourceHeight,l.passes++,this._setupFrameBuffer(l),this.horizontal=!0,this.applyToWebGL(l),this._swapTextures(l),this._setupFrameBuffer(l),this.horizontal=!1,this.applyToWebGL(l),this._swapTextures(l)):this.applyTo2d(l)},applyTo2d:function(l){l.imageData=this.simpleBlur(l)},simpleBlur:function(l){var a,d,u=l.filterBackend.resources,g=l.imageData.width,c=l.imageData.height;u.blurLayer1||(u.blurLayer1=f.util.createCanvasElement(),u.blurLayer2=f.util.createCanvasElement()),d=u.blurLayer2,((a=u.blurLayer1).width!==g||a.height!==c)&&(d.width=a.width=g,d.height=a.height=c);var E,M,x,R,v=a.getContext("2d"),C=d.getContext("2d"),D=15,j=.06*this.blur*.5;for(v.putImageData(l.imageData,0,0),C.clearRect(0,0,g,c),R=-D;R<=D;R++)x=j*(M=R/D)*g+(E=(Math.random()-.5)/4),C.globalAlpha=1-Math.abs(M),C.drawImage(a,x,E),v.drawImage(d,0,0),C.globalAlpha=1,C.clearRect(0,0,d.width,d.height);for(R=-D;R<=D;R++)x=j*(M=R/D)*c+(E=(Math.random()-.5)/4),C.globalAlpha=1-Math.abs(M),C.drawImage(a,E,x),v.drawImage(d,0,0),C.globalAlpha=1,C.clearRect(0,0,d.width,d.height);l.ctx.drawImage(a,0,0);var q=l.ctx.getImageData(0,0,a.width,a.height);return v.globalAlpha=1,v.clearRect(0,0,a.width,a.height),q},getUniformLocations:function(l,u){return{delta:l.getUniformLocation(u,"uDelta")}},sendUniformData:function(l,u){var a=this.chooseRightDelta();l.uniform2fv(u.delta,a)},chooseRightDelta:function(){var a,l=1,u=[0,0];return this.horizontal?this.aspectRatio>1&&(l=1/this.aspectRatio):this.aspectRatio<1&&(l=this.aspectRatio),a=l*this.blur*.12,this.horizontal?u[0]=a:u[1]=a,u}}),m.Blur.fromObject=f.Image.filters.BaseFilter.fromObject}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.Image.filters;m.Gamma=(0,f.util.createClass)(m.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(l){this.gamma=[1,1,1],m.BaseFilter.prototype.initialize.call(this,l)},applyTo2d:function(l){var D,a=l.imageData.data,d=this.gamma,g=a.length,c=1/d[0],v=1/d[1],C=1/d[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),D=0,g=256;D<g;D++)this.rVals[D]=255*Math.pow(D/255,c),this.gVals[D]=255*Math.pow(D/255,v),this.bVals[D]=255*Math.pow(D/255,C);for(D=0,g=a.length;D<g;D+=4)a[D]=this.rVals[a[D]],a[D+1]=this.gVals[a[D+1]],a[D+2]=this.bVals[a[D+2]]},getUniformLocations:function(l,u){return{uGamma:l.getUniformLocation(u,"uGamma")}},sendUniformData:function(l,u){l.uniform3fv(u.uGamma,this.gamma)}}),f.Image.filters.Gamma.fromObject=f.Image.filters.BaseFilter.fromObject}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.Image.filters;m.Composed=(0,f.util.createClass)(m.BaseFilter,{type:"Composed",subFilters:[],initialize:function(l){this.callSuper("initialize",l),this.subFilters=this.subFilters.slice(0)},applyTo:function(l){l.passes+=this.subFilters.length-1,this.subFilters.forEach(function(u){u.applyTo(l)})},toObject:function(){return f.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(l){return l.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(l){return!l.isNeutralState()})}}),f.Image.filters.Composed.fromObject=function(l,u){var d=(l.subFilters||[]).map(function(c){return new f.Image.filters[c.type](c)}),g=new f.Image.filters.Composed({subFilters:d});return u&&u(g),g}}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.Image.filters;m.HueRotation=(0,f.util.createClass)(m.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var l=this.rotation*Math.PI,u=f.util.cos(l),a=f.util.sin(l),d=1/3,g=Math.sqrt(d)*a,c=1-u;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=u+c/3,this.matrix[1]=d*c-g,this.matrix[2]=d*c+g,this.matrix[5]=d*c+g,this.matrix[6]=u+d*c,this.matrix[7]=d*c-g,this.matrix[10]=d*c-g,this.matrix[11]=d*c+g,this.matrix[12]=u+d*c},isNeutralState:function(l){return this.calculateMatrix(),m.BaseFilter.prototype.isNeutralState.call(this,l)},applyTo:function(l){this.calculateMatrix(),m.BaseFilter.prototype.applyTo.call(this,l)}}),f.Image.filters.HueRotation.fromObject=f.Image.filters.BaseFilter.fromObject}(We),function(y){"use strict";var f=y.fabric||(y.fabric={}),m=f.util.object.clone;if(f.Text)f.warn("fabric.Text is already defined");else{var p="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");f.Text=f.util.createClass(f.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:f.Object.prototype.stateProperties.concat(p),cacheProperties:f.Object.prototype.cacheProperties.concat(p),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(l,u){this.styles=u&&u.styles||{},this.text=l,this.__skipDimension=!0,this.callSuper("initialize",u),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var l=this.path;l&&(l.segmentsInfo=f.util.getPathSegmentsInfo(l.path))},getMeasuringContext:function(){return f._measuringContext||(f._measuringContext=this.canvas&&this.canvas.contextCache||f.util.createCanvasElement().getContext("2d")),f._measuringContext},_splitText:function(){var l=this._splitTextIntoLines(this.text);return this.textLines=l.lines,this._textLines=l.graphemeLines,this._unwrappedTextLines=l._unwrappedLines,this._text=l.graphemeText,l},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var l,u,d,g,c,v,C=0,D=this._textLines.length;C<D;C++)if(("justify"===this.textAlign||C!==D-1&&!this.isEndOfWrapping(C))&&(d=0,g=this._textLines[C],(u=this.getLineWidth(C))<this.width&&(v=this.textLines[C].match(this._reSpacesAndTabs)))){l=(this.width-u)/v.length;for(var E=0,M=g.length;E<=M;E++)c=this.__charBounds[C][E],this._reSpaceAndTab.test(g[E])?(c.width+=l,c.kernedWidth+=l,c.left+=d,d+=l):c.left+=d}},isEndOfWrapping:function(l){return l===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var l=this.callSuper("_getCacheCanvasDimensions"),u=this.fontSize;return l.width+=u*l.zoomX,l.height+=u*l.zoomY,l},_render:function(l){var u=this.path;u&&!u.isNotVisible()&&u._render(l),this._setTextStyles(l),this._renderTextLinesBackground(l),this._renderTextDecoration(l,"underline"),this._renderText(l),this._renderTextDecoration(l,"overline"),this._renderTextDecoration(l,"linethrough")},_renderText:function(l){"stroke"===this.paintFirst?(this._renderTextStroke(l),this._renderTextFill(l)):(this._renderTextFill(l),this._renderTextStroke(l))},_setTextStyles:function(l,u,a){if(l.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":l.textBaseline="middle";break;case"ascender":l.textBaseline="top";break;case"descender":l.textBaseline="bottom"}l.font=this._getFontDeclaration(u,a)},calcTextWidth:function(){for(var l=this.getLineWidth(0),u=1,a=this._textLines.length;u<a;u++){var d=this.getLineWidth(u);d>l&&(l=d)}return l},_renderTextLine:function(l,u,a,d,g,c){this._renderChars(l,u,a,d,g,c)},_renderTextLinesBackground:function(l){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var u,a,g,c,M,x,j,d=l.fillStyle,v=this._getLeftOffset(),C=this._getTopOffset(),D=0,E=0,R=this.path,q=0,he=this._textLines.length;q<he;q++)if(u=this.getHeightOfLine(q),this.textBackgroundColor||this.styleHas("textBackgroundColor",q)){g=this._textLines[q],a=this._getLineLeftOffset(q),E=0,D=0,c=this.getValueOfPropertyAt(q,0,"textBackgroundColor");for(var me=0,le=g.length;me<le;me++)M=this.__charBounds[q][me],x=this.getValueOfPropertyAt(q,me,"textBackgroundColor"),R?(l.save(),l.translate(M.renderLeft,M.renderTop),l.rotate(M.angle),l.fillStyle=x,x&&l.fillRect(-M.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),M.width,u/this.lineHeight),l.restore()):x!==c?(j=v+a+D,"rtl"===this.direction&&(j=this.width-j-E),l.fillStyle=c,c&&l.fillRect(j,C,E,u/this.lineHeight),D=M.left,E=M.width,c=x):E+=M.kernedWidth;x&&!R&&(j=v+a+D,"rtl"===this.direction&&(j=this.width-j-E),l.fillStyle=x,l.fillRect(j,C,E,u/this.lineHeight)),C+=u}else C+=u;l.fillStyle=d,this._removeShadow(l)}},getFontCache:function(l){var u=l.fontFamily.toLowerCase();f.charWidthsCache[u]||(f.charWidthsCache[u]={});var a=f.charWidthsCache[u],d=l.fontStyle.toLowerCase()+"_"+(l.fontWeight+"").toLowerCase();return a[d]||(a[d]={}),a[d]},_measureChar:function(l,u,a,d){var E,M,x,j,g=this.getFontCache(u),C=a+l,D=this._getFontDeclaration(u)===this._getFontDeclaration(d),R=u.fontSize/this.CACHE_FONT_SIZE;if(a&&void 0!==g[a]&&(x=g[a]),void 0!==g[l]&&(j=E=g[l]),D&&void 0!==g[C]&&(j=(M=g[C])-x),void 0===E||void 0===x||void 0===M){var q=this.getMeasuringContext();this._setTextStyles(q,u,!0)}return void 0===E&&(j=E=q.measureText(l).width,g[l]=E),void 0===x&&D&&a&&(x=q.measureText(a).width,g[a]=x),D&&void 0===M&&(M=q.measureText(C).width,g[C]=M,j=M-x),{width:E*R,kernedWidth:j*R}},getHeightOfChar:function(l,u){return this.getValueOfPropertyAt(l,u,"fontSize")},measureLine:function(l){var u=this._measureLine(l);return 0!==this.charSpacing&&(u.width-=this._getWidthOfCharSpacing()),u.width<0&&(u.width=0),u},_measureLine:function(l){var a,d,c,v,M,x,u=0,g=this._textLines[l],D=new Array(g.length),E=0,R=this.path,j="right"===this.pathSide;for(this.__charBounds[l]=D,a=0;a<g.length;a++)v=this._getGraphemeBox(d=g[a],l,a,c),D[a]=v,u+=v.kernedWidth,c=d;if(D[a]={left:v?v.left+v.width:0,width:0,kernedWidth:0,height:this.fontSize},R){switch(x=R.segmentsInfo[R.segmentsInfo.length-1].length,(M=f.util.getPointOnPath(R.path,0,R.segmentsInfo)).x+=R.pathOffset.x,M.y+=R.pathOffset.y,this.textAlign){case"left":E=j?x-u:0;break;case"center":E=(x-u)/2;break;case"right":E=j?0:x-u}for(E+=this.pathStartOffset*(j?-1:1),a=j?g.length-1:0;j?a>=0:a<g.length;j?a--:a++)E>x?E%=x:E<0&&(E+=x),this._setGraphemeOnPath(E,v=D[a],M),E+=v.kernedWidth}return{width:u,numOfSpaces:0}},_setGraphemeOnPath:function(l,u,a){var g=this.path,c=f.util.getPointOnPath(g.path,l+u.kernedWidth/2,g.segmentsInfo);u.renderLeft=c.x-a.x,u.renderTop=c.y-a.y,u.angle=c.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(l,u,a,d,g){var M,c=this.getCompleteStyleDeclaration(u,a),v=d?this.getCompleteStyleDeclaration(u,a-1):{},C=this._measureChar(l,c,d,v),D=C.kernedWidth,E=C.width;0!==this.charSpacing&&(E+=M=this._getWidthOfCharSpacing(),D+=M);var x={width:E,left:0,height:c.fontSize,kernedWidth:D,deltaY:c.deltaY};if(a>0&&!g){var R=this.__charBounds[u][a-1];x.left=R.left+R.width+C.kernedWidth-C.width}return x},getHeightOfLine:function(l){if(this.__lineHeights[l])return this.__lineHeights[l];for(var u=this._textLines[l],a=this.getHeightOfChar(l,0),d=1,g=u.length;d<g;d++)a=Math.max(this.getHeightOfChar(l,d),a);return this.__lineHeights[l]=a*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var l,u=0,a=0,d=this._textLines.length;a<d;a++)l=this.getHeightOfLine(a),u+=a===d-1?l/this.lineHeight:l;return u},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(l,u){l.save();for(var a=0,d=this._getLeftOffset(),g=this._getTopOffset(),c=0,v=this._textLines.length;c<v;c++){var C=this.getHeightOfLine(c),D=C/this.lineHeight,E=this._getLineLeftOffset(c);this._renderTextLine(u,l,this._textLines[c],d+E,g+a+D,c),a+=C}l.restore()},_renderTextFill:function(l){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(l,"fillText")},_renderTextStroke:function(l){(!this.stroke||0===this.strokeWidth)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this._setLineDash(l,this.strokeDashArray),l.beginPath(),this._renderTextCommon(l,"strokeText"),l.closePath(),l.restore())},_renderChars:function(l,u,a,d,g,c){var D,E,x,j,v=this.getHeightOfLine(c),C=-1!==this.textAlign.indexOf("justify"),M="",R=0,q=this.path,he=!C&&0===this.charSpacing&&this.isEmptyStyles(c)&&!q,me="ltr"===this.direction,le="ltr"===this.direction?1:-1,_e=u.canvas.getAttribute("dir");if(u.save(),_e!==this.direction&&(u.canvas.setAttribute("dir",me?"ltr":"rtl"),u.direction=me?"ltr":"rtl",u.textAlign=me?"left":"right"),g-=v*this._fontSizeFraction/this.lineHeight,he)return this._renderChar(l,u,c,0,a.join(""),d,g,v),void u.restore();for(var ie=0,xe=a.length-1;ie<=xe;ie++)j=ie===xe||this.charSpacing||q,M+=a[ie],x=this.__charBounds[c][ie],0===R?(d+=le*(x.kernedWidth-x.width),R+=x.width):R+=x.kernedWidth,C&&!j&&this._reSpaceAndTab.test(a[ie])&&(j=!0),j||(D=D||this.getCompleteStyleDeclaration(c,ie),E=this.getCompleteStyleDeclaration(c,ie+1),j=f.util.hasStyleChanged(D,E,!1)),j&&(q?(u.save(),u.translate(x.renderLeft,x.renderTop),u.rotate(x.angle),this._renderChar(l,u,c,ie,M,-R/2,0,v),u.restore()):this._renderChar(l,u,c,ie,M,d,g,v),M="",D=E,d+=le*R,R=0);u.restore()},_applyPatternGradientTransformText:function(l){var a,u=f.util.createCanvasElement(),d=this.width+this.strokeWidth,g=this.height+this.strokeWidth;return u.width=d,u.height=g,(a=u.getContext("2d")).beginPath(),a.moveTo(0,0),a.lineTo(d,0),a.lineTo(d,g),a.lineTo(0,g),a.closePath(),a.translate(d/2,g/2),a.fillStyle=l.toLive(a),this._applyPatternGradientTransform(a,l),a.fill(),a.createPattern(u,"no-repeat")},handleFiller:function(l,u,a){var d,g;return a.toLive?"percentage"===a.gradientUnits||a.gradientTransform||a.patternTransform?(l.translate(d=-this.width/2,g=-this.height/2),l[u]=this._applyPatternGradientTransformText(a),{offsetX:d,offsetY:g}):(l[u]=a.toLive(l,this),this._applyPatternGradientTransform(l,a)):(l[u]=a,{offsetX:0,offsetY:0})},_setStrokeStyles:function(l,u){return l.lineWidth=u.strokeWidth,l.lineCap=this.strokeLineCap,l.lineDashOffset=this.strokeDashOffset,l.lineJoin=this.strokeLineJoin,l.miterLimit=this.strokeMiterLimit,this.handleFiller(l,"strokeStyle",u.stroke)},_setFillStyles:function(l,u){return this.handleFiller(l,"fillStyle",u.fill)},_renderChar:function(l,u,a,d,g,c,v){var x,R,C=this._getStyleDeclaration(a,d),D=this.getCompleteStyleDeclaration(a,d),E="fillText"===l&&D.fill,M="strokeText"===l&&D.stroke&&D.strokeWidth;!M&&!E||(u.save(),E&&(x=this._setFillStyles(u,D)),M&&(R=this._setStrokeStyles(u,D)),u.font=this._getFontDeclaration(D),C&&C.textBackgroundColor&&this._removeShadow(u),C&&C.deltaY&&(v+=C.deltaY),E&&u.fillText(g,c-x.offsetX,v-x.offsetY),M&&u.strokeText(g,c-R.offsetX,v-R.offsetY),u.restore())},setSuperscript:function(l,u){return this._setScript(l,u,this.superscript)},setSubscript:function(l,u){return this._setScript(l,u,this.subscript)},_setScript:function(l,u,a){var d=this.get2DCursorLocation(l,!0),g=this.getValueOfPropertyAt(d.lineIndex,d.charIndex,"fontSize"),c=this.getValueOfPropertyAt(d.lineIndex,d.charIndex,"deltaY");return this.setSelectionStyles({fontSize:g*a.size,deltaY:c+g*a.baseline},l,u),this},_getLineLeftOffset:function(l){var u=this.getLineWidth(l),a=this.width-u,d=this.textAlign,g=this.direction,c=0,v=this.isEndOfWrapping(l);return"justify"===d||"justify-center"===d&&!v||"justify-right"===d&&!v||"justify-left"===d&&!v?0:("center"===d&&(c=a/2),"right"===d&&(c=a),"justify-center"===d&&(c=a/2),"justify-right"===d&&(c=a),"rtl"===g&&(c-=a),c)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var l=this._forceClearCache;return l||(l=this.hasStateChanged("_dimensionAffectingProps")),l&&(this.dirty=!0,this._forceClearCache=!1),l},getLineWidth:function(l){if(void 0!==this.__lineWidths[l])return this.__lineWidths[l];var a=this.measureLine(l).width;return this.__lineWidths[l]=a,a},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(l,u,a){var d=this._getStyleDeclaration(l,u);return d&&typeof d[a]<"u"?d[a]:this[a]},_renderTextDecoration:function(l,u){if(this[u]||this.styleHas(u)){for(var a,d,g,c,v,C,D,E,R,j,q,he,me,le,De,_e,M=this._getLeftOffset(),x=this._getTopOffset(),ie=this.path,xe=this._getWidthOfCharSpacing(),Re=this.offsets[u],Ae=0,I=this._textLines.length;Ae<I;Ae++)if(a=this.getHeightOfLine(Ae),this[u]||this.styleHas(u,Ae)){D=this._textLines[Ae],le=a/this.lineHeight,c=this._getLineLeftOffset(Ae),j=0,q=0,E=this.getValueOfPropertyAt(Ae,0,u),_e=this.getValueOfPropertyAt(Ae,0,"fill"),R=x+le*(1-this._fontSizeFraction),d=this.getHeightOfChar(Ae,0),v=this.getValueOfPropertyAt(Ae,0,"deltaY");for(var V=0,L=D.length;V<L;V++)if(he=this.__charBounds[Ae][V],me=this.getValueOfPropertyAt(Ae,V,u),De=this.getValueOfPropertyAt(Ae,V,"fill"),g=this.getHeightOfChar(Ae,V),C=this.getValueOfPropertyAt(Ae,V,"deltaY"),ie&&me&&De)l.save(),l.fillStyle=_e,l.translate(he.renderLeft,he.renderTop),l.rotate(he.angle),l.fillRect(-he.kernedWidth/2,Re*g+C,he.kernedWidth,this.fontSize/15),l.restore();else if((me!==E||De!==_e||g!==d||C!==v)&&q>0){var N=M+c+j;"rtl"===this.direction&&(N=this.width-N-q),E&&_e&&(l.fillStyle=_e,l.fillRect(N,R+Re*d+v,q,this.fontSize/15)),j=he.left,q=he.width,E=me,_e=De,d=g,v=C}else q+=he.kernedWidth;N=M+c+j,"rtl"===this.direction&&(N=this.width-N-q),l.fillStyle=De,me&&De&&l.fillRect(N,R+Re*d+v,q-xe,this.fontSize/15),x+=a}else x+=a;this._removeShadow(l)}},_getFontDeclaration:function(l,u){var a=l||this,d=this.fontFamily,g=f.Text.genericFonts.indexOf(d.toLowerCase())>-1,c=void 0===d||d.indexOf("'")>-1||d.indexOf(",")>-1||d.indexOf('"')>-1||g?a.fontFamily:'"'+a.fontFamily+'"';return[f.isLikelyNode?a.fontWeight:a.fontStyle,f.isLikelyNode?a.fontStyle:a.fontWeight,u?this.CACHE_FONT_SIZE+"px":a.fontSize+"px",c].join(" ")},render:function(l){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",l)))},_splitTextIntoLines:function(l){for(var u=l.split(this._reNewline),a=new Array(u.length),d=["\n"],g=[],c=0;c<u.length;c++)a[c]=f.util.string.graphemeSplit(u[c]),g=g.concat(a[c],d);return g.pop(),{_unwrappedLines:a,lines:u,graphemeText:g,graphemeLines:a}},toObject:function(l){var u=p.concat(l),a=this.callSuper("toObject",u);return a.styles=f.util.stylesToArray(this.styles,this.text),a.path&&(a.path=this.path.toObject()),a},set:function(l,u){this.callSuper("set",l,u);var a=!1,d=!1;if("object"==typeof l)for(var g in l)"path"===g&&this.setPathInfo(),a=a||-1!==this._dimensionAffectingProps.indexOf(g),d=d||"path"===g;else a=-1!==this._dimensionAffectingProps.indexOf(l),d="path"===l;return d&&this.setPathInfo(),a&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),f.Text.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),f.Text.DEFAULT_SVG_FONT_SIZE=16,f.Text.fromElement=function(l,u,a){if(!l)return u(null);var d=f.parseAttributes(l,f.Text.ATTRIBUTE_NAMES),g=d.textAnchor||"left";if((a=f.util.object.extend(a?m(a):{},d)).top=a.top||0,a.left=a.left||0,d.textDecoration){var c=d.textDecoration;-1!==c.indexOf("underline")&&(a.underline=!0),-1!==c.indexOf("overline")&&(a.overline=!0),-1!==c.indexOf("line-through")&&(a.linethrough=!0),delete a.textDecoration}"dx"in d&&(a.left+=d.dx),"dy"in d&&(a.top+=d.dy),"fontSize"in a||(a.fontSize=f.Text.DEFAULT_SVG_FONT_SIZE);var v="";"textContent"in l?v=l.textContent:"firstChild"in l&&null!==l.firstChild&&"data"in l.firstChild&&null!==l.firstChild.data&&(v=l.firstChild.data),v=v.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var C=a.strokeWidth;a.strokeWidth=0;var D=new f.Text(v,a),E=D.getScaledHeight()/D.height,x=((D.height+D.strokeWidth)*D.lineHeight-D.height)*E,R=D.getScaledHeight()+x,j=0;"center"===g&&(j=D.getScaledWidth()/2),"right"===g&&(j=D.getScaledWidth()),D.set({left:D.left-j,top:D.top-(R-D.fontSize*(.07+D._fontSizeFraction))/D.lineHeight,strokeWidth:typeof C<"u"?C:1}),u(D)},f.Text.fromObject=function(l,u){var a=m(l),d=l.path;return delete a.path,f.Object._fromObject("Text",a,function(g){g.styles=f.util.stylesFromArray(l.styles,l.text),d?f.Object._fromObject("Path",d,function(c){g.set("path",c),u(g)},"path"):u(g)},"text")},f.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],f.util.createAccessors&&f.util.createAccessors(f.Text)}}(We),w.util.object.extend(w.Text.prototype,{isEmptyStyles:function(y){if(!this.styles||typeof y<"u"&&!this.styles[y])return!0;var f=typeof y>"u"?this.styles:{line:this.styles[y]};for(var m in f)for(var p in f[m])for(var l in f[m][p])return!1;return!0},styleHas:function(y,f){if(!this.styles||!y||""===y||typeof f<"u"&&!this.styles[f])return!1;var m=typeof f>"u"?this.styles:{0:this.styles[f]};for(var p in m)for(var l in m[p])if(typeof m[p][l][y]<"u")return!0;return!1},cleanStyle:function(y){if(!this.styles||!y||""===y)return!1;var p,l,f=this.styles,m=0,u=!0,a=0;for(var g in f){for(var c in p=0,f[g]){var d;m++,(d=f[g][c]).hasOwnProperty(y)?(l?d[y]!==l&&(u=!1):l=d[y],d[y]===this[y]&&delete d[y]):u=!1,0!==Object.keys(d).length?p++:delete f[g][c]}0===p&&delete f[g]}for(var C=0;C<this._textLines.length;C++)a+=this._textLines[C].length;u&&m===a&&(this[y]=l,this.removeStyle(y))},removeStyle:function(y){if(this.styles&&y&&""!==y){var m,p,l,f=this.styles;for(p in f){for(l in m=f[p])delete m[l][y],0===Object.keys(m[l]).length&&delete m[l];0===Object.keys(m).length&&delete f[p]}}},_extendStyles:function(y,f){var m=this.get2DCursorLocation(y);this._getLineStyle(m.lineIndex)||this._setLineStyle(m.lineIndex),this._getStyleDeclaration(m.lineIndex,m.charIndex)||this._setStyleDeclaration(m.lineIndex,m.charIndex,{}),w.util.object.extend(this._getStyleDeclaration(m.lineIndex,m.charIndex),f)},get2DCursorLocation:function(y,f){typeof y>"u"&&(y=this.selectionStart);for(var m=f?this._unwrappedTextLines:this._textLines,p=m.length,l=0;l<p;l++){if(y<=m[l].length)return{lineIndex:l,charIndex:y};y-=m[l].length+this.missingNewlineOffset(l)}return{lineIndex:l-1,charIndex:m[l-1].length<y?m[l-1].length:y}},getSelectionStyles:function(y,f,m){typeof y>"u"&&(y=this.selectionStart||0),typeof f>"u"&&(f=this.selectionEnd||y);for(var p=[],l=y;l<f;l++)p.push(this.getStyleAtPosition(l,m));return p},getStyleAtPosition:function(y,f){var m=this.get2DCursorLocation(y);return(f?this.getCompleteStyleDeclaration(m.lineIndex,m.charIndex):this._getStyleDeclaration(m.lineIndex,m.charIndex))||{}},setSelectionStyles:function(y,f,m){typeof f>"u"&&(f=this.selectionStart||0),typeof m>"u"&&(m=this.selectionEnd||f);for(var p=f;p<m;p++)this._extendStyles(p,y);return this._forceClearCache=!0,this},_getStyleDeclaration:function(y,f){var m=this.styles&&this.styles[y];return m?m[f]:null},getCompleteStyleDeclaration:function(y,f){for(var l,m=this._getStyleDeclaration(y,f)||{},p={},u=0;u<this._styleProperties.length;u++)p[l=this._styleProperties[u]]=typeof m[l]>"u"?this[l]:m[l];return p},_setStyleDeclaration:function(y,f,m){this.styles[y][f]=m},_deleteStyleDeclaration:function(y,f){delete this.styles[y][f]},_getLineStyle:function(y){return!!this.styles[y]},_setLineStyle:function(y){this.styles[y]={}},_deleteLineStyle:function(y){delete this.styles[y]}}),function(){function y(f){f.textDecoration&&(f.textDecoration.indexOf("underline")>-1&&(f.underline=!0),f.textDecoration.indexOf("line-through")>-1&&(f.linethrough=!0),f.textDecoration.indexOf("overline")>-1&&(f.overline=!0),delete f.textDecoration)}w.IText=w.util.createClass(w.Text,w.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(f,m){this.callSuper("initialize",f,m),this.initBehavior()},setSelectionStart:function(f){f=Math.max(f,0),this._updateAndFire("selectionStart",f)},setSelectionEnd:function(f){f=Math.min(f,this.text.length),this._updateAndFire("selectionEnd",f)},_updateAndFire:function(f,m){this[f]!==m&&(this._fireSelectionChanged(),this[f]=m),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(f){this.clearContextTop(),this.callSuper("render",f),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(f){this.callSuper("_render",f)},clearContextTop:function(f){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var m=this.canvas.contextTop,p=this.canvas.viewportTransform;m.save(),m.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this.transform(m),this._clearTextArea(m),f||m.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var f=this._getCursorBoundaries(),m=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(f,m):this.renderSelection(f,m),m.restore()}},_clearTextArea:function(f){var m=this.width+4,p=this.height+4;f.clearRect(-m/2,-p/2,m,p)},_getCursorBoundaries:function(f){typeof f>"u"&&(f=this.selectionStart);var m=this._getLeftOffset(),p=this._getTopOffset(),l=this._getCursorBoundariesOffsets(f);return{left:m,top:p,leftOffset:l.left,topOffset:l.top}},_getCursorBoundariesOffsets:function(f){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var m,p,l,d,u=0,a=0,g=this.get2DCursorLocation(f);l=g.charIndex,p=g.lineIndex;for(var c=0;c<p;c++)u+=this.getHeightOfLine(c);m=this._getLineLeftOffset(p);var v=this.__charBounds[p][l];return v&&(a=v.left),0!==this.charSpacing&&l===this._textLines[p].length&&(a-=this._getWidthOfCharSpacing()),d={top:u,left:m+(a>0?a:0)},"rtl"===this.direction&&(d.left*=-1),this.cursorOffsetCache=d,this.cursorOffsetCache},renderCursor:function(f,m){var p=this.get2DCursorLocation(),l=p.lineIndex,u=p.charIndex>0?p.charIndex-1:0,a=this.getValueOfPropertyAt(l,u,"fontSize"),d=this.scaleX*this.canvas.getZoom(),g=this.cursorWidth/d,c=f.topOffset,v=this.getValueOfPropertyAt(l,u,"deltaY");c+=(1-this._fontSizeFraction)*this.getHeightOfLine(l)/this.lineHeight-a*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(f,m),m.fillStyle=this.cursorColor||this.getValueOfPropertyAt(l,u,"fill"),m.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,m.fillRect(f.left+f.leftOffset-g/2,c+f.top+v,g,a)},renderSelection:function(f,m){for(var p=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,l=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,u=-1!==this.textAlign.indexOf("justify"),a=this.get2DCursorLocation(p),d=this.get2DCursorLocation(l),g=a.lineIndex,c=d.lineIndex,v=a.charIndex<0?0:a.charIndex,C=d.charIndex<0?0:d.charIndex,D=g;D<=c;D++){var x,E=this._getLineLeftOffset(D)||0,M=this.getHeightOfLine(D),R=0,j=0;if(D===g&&(R=this.__charBounds[g][v].left),D>=g&&D<c)j=u&&!this.isEndOfWrapping(D)?this.width:this.getLineWidth(D)||5;else if(D===c)if(0===C)j=this.__charBounds[c][C].left;else{var q=this._getWidthOfCharSpacing();j=this.__charBounds[c][C-1].left+this.__charBounds[c][C-1].width-q}x=M,(this.lineHeight<1||D===c&&this.lineHeight>1)&&(M/=this.lineHeight);var he=f.left+E+R,me=j-R,le=M,De=0;this.inCompositionMode?(m.fillStyle=this.compositionColor||"black",le=1,De=M):m.fillStyle=this.selectionColor,"rtl"===this.direction&&(he=this.width-he-me),m.fillRect(he,f.top+f.topOffset+De,me,le),f.topOffset+=x}},getCurrentCharFontSize:function(){var f=this._getCurrentCharIndex();return this.getValueOfPropertyAt(f.l,f.c,"fontSize")},getCurrentCharColor:function(){var f=this._getCurrentCharIndex();return this.getValueOfPropertyAt(f.l,f.c,"fill")},_getCurrentCharIndex:function(){var f=this.get2DCursorLocation(this.selectionStart,!0);return{l:f.lineIndex,c:f.charIndex>0?f.charIndex-1:0}}}),w.IText.fromObject=function(f,m){var p=w.util.stylesFromArray(f.styles,f.text),l=Object.assign({},f,{styles:p});if(y(l),l.styles)for(var u in l.styles)for(var a in l.styles[u])y(l.styles[u][a]);w.Object._fromObject("IText",l,m,"text")}}(),function(){var y=w.util.object.clone;w.util.object.extend(w.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var f=this;this.on("added",function(){var m=f.canvas;m&&(m._hasITextHandlers||(m._hasITextHandlers=!0,f._initCanvasHandlers(m)),m._iTextInstances=m._iTextInstances||[],m._iTextInstances.push(f))})},initRemovedHandler:function(){var f=this;this.on("removed",function(){var m=f.canvas;m&&(m._iTextInstances=m._iTextInstances||[],w.util.removeFromArray(m._iTextInstances,f),0===m._iTextInstances.length&&(m._hasITextHandlers=!1,f._removeCanvasHandlers(m)))})},_initCanvasHandlers:function(f){f._mouseUpITextHandler=function(){f._iTextInstances&&f._iTextInstances.forEach(function(m){m.__isMousedown=!1})},f.on("mouse:up",f._mouseUpITextHandler)},_removeCanvasHandlers:function(f){f.off("mouse:up",f._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(f,m,p,l){var u;return u={isAborted:!1,abort:function(){this.isAborted=!0}},f.animate("_currentCursorOpacity",m,{duration:p,onComplete:function(){u.isAborted||f[l]()},onChange:function(){f.canvas&&f.selectionStart===f.selectionEnd&&f.renderCursorOrSelection()},abort:function(){return u.isAborted}}),u},_onTickComplete:function(){var f=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){f._currentTickCompleteState=f._animateCursor(f,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(f){var m=this,p=f?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){m._tick()},p)},abortCursorAnimation:function(){var f=this._currentTickState||this._currentTickCompleteState,m=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,f&&m&&m.clearContext(m.contextTop||m.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(f){var m=0,p=f-1;if(this._reSpace.test(this._text[p]))for(;this._reSpace.test(this._text[p]);)m++,p--;for(;/\S/.test(this._text[p])&&p>-1;)m++,p--;return f-m},findWordBoundaryRight:function(f){var m=0,p=f;if(this._reSpace.test(this._text[p]))for(;this._reSpace.test(this._text[p]);)m++,p++;for(;/\S/.test(this._text[p])&&p<this._text.length;)m++,p++;return f+m},findLineBoundaryLeft:function(f){for(var m=0,p=f-1;!/\n/.test(this._text[p])&&p>-1;)m++,p--;return f-m},findLineBoundaryRight:function(f){for(var m=0,p=f;!/\n/.test(this._text[p])&&p<this._text.length;)m++,p++;return f+m},searchWordBoundary:function(f,m){for(var p=this._text,l=this._reSpace.test(p[f])?f-1:f,u=p[l],a=w.reNonWord;!a.test(u)&&l>0&&l<p.length;)u=p[l+=m];return a.test(u)&&(l+=1===m?0:1),l},selectWord:function(f){var m=this.searchWordBoundary(f=f||this.selectionStart,-1),p=this.searchWordBoundary(f,1);this.selectionStart=m,this.selectionEnd=p,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(f){var m=this.findLineBoundaryLeft(f=f||this.selectionStart),p=this.findLineBoundaryRight(f);return this.selectionStart=m,this.selectionEnd=p,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(f){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(f),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(f){f._iTextInstances&&f._iTextInstances.forEach(function(m){m.selected=!1,m.isEditing&&m.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(f){if(this.__isMousedown&&this.isEditing){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var m=this.getSelectionStartFromPointer(f.e),p=this.selectionStart,l=this.selectionEnd;(m!==this.__selectionStartOnMouseDown||p===l)&&(p===m||l===m)||(m>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=m):(this.selectionStart=m,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==p||this.selectionEnd!==l)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(f,m,p){var l=p.slice(0,f),u=w.util.string.graphemeSplit(l).length;if(f===m)return{selectionStart:u,selectionEnd:u};var a=p.slice(f,m);return{selectionStart:u,selectionEnd:u+w.util.string.graphemeSplit(a).length}},fromGraphemeToStringSelection:function(f,m,p){var u=p.slice(0,f).join("").length;return f===m?{selectionStart:u,selectionEnd:u}:{selectionStart:u,selectionEnd:u+p.slice(f,m).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var f=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=f.selectionStart,this.hiddenTextarea.selectionEnd=f.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var f=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=f.selectionEnd,this.inCompositionMode||(this.selectionStart=f.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var f=this._calcTextareaPosition();this.hiddenTextarea.style.left=f.left,this.hiddenTextarea.style.top=f.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var f=this.inCompositionMode?this.compositionStart:this.selectionStart,m=this._getCursorBoundaries(f),p=this.get2DCursorLocation(f),a=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"fontSize")*this.lineHeight,d=m.leftOffset,g=this.calcTransformMatrix(),c={x:m.left+d,y:m.top+m.topOffset+a},v=this.canvas.getRetinaScaling(),C=this.canvas.upperCanvasEl,D=C.width/v,E=C.height/v,M=D-a,x=E-a,R=C.clientWidth/D,j=C.clientHeight/E;return c=w.util.transformPoint(c,g),(c=w.util.transformPoint(c,this.canvas.viewportTransform)).x*=R,c.y*=j,c.x<0&&(c.x=0),c.x>M&&(c.x=M),c.y<0&&(c.y=0),c.y>x&&(c.y=x),c.x+=this.canvas._offset.left,c.y+=this.canvas._offset.top,{left:c.x+"px",top:c.y+"px",fontSize:a+"px",charHeight:a}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var f=this._textBeforeEdit!==this.text,m=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,m&&(m.blur&&m.blur(),m.parentNode&&m.parentNode.removeChild(m)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),f&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),f&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var f in this.styles)this._textLines[f]||delete this.styles[f]},removeStyleFromTo:function(f,m){var c,v,p=this.get2DCursorLocation(f,!0),l=this.get2DCursorLocation(m,!0),u=p.lineIndex,a=p.charIndex,d=l.lineIndex,g=l.charIndex;if(u!==d){if(this.styles[u])for(c=a;c<this._unwrappedTextLines[u].length;c++)delete this.styles[u][c];if(this.styles[d])for(c=g;c<this._unwrappedTextLines[d].length;c++)(v=this.styles[d][c])&&(this.styles[u]||(this.styles[u]={}),this.styles[u][a+c-g]=v);for(c=u+1;c<=d;c++)delete this.styles[c];this.shiftLineStyles(d,u-d)}else if(this.styles[u]){v=this.styles[u];var D,E,C=g-a;for(c=a;c<g;c++)delete v[c];for(E in this.styles[u])(D=parseInt(E,10))>=g&&(v[D-C]=v[E],delete v[E])}},shiftLineStyles:function(f,m){var p=y(this.styles);for(var l in this.styles){var u=parseInt(l,10);u>f&&(this.styles[u+m]=p[u],p[u-m]||delete this.styles[u])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(f,m,p,l){var u,a={},d=!1,g=this._unwrappedTextLines[f].length===m;for(var c in p||(p=1),this.shiftLineStyles(f,p),this.styles[f]&&(u=this.styles[f][0===m?m:m-1]),this.styles[f]){var v=parseInt(c,10);v>=m&&(d=!0,a[v-m]=this.styles[f][c],g&&0===m||delete this.styles[f][c])}var C=!1;for(d&&!g&&(this.styles[f+p]=a,C=!0),C&&p--;p>0;)l&&l[p-1]?this.styles[f+p]={0:y(l[p-1])}:u?this.styles[f+p]={0:y(u)}:delete this.styles[f+p],p--;this._forceClearCache=!0},insertCharStyleObject:function(f,m,p,l){this.styles||(this.styles={});var u=this.styles[f],a=u?y(u):{};for(var d in p||(p=1),a){var g=parseInt(d,10);g>=m&&(u[g+p]=a[g],a[g-p]||delete u[g])}if(this._forceClearCache=!0,l)for(;p--;)Object.keys(l[p]).length&&(this.styles[f]||(this.styles[f]={}),this.styles[f][m+p]=y(l[p]));else if(u)for(var c=u[m?m-1:1];c&&p--;)this.styles[f][m+p]=y(c)},insertNewStyleBlock:function(f,m,p){for(var l=this.get2DCursorLocation(m,!0),u=[0],a=0,d=0;d<f.length;d++)"\n"===f[d]?u[++a]=0:u[a]++;for(u[0]>0&&(this.insertCharStyleObject(l.lineIndex,l.charIndex,u[0],p),p=p&&p.slice(u[0]+1)),a&&this.insertNewlineStyleObject(l.lineIndex,l.charIndex+u[0],a),d=1;d<a;d++)u[d]>0?this.insertCharStyleObject(l.lineIndex+d,0,u[d],p):p&&this.styles[l.lineIndex+d]&&p[0]&&(this.styles[l.lineIndex+d][0]=p[0]),p=p&&p.slice(u[d]+1);u[d]>0&&this.insertCharStyleObject(l.lineIndex+d,0,u[d],p)},setSelectionStartEndWithShift:function(f,m,p){p<=f?(m===f?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=f),this.selectionStart=p):p>f&&p<m?"right"===this._selectionDirection?this.selectionEnd=p:this.selectionStart=p:(m===f?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=m),this.selectionEnd=p)},setSelectionInBoundaries:function(){var f=this.text.length;this.selectionStart>f?this.selectionStart=f:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>f?this.selectionEnd=f:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),w.util.object.extend(w.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(y){if(this.canvas){this.__newClickTime=+new Date;var f=y.pointer;this.isTripleClick(f)&&(this.fire("tripleclick",y),this._stopEvent(y.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=f,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(y){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===y.x&&this.__lastPointer.y===y.y},_stopEvent:function(y){y.preventDefault&&y.preventDefault(),y.stopPropagation&&y.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(y){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(y.e))},tripleClickHandler:function(y){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(y.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(y){!this.canvas||!this.editable||y.e.button&&1!==y.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(y.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(y){!this.canvas||!this.editable||y.e.button&&1!==y.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(y){if(this.__isMousedown=!1,!(!this.editable||this.group||y.transform&&y.transform.actionPerformed||y.e.button&&1!==y.e.button)){if(this.canvas){var f=this.canvas._activeObject;if(f&&f!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(y.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(y){var f=this.getSelectionStartFromPointer(y);y.shiftKey?this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,f):(this.selectionStart=f,this.selectionEnd=f),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(y){for(var g,f=this.getLocalPointer(y),m=0,p=0,l=0,u=0,a=0,c=0,v=this._textLines.length;c<v&&l<=f.y;c++)l+=this.getHeightOfLine(c)*this.scaleY,a=c,c>0&&(u+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));p=this._getLineLeftOffset(a)*this.scaleX,g=this._textLines[a],"rtl"===this.direction&&(f.x=this.width*this.scaleX-f.x+p);for(var C=0,D=g.length;C<D&&(m=p,(p+=this.__charBounds[a][C].kernedWidth*this.scaleX)<=f.x);C++)u++;return this._getNewSelectionStartFromOffset(f,m,p,u,D)},_getNewSelectionStartFromOffset:function(y,f,m,p,l){var a=m-y.x,g=p+(a>y.x-f||a<0?0:1);return this.flipX&&(g=l-g),g>this._text.length&&(g=this._text.length),g}}),w.util.object.extend(w.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=w.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var y=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+y.top+"; left: "+y.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+y.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):w.document.body.appendChild(this.hiddenTextarea),w.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),w.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),w.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),w.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),w.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),w.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),w.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),w.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),w.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(w.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(y){if(this.isEditing){var f="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(y.keyCode in f)this[f[y.keyCode]](y);else{if(!(y.keyCode in this.ctrlKeysMapDown)||!y.ctrlKey&&!y.metaKey)return;this[this.ctrlKeysMapDown[y.keyCode]](y)}y.stopImmediatePropagation(),y.preventDefault(),y.keyCode>=33&&y.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(y){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:y.keyCode in this.ctrlKeysMapUp&&(y.ctrlKey||y.metaKey)&&(this[this.ctrlKeysMapUp[y.keyCode]](y),y.stopImmediatePropagation(),y.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(y){var f=this.fromPaste;if(this.fromPaste=!1,y&&y.stopPropagation(),this.isEditing){var u,a,C,D,E,m=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,p=this._text.length,l=m.length,d=l-p,g=this.selectionStart,c=this.selectionEnd,v=g!==c;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var M=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),x=g>M.selectionStart;v?(u=this._text.slice(g,c),d+=c-g):l<p&&(u=x?this._text.slice(c+d,c):this._text.slice(g,g-d)),a=m.slice(M.selectionEnd-d,M.selectionEnd),u&&u.length&&(a.length&&(C=this.getSelectionStyles(g,g+1,!1),C=a.map(function(){return C[0]})),v?(D=g,E=c):x?(D=c-u.length,E=c):(D=c,E=c+u.length),this.removeStyleFromTo(D,E)),a.length&&(f&&a.join("")===w.copiedText&&!w.disableStyleCopyPaste&&(C=w.copiedTextStyle),this.insertNewStyleBlock(a,g,C)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(y){this.compositionStart=y.target.selectionStart,this.compositionEnd=y.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(w.copiedText=this.getSelectedText(),w.copiedTextStyle=w.disableStyleCopyPaste?null:this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(y){return y&&y.clipboardData||w.window.clipboardData},_getWidthBeforeCursor:function(y,f){var p,m=this._getLineLeftOffset(y);return f>0&&(m+=(p=this.__charBounds[y][f-1]).left+p.width),m},getDownCursorOffset:function(y,f){var m=this._getSelectionForOffset(y,f),p=this.get2DCursorLocation(m),l=p.lineIndex;if(l===this._textLines.length-1||y.metaKey||34===y.keyCode)return this._text.length-m;var u=p.charIndex,a=this._getWidthBeforeCursor(l,u),d=this._getIndexOnLine(l+1,a);return this._textLines[l].slice(u).length+d+1+this.missingNewlineOffset(l)},_getSelectionForOffset:function(y,f){return y.shiftKey&&this.selectionStart!==this.selectionEnd&&f?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(y,f){var m=this._getSelectionForOffset(y,f),p=this.get2DCursorLocation(m),l=p.lineIndex;if(0===l||y.metaKey||33===y.keyCode)return-m;var u=p.charIndex,a=this._getWidthBeforeCursor(l,u),d=this._getIndexOnLine(l-1,a),g=this._textLines[l].slice(0,u),c=this.missingNewlineOffset(l-1);return-this._textLines[l-1].length+d-g.length+(1-c)},_getIndexOnLine:function(y,f){for(var a,d,m=this._textLines[y],l=this._getLineLeftOffset(y),u=0,g=0,c=m.length;g<c;g++)if((l+=a=this.__charBounds[y][g].width)>f){d=!0;var C=l,D=Math.abs(l-a-f);u=Math.abs(C-f)<D?g:g-1;break}return d||(u=m.length-1),u},moveCursorDown:function(y){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",y)},moveCursorUp:function(y){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",y)},_moveCursorUpOrDown:function(y,f){var p=this["get"+y+"CursorOffset"](f,"right"===this._selectionDirection);f.shiftKey?this.moveCursorWithShift(p):this.moveCursorWithoutShift(p),0!==p&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(y){return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,"left"===this._selectionDirection?this.selectionStart+y:this.selectionEnd+y),0!==y},moveCursorWithoutShift:function(y){return y<0?(this.selectionStart+=y,this.selectionEnd=this.selectionStart):(this.selectionEnd+=y,this.selectionStart=this.selectionEnd),0!==y},moveCursorLeft:function(y){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",y)},_move:function(y,f,m){var p;if(y.altKey)p=this["findWordBoundary"+m](this[f]);else{if(!y.metaKey&&35!==y.keyCode&&36!==y.keyCode)return this[f]+="Left"===m?-1:1,!0;p=this["findLineBoundary"+m](this[f])}if(typeof p<"u"&&this[f]!==p)return this[f]=p,!0},_moveLeft:function(y,f){return this._move(y,f,"Left")},_moveRight:function(y,f){return this._move(y,f,"Right")},moveCursorLeftWithoutShift:function(y){var f=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(f=this._moveLeft(y,"selectionStart")),this.selectionEnd=this.selectionStart,f},moveCursorLeftWithShift:function(y){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(y,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(y,"selectionStart")):void 0},moveCursorRight:function(y){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",y)},_moveCursorLeftOrRight:function(y,f){var m="moveCursor"+y+"With";this._currentCursorOpacity=1,this[m+=f.shiftKey?"Shift":"outShift"](f)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(y){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(y,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(y,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(y){var f=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(f=this._moveRight(y,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,f},removeChars:function(y,f){typeof f>"u"&&(f=y+1),this.removeStyleFromTo(y,f),this._text.splice(y,f-y),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(y,f,m,p){typeof p>"u"&&(p=m),p>m&&this.removeStyleFromTo(m,p);var l=w.util.string.graphemeSplit(y);this.insertNewStyleBlock(l,m,f),this._text=[].concat(this._text.slice(0,m),l,this._text.slice(p)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var y=w.util.toFixed,f=/  +/g;w.util.object.extend(w.Text.prototype,{_toSVG:function(){var m=this._getSVGLeftTopOffsets(),p=this._getSVGTextAndBg(m.textTop,m.textLeft);return this._wrapSVGTextAndBg(p)},toSVG:function(m){return this._createBaseSVGMarkup(this._toSVG(),{reviver:m,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(m){var l=this.getSvgTextDecoration(this);return[m.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",l?'text-decoration="'+l+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",m.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(m,p){var d,l=[],u=[],a=m;this._setSVGBg(u);for(var g=0,c=this._textLines.length;g<c;g++)d=this._getLineLeftOffset(g),(this.textBackgroundColor||this.styleHas("textBackgroundColor",g))&&this._setSVGTextLineBg(u,g,p+d,a),this._setSVGTextLineText(l,g,p+d,a),a+=this.getHeightOfLine(g);return{textSpans:l,textBgRects:u}},_createTextCharSpan:function(m,p,l,u){var a=m!==m.trim()||m.match(f),d=this.getSvgSpanStyles(p,a),g=d?'style="'+d+'"':"",c=p.deltaY,v="",C=w.Object.NUM_FRACTION_DIGITS;return c&&(v=' dy="'+y(c,C)+'" '),['<tspan x="',y(l,C),'" y="',y(u,C),'" ',v,g,">",w.util.string.escapeXml(m),"</tspan>"].join("")},_setSVGTextLineText:function(m,p,l,u){var g,c,C,D,x,a=this.getHeightOfLine(p),d=-1!==this.textAlign.indexOf("justify"),v="",E=0,M=this._textLines[p];u+=a*(1-this._fontSizeFraction)/this.lineHeight;for(var R=0,j=M.length-1;R<=j;R++)x=R===j||this.charSpacing,v+=M[R],C=this.__charBounds[p][R],0===E?(l+=C.kernedWidth-C.width,E+=C.width):E+=C.kernedWidth,d&&!x&&this._reSpaceAndTab.test(M[R])&&(x=!0),x||(g=g||this.getCompleteStyleDeclaration(p,R),c=this.getCompleteStyleDeclaration(p,R+1),x=w.util.hasStyleChanged(g,c,!0)),x&&(D=this._getStyleDeclaration(p,R)||{},m.push(this._createTextCharSpan(v,D,l,u)),v="",g=c,l+=E,E=0)},_pushTextBgRect:function(m,p,l,u,a,d){var g=w.Object.NUM_FRACTION_DIGITS;m.push("\t\t<rect ",this._getFillAttributes(p),' x="',y(l,g),'" y="',y(u,g),'" width="',y(a,g),'" height="',y(d,g),'"></rect>\n')},_setSVGTextLineBg:function(m,p,l,u){for(var v,C,a=this._textLines[p],d=this.getHeightOfLine(p)/this.lineHeight,g=0,c=0,D=this.getValueOfPropertyAt(p,0,"textBackgroundColor"),E=0,M=a.length;E<M;E++)v=this.__charBounds[p][E],(C=this.getValueOfPropertyAt(p,E,"textBackgroundColor"))!==D?(D&&this._pushTextBgRect(m,D,l+c,u,g,d),c=v.left,g=v.width,D=C):g+=v.kernedWidth;C&&this._pushTextBgRect(m,C,l+c,u,g,d)},_getFillAttributes:function(m){var p=m&&"string"==typeof m?new w.Color(m):"";return p&&p.getSource()&&1!==p.getAlpha()?'opacity="'+p.getAlpha()+'" fill="'+p.setAlpha(1).toRgb()+'"':'fill="'+m+'"'},_getSVGLineTopOffset:function(m){for(var l,p=0,u=0;u<m;u++)p+=this.getHeightOfLine(u);return l=this.getHeightOfLine(u),{lineTop:p,offset:(this._fontSizeMult-this._fontSizeFraction)*l/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(m){return w.Object.prototype.getSvgStyles.call(this,m)+" white-space: pre;"}})}(),function(y){"use strict";var f=y.fabric||(y.fabric={});f.Textbox=f.util.createClass(f.IText,f.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:f.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(m){for(var p=0,l=0,u=0,a={},d=0;d<m.graphemeLines.length;d++)"\n"===m.graphemeText[u]&&d>0?(l=0,u++,p++):!this.splitByGrapheme&&this._reSpaceAndTab.test(m.graphemeText[u])&&d>0&&(l++,u++),a[d]={line:p,offset:l},u+=m.graphemeLines[d].length,l+=m.graphemeLines[d].length;return a},styleHas:function(m,p){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[p];l&&(p=l.line)}return f.Text.prototype.styleHas.call(this,m,p)},isEmptyStyles:function(m){if(!this.styles)return!0;var u,a,p=0,d=!1,g=this._styleMap[m],c=this._styleMap[m+1];for(var v in g&&(m=g.line,p=g.offset),c&&(d=c.line===m,u=c.offset),a=typeof m>"u"?this.styles:{line:this.styles[m]})for(var C in a[v])if(C>=p&&(!d||C<u))for(var D in a[v][C])return!1;return!0},_getStyleDeclaration:function(m,p){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[m];if(!l)return null;m=l.line,p=l.offset+p}return this.callSuper("_getStyleDeclaration",m,p)},_setStyleDeclaration:function(m,p,l){var u=this._styleMap[m];this.styles[m=u.line][p=u.offset+p]=l},_deleteStyleDeclaration:function(m,p){var l=this._styleMap[m];delete this.styles[m=l.line][p=l.offset+p]},_getLineStyle:function(m){return!!this.styles[this._styleMap[m].line]},_setLineStyle:function(m){this.styles[this._styleMap[m].line]={}},_wrapText:function(m,p){var u,l=[];for(this.isWrapping=!0,u=0;u<m.length;u++)l=l.concat(this._wrapLine(m[u],u,p));return this.isWrapping=!1,l},_measureWord:function(m,p,l){var a,u=0;l=l||0;for(var g=0,c=m.length;g<c;g++)u+=this._getGraphemeBox(m[g],p,g+l,a,!0).kernedWidth,a=m[g];return u},_wrapLine:function(m,p,l,he){var a=0,d=this.splitByGrapheme,g=[],c=[],v=d?f.util.string.graphemeSplit(m):m.split(this._wordJoiners),C="",D=0,E=d?"":" ",M=0,x=0,R=0,j=!0,q=this._getWidthOfCharSpacing();he=he||0,0===v.length&&v.push([]),l-=he;for(var me=0;me<v.length;me++)C=d?v[me]:f.util.string.graphemeSplit(v[me]),M=this._measureWord(C,p,D),D+=C.length,(a+=x+M-q)>l&&!j?(g.push(c),c=[],a=M,j=!0):a+=q,!j&&!d&&c.push(E),c=c.concat(C),x=d?0:this._measureWord([E],p,D),D++,j=!1,M>R&&(R=M);return me&&g.push(c),R+he>this.dynamicMinWidth&&(this.dynamicMinWidth=R-q+he),g},isEndOfWrapping:function(m){return!this._styleMap[m+1]||this._styleMap[m+1].line!==this._styleMap[m].line},missingNewlineOffset:function(m){return this.splitByGrapheme?this.isEndOfWrapping(m)?1:0:1},_splitTextIntoLines:function(m){for(var p=f.Text.prototype._splitTextIntoLines.call(this,m),l=this._wrapText(p.lines,this.width),u=new Array(l.length),a=0;a<l.length;a++)u[a]=l[a].join("");return p.lines=u,p.graphemeLines=l,p},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var m={};for(var p in this._styleMap)this._textLines[p]&&(m[this._styleMap[p].line]=1);for(var p in this.styles)m[p]||delete this.styles[p]},toObject:function(m){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(m))}}),f.Textbox.fromObject=function(m,p){var l=f.util.stylesFromArray(m.styles,m.text),u=Object.assign({},m,{styles:l});return f.Object._fromObject("Textbox",u,p,"text")}}(We),function(){var y=w.controlsUtils,f=y.scaleSkewCursorStyleHandler,m=y.scaleCursorStyleHandler,p=y.scalingEqually,l=y.scalingYOrSkewingX,u=y.scalingXOrSkewingY,a=y.scaleOrSkewActionName,d=w.Object.prototype.controls;if(d.ml=new w.Control({x:-.5,y:0,cursorStyleHandler:f,actionHandler:u,getActionName:a}),d.mr=new w.Control({x:.5,y:0,cursorStyleHandler:f,actionHandler:u,getActionName:a}),d.mb=new w.Control({x:0,y:.5,cursorStyleHandler:f,actionHandler:l,getActionName:a}),d.mt=new w.Control({x:0,y:-.5,cursorStyleHandler:f,actionHandler:l,getActionName:a}),d.tl=new w.Control({x:-.5,y:-.5,cursorStyleHandler:m,actionHandler:p}),d.tr=new w.Control({x:.5,y:-.5,cursorStyleHandler:m,actionHandler:p}),d.bl=new w.Control({x:-.5,y:.5,cursorStyleHandler:m,actionHandler:p}),d.br=new w.Control({x:.5,y:.5,cursorStyleHandler:m,actionHandler:p}),d.mtr=new w.Control({x:0,y:-.5,actionHandler:y.rotationWithSnapping,cursorStyleHandler:y.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),w.Textbox){var g=w.Textbox.prototype.controls={};g.mtr=d.mtr,g.tr=d.tr,g.br=d.br,g.tl=d.tl,g.bl=d.bl,g.mt=d.mt,g.mb=d.mb,g.mr=new w.Control({x:.5,y:0,actionHandler:y.changeWidth,cursorStyleHandler:f,actionName:"resizing"}),g.ml=new w.Control({x:-.5,y:0,actionHandler:y.changeWidth,cursorStyleHandler:f,actionName:"resizing"})}}()},960:()=>{},759:()=>{},272:()=>{}},Ka=>{Ka(Ka.s=390)}]);